{"mappings":"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","sources":["src/index.ts","src/constants.ts","src/app/factory.ts","src/core/worker-factory.ts","src/core/core-thread.ts","src/core/graphic/graphic.component.ts","src/core/camera/camera.component.ts","src/core/render.queue.ts","src/app/object.renderer.ts","src/app/object.manager.ts","src/app/object.api.ts","src/app/object.util.ts","src/core/geometries/Geometries.ts","src/core/geometries/EarthGeometry.ts","src/utils.ts","src/core/math/cartesian3.ts","src/core/math/math.utils.ts","src/interface.ts","src/test.ts","src/core/transforms.ts","src/core/ellipsoid.ts","src/core/heading-pitch-roll.ts","src/core/quration.ts"],"sourcesContent":["export { REVISION } from './constants';\r\nexport { InterfcaeFactory } from './app/factory';\r\nexport * from './core/geometries/Geometries';\r\nexport * from './utils';\r\nexport * from './interface';\r\nexport * from './test';\r\nexport * from './core/transforms';\r\n","export const REVISION = '0dev';\r\nexport const EARTH_RADIUS = 6378137;\r\n","import { SingletonWorkerFactory } from '../core/worker-factory';\r\nimport * as Cesium from 'cesium';\r\nimport { transfer } from 'comlink';\r\nimport { ObjectRenderer } from './object.renderer';\r\nimport { ObjectManager } from './object.manager';\r\nimport { ObjectUtil } from './object.util';\r\n\r\nexport class InterfcaeFactory {\r\n\tprivate readonly coreWrapper =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tprivate readonly container: HTMLDivElement;\r\n\r\n\tconstructor(private readonly viewer: Cesium.Viewer) {\r\n\t\tconst root = viewer.container.parentElement;\r\n\r\n\t\tthis.container = document.createElement('div');\r\n\t\tthis.container.id = 'ThreeContainer';\r\n\t\tthis.container.style.position = 'absolute';\r\n\t\tthis.container.style.top = '0';\r\n\t\tthis.container.style.left = '0';\r\n\t\tthis.container.style.height = '100%';\r\n\t\tthis.container.style.width = '100%';\r\n\t\tthis.container.style.margin = '0';\r\n\t\tthis.container.style.overflow = 'hidden';\r\n\t\tthis.container.style.padding = '0';\r\n\t\tthis.container.style.pointerEvents = 'none';\r\n\r\n\t\tconst canvas = document.createElement('canvas');\r\n\t\tthis.container.append(canvas);\r\n\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error('cannot fond parent element');\r\n\t\t} else {\r\n\t\t\troot.append(this.container);\r\n\t\t}\r\n\r\n\t\tif (viewer.useDefaultRenderLoop) {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t'Please set Cesium viewer.useDefaultRenderLoop = false for syncronize animation frame to this plug-in'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// @ts-ignore\r\n\t\tconst offscreen = canvas.transferControlToOffscreen();\r\n\t\toffscreen.width = canvas.clientWidth;\r\n\t\toffscreen.height = canvas.clientHeight;\r\n\r\n\t\t// @ts-ignore\r\n\t\tthis.coreWrapper.init(transfer(offscreen, [offscreen])).then(() => {\r\n\t\t\tthis.coreWrapper.setPixelRatio(window.devicePixelRatio);\r\n\t\t});\r\n\r\n\t\tthis.onWindowResize();\r\n\t\twindow.addEventListener('resize', this.onWindowResize.bind(this));\r\n\t}\r\n\r\n\tprivate onWindowResize() {\r\n\t\tthis.renderer.setSize(\r\n\t\t\tthis.viewer.container.clientWidth,\r\n\t\t\tthis.viewer.container.clientHeight\r\n\t\t);\r\n\t}\r\n\r\n\tprivate _manager: ObjectManager | undefined;\r\n\tget manager() {\r\n\t\treturn this._manager || (this._manager = new ObjectManager());\r\n\t}\r\n\r\n\tprivate _util: ObjectUtil | undefined;\r\n\tget util() {\r\n\t\treturn this._util || (this._util = new ObjectUtil(this.viewer));\r\n\t}\r\n\r\n\tprivate _renderer: ObjectRenderer | undefined;\r\n\tget renderer() {\r\n\t\treturn (\r\n\t\t\tthis._renderer || (this._renderer = new ObjectRenderer(this.viewer))\r\n\t\t);\r\n\t}\r\n}\r\n","import { wrap, Remote } from 'comlink';\r\nimport CoreThread from './core-thread';\r\n\r\ninterface WorkerMap {\r\n\tCoreThread: CoreThread;\r\n}\r\nexport const WorkerURL = {\r\n\tCoreThread: new URL('./core-thread', import.meta.url),\r\n} as const;\r\n\r\nexport type WorkerURL = typeof WorkerURL[keyof typeof WorkerURL];\r\n\r\nexport class SingletonWorkerFactory {\r\n\tprivate static readonly workerMap = new Map<URL, Worker>();\r\n\t/**\r\n\t * 웹 워커를 가져옵니다.\r\n\t * @param workerClassName\r\n\t * @returns\r\n\t */\r\n\tstatic getWorker<T extends keyof WorkerMap>(workerClassName: T): Worker {\r\n\t\tlet worker: Worker;\r\n\t\tconst workerURL = WorkerURL[workerClassName];\r\n\t\tif (!this.workerMap.has(workerURL)) {\r\n\t\t\tworker = new Worker(workerURL, { type: 'module' });\r\n\t\t\tthis.workerMap.set(workerURL, worker);\r\n\t\t} else {\r\n\t\t\tworker = this.workerMap.get(workerURL)!;\r\n\t\t}\r\n\t\treturn worker;\r\n\t}\r\n\r\n\tprivate static readonly wrapperMap = new Map<URL, Remote<any>>();\r\n\t/**\r\n\t * 웹 워커의 Warpper 를 가져옵니다.\r\n\t * @param workerClassName\r\n\t * @returns\r\n\t */\r\n\tstatic getWrapper<T extends keyof WorkerMap>(\r\n\t\tworkerClassName: T\r\n\t): Remote<WorkerMap[T]> {\r\n\t\tconst worker = SingletonWorkerFactory.getWorker(workerClassName);\r\n\t\tconst workerURL = WorkerURL[workerClassName];\r\n\r\n\t\tlet wrapper: Remote<WorkerMap[T]>;\r\n\t\tif (!this.wrapperMap.has(workerURL)) {\r\n\t\t\twrapper = wrap<WorkerMap[T]>(worker);\r\n\t\t\tthis.wrapperMap.set(workerURL, wrapper);\r\n\t\t} else {\r\n\t\t\twrapper = this.wrapperMap.get(workerURL)! as Remote<WorkerMap[T]>;\r\n\t\t}\r\n\r\n\t\treturn wrapper;\r\n\t}\r\n}\r\n","import { expose } from 'comlink';\r\nimport { GraphicComponent } from './graphic/graphic.component';\r\nimport { BoxHelper, Matrix4, Object3D, ObjectLoader, Vector3 } from 'three';\r\nimport { ThreeWGS84 } from '..';\r\nimport CameraComponent from './camera/camera.component';\r\nimport { RenderQueue } from './render.queue';\r\n\r\nexport interface CameraInitParam {\r\n\taspect: number;\r\n\tfar: number;\r\n\tnear: number;\r\n\tfov: number;\r\n}\r\n\r\nexport default class CoreThread {\r\n\tprivate readonly helpers = new Map<string, Object3D>();\r\n\tprivate readonly graphicComponent = GraphicComponent.getInstance();\r\n\tprivate readonly objectLoader = new ObjectLoader();\r\n\tprivate _renderQueue = new RenderQueue();\r\n\tconstructor() {\r\n\t\tthis._renderQueue.renderNextFrame$.subscribe(() => {\r\n\t\t\tself.postMessage({ type: 'onRender' });\r\n\t\t});\r\n\t\tself.onmessage = (e: MessageEvent) => {\r\n\t\t\tconst message = e.data;\r\n\t\t\tif (message) {\r\n\t\t\t\tswitch (message.type) {\r\n\t\t\t\t\tcase RequestType.RENDER:\r\n\t\t\t\t\t\tthis._renderQueue.updateNextAnimationFrame({\r\n\t\t\t\t\t\t\t...message.param,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tinit(canvas: HTMLCanvasElement) {\r\n\t\tthis.graphicComponent.init(canvas);\r\n\t}\r\n\r\n\tsetPixelRatio(value: number) {\r\n\t\tthis.graphicComponent.setPixelRatio(value);\r\n\t}\r\n\r\n\tgetBox3(id: number): Vector3 | undefined {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\treturn object.userData.box3;\r\n\t\t}\r\n\t}\r\n\r\n\tgetUserDataAt<T>(id: number, key: string) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\treturn <T>object.userData[key];\r\n\t\t}\r\n\t}\r\n\r\n\tsetUserDataAt(id: number, key: string, data: any) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tobject.userData[key] = data;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getObject(value: number) {\r\n\t\treturn this.graphicComponent.scene.getObjectById(value);\r\n\t}\r\n\r\n\tisExist(id: number) {\r\n\t\treturn !!this.getObject(id);\r\n\t}\r\n\r\n\tsetBoxHelperTo(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tif (this.helpers.has('BoxHelper')) {\r\n\t\t\t\tconst helper = this.helpers.get('BoxHelper')! as BoxHelper;\r\n\t\t\t\thelper.update(object);\r\n\t\t\t} else {\r\n\t\t\t\tconst helper = new BoxHelper(object);\r\n\t\t\t\tthis.helpers.set('BoxHelper', helper);\r\n\t\t\t\tthis.graphicComponent.scene.add(helper);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thide(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tobject.visible = false;\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n\r\n\tshow(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tobject.visible = true;\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n\r\n\tadd(json: any) {\r\n\t\tconst object = this.objectLoader.parse(json);\r\n\t\tthis.graphicComponent.scene.add(object);\r\n\t\treturn object.id;\r\n\t}\r\n\r\n\tupdate(id: number, json: any) {\r\n\t\tlet object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tconst updateObject = this.objectLoader.parse(json);\r\n\t\t\tobject.copy(updateObject);\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n\r\n\tgetWGS84(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\treturn object.userData.wgs84 as ThreeWGS84;\r\n\t\t}\r\n\t}\r\n\r\n\tsetSize(width: number, height: number) {\r\n\t\tGraphicComponent.getInstance().setSize(width, height);\r\n\t}\r\n\r\n\tinitCamera(param: CameraInitParam) {\r\n\t\tconst camera = CameraComponent.getInstance().getCamera();\r\n\t\tcamera.aspect = param.aspect;\r\n\t\tcamera.far = param.far;\r\n\t\tcamera.near = param.near;\r\n\t\tcamera.fov = param.fov;\r\n\t\tconsole.table(param);\r\n\t\tcamera.updateProjectionMatrix();\r\n\t}\r\n\r\n\tupdatePosition(\r\n\t\tid: number,\r\n\t\tparam: {\r\n\t\t\tmatrix: Matrix4;\r\n\t\t\tposition: ThreeWGS84;\r\n\t\t}\r\n\t) {\r\n\t\tlet object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tobject.applyMatrix4(param.matrix);\r\n\t\t\tobject.userData.wgs84 = param.position;\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n\r\n\tdelete(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tthis.graphicComponent.scene.remove(object);\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n}\r\n\r\nexport const RequestType = Object.freeze({\r\n\tRENDER: 0,\r\n});\r\n\r\nexpose(new CoreThread());\r\n","import * as THREE from 'three';\r\nimport CameraComponent from '../camera/camera.component';\r\nimport { Matrix4, Vector3, WebGLRendererParameters } from 'three';\r\n\r\nexport interface CurrentExtent {\r\n\txmin: number;\r\n\tymin: number;\r\n\txmax: number;\r\n\tymax: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface RenderParam {\r\n\tcvm: Float32Array;\r\n\tcivm: Float32Array;\r\n}\r\n\r\nexport class GraphicComponent {\r\n\tprivate static instance: GraphicComponent;\r\n\tprivate readonly camera: THREE.PerspectiveCamera;\r\n\tprivate constructor(\r\n\t\treadonly scene = new THREE.Scene(),\r\n\t\tprivate readonly cameraComponent = CameraComponent.getInstance()\r\n\t) {\r\n\t\tthis.camera = this.cameraComponent.getCamera();\r\n\t}\r\n\r\n\tstatic getInstance() {\r\n\t\treturn this.instance || (this.instance = new this());\r\n\t}\r\n\r\n\tsetPixelRatio(value: number): boolean {\r\n\t\tlet success = false;\r\n\t\tif (this.renderer) {\r\n\t\t\tthis.renderer.setPixelRatio(value);\r\n\t\t\tsuccess = true;\r\n\t\t}\r\n\t\treturn success;\r\n\t}\r\n\r\n\trenderer?: THREE.WebGLRenderer;\r\n\tinit(canvas: HTMLCanvasElement) {\r\n\t\tconst params: WebGLRendererParameters = {\r\n\t\t\tcanvas: canvas,\r\n\t\t\tpowerPreference: 'high-performance',\r\n\t\t\talpha: true,\r\n\t\t\tantialias: true,\r\n\t\t\tlogarithmicDepthBuffer: true,\r\n\t\t\tdepth: false,\r\n\t\t};\r\n\r\n\t\tconst context = canvas.getContext('webgl2');\r\n\t\tif (context) {\r\n\t\t\tparams.context = context;\r\n\t\t}\r\n\r\n\t\tthis.renderer = new THREE.WebGLRenderer(params);\r\n\t\tconsole.log(\r\n\t\t\t`[Graphic] isWebGL2Enabled : ${this.renderer.capabilities.isWebGL2}`\r\n\t\t);\r\n\t}\r\n\r\n\tsetSize(width: number, height: number) {\r\n\t\tconst camera = this.cameraComponent.getCamera();\r\n\t\tcamera.aspect = width / height;\r\n\t\tcamera.updateProjectionMatrix();\r\n\t\tthis.renderer?.setSize(width, height, false);\r\n\t}\r\n\r\n\t/**\r\n\t * 장면을 렌더링합니다.\r\n\t * @param param\r\n\t */\r\n\trender(param: RenderParam) {\r\n\t\tif (this.renderer) {\r\n\t\t\tthis.camera.matrixAutoUpdate = false;\r\n\r\n\t\t\t// prettier-ignore\r\n\t\t\tthis.camera.matrixWorld.set(\r\n\t\t\t\tparam.civm[ 0], param.civm[ 4], param.civm[ 8], param.civm[12],\r\n\t\t\t\tparam.civm[ 1], param.civm[ 5], param.civm[ 9], param.civm[13],\r\n\t\t\t\tparam.civm[ 2], param.civm[ 6], param.civm[10], param.civm[14],\r\n\t\t\t\tparam.civm[ 3], param.civm[ 7], param.civm[11], param.civm[15]\r\n\t\t\t);\r\n\t\t\t// prettier-ignore\r\n\t\t\tthis.camera.matrixWorldInverse.set(\r\n\t\t\t\tparam.cvm[ 0], param.cvm[ 4], param.cvm[ 8], param.cvm[12],\r\n\t\t\t\tparam.cvm[ 1], param.cvm[ 5], param.cvm[ 9], param.cvm[13],\r\n\t\t\t\tparam.cvm[ 2], param.cvm[ 6], param.cvm[10], param.cvm[14],\r\n\t\t\t\tparam.cvm[ 3], param.cvm[ 7], param.cvm[11], param.cvm[15]\r\n\t\t\t);\r\n\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t\tthis.renderer.render(this.scene, this.camera);\r\n\t\t}\r\n\t}\r\n}\r\n","import { PerspectiveCamera } from 'three';\r\nimport { Matrix4 } from 'cesium';\r\n\r\nexport default class CameraComponent {\r\n\tprivate static instance: CameraComponent;\r\n\tprivate readonly perspectiveCamera: PerspectiveCamera;\r\n\tprivate constructor() {\r\n\t\tthis.perspectiveCamera = new PerspectiveCamera();\r\n\t}\r\n\r\n\tgetCamera(): PerspectiveCamera {\r\n\t\treturn this.perspectiveCamera;\r\n\t}\r\n\r\n\tstatic getInstance() {\r\n\t\treturn this.instance || (this.instance = new this());\r\n\t}\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { GraphicComponent, RenderParam } from './graphic/graphic.component';\r\n\r\n/**\r\n * Cesium 과 three.js 의 스레드 간 렌더 비동기 이슈를 해결합니다.\r\n */\r\nexport class RenderQueue {\r\n\tprivate readonly _queue: RenderParam[] = [];\r\n\tprivate readonly graphic = GraphicComponent.getInstance();\r\n\tprivate param: RenderParam | undefined;\r\n\tprivate _handle: number | undefined;\r\n\tprivate readonly _bindRenderNextAnimationFrame =\r\n\t\tthis._renderNextAnimationFrame.bind(this);\r\n\tprivate readonly _renderSubject = new Subject<void>();\r\n\treadonly renderNextFrame$ = this._renderSubject.pipe();\r\n\r\n\t/**\r\n\t * 다음 장면을 그립니다.\r\n\t */\r\n\tprivate _renderNextAnimationFrame() {\r\n\t\tthis.param = this._queue.pop();\r\n\t\tif (this.param) {\r\n\t\t\tthis.graphic.render(this.param);\r\n\t\t}\r\n\t\tthis._handle = requestAnimationFrame(\r\n\t\t\tthis._bindRenderNextAnimationFrame\r\n\t\t);\r\n\t\tthis._renderSubject.next();\r\n\t}\r\n\r\n\t/**\r\n\t * 다음 장면을 요청합니다.\r\n\t * @param param 렌더링 파라미터\r\n\t */\r\n\tupdateNextAnimationFrame(param: RenderParam) {\r\n\t\tif (this._queue.length) {\r\n\t\t\tthis._queue[0] = param;\r\n\t\t} else {\r\n\t\t\tthis._queue.push(param);\r\n\t\t}\r\n\r\n\t\tif (!this._handle) this._renderNextAnimationFrame();\r\n\t}\r\n}\r\n","import { Viewer } from 'cesium';\r\nimport { RenderParam } from '../core/graphic/graphic.component';\r\nimport { SingletonWorkerFactory } from '../core/worker-factory';\r\nimport { Math as CesiumMath, PerspectiveFrustum } from 'cesium';\r\nimport { RequestType } from '../core/core-thread';\r\n\r\nexport class ObjectRenderer {\r\n\tprivate readonly coreWorker =\r\n\t\tSingletonWorkerFactory.getWorker('CoreThread');\r\n\tprivate readonly coreWrapper =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tconstructor(private readonly viewer: Viewer) {\r\n\t\tthis.coreWrapper.setPixelRatio(window.devicePixelRatio);\r\n\t\tthis.coreWrapper.initCamera({\r\n\t\t\tfov: CesiumMath.toDegrees(\r\n\t\t\t\t(this.viewer.camera.frustum as PerspectiveFrustum).fovy\r\n\t\t\t),\r\n\t\t\tnear: this.viewer.camera.frustum.near,\r\n\t\t\tfar: this.viewer.camera.frustum.far,\r\n\t\t\taspect:\r\n\t\t\t\tthis.viewer.container.clientWidth /\r\n\t\t\t\tthis.viewer.container.clientHeight,\r\n\t\t});\r\n\t}\r\n\r\n\tsetSize(width: number, height: number) {\r\n\t\treturn this.coreWrapper.setSize(width, height);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst cvm = new Float32Array(this.viewer.camera.viewMatrix);\r\n\t\tconst civm = new Float32Array(this.viewer.camera.inverseViewMatrix);\r\n\t\tthis.coreWorker.postMessage(\r\n\t\t\t{\r\n\t\t\t\ttype: RequestType.RENDER,\r\n\t\t\t\tparam: {\r\n\t\t\t\t\tcvm: cvm,\r\n\t\t\t\t\tcivm: civm,\r\n\t\t\t\t} as RenderParam,\r\n\t\t\t},\r\n\t\t\t[cvm.buffer, civm.buffer]\r\n\t\t);\r\n\t}\r\n}\r\n","import { Box3, Object3D } from 'three';\r\nimport { CesiumWGS84 } from '..';\r\nimport { SingletonWorkerFactory } from '../core/worker-factory';\r\nimport { ObjectAPI } from './object.api';\r\n\r\nexport interface RequestResult {\r\n\tobjectId: number;\r\n\tresult: boolean;\r\n}\r\n\r\nexport class ObjectManager {\r\n\tprivate readonly coreWrapper =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tprivate _calcBox3(object: Object3D) {\r\n\t\treturn new Box3().setFromObject(object).max;\r\n\t}\r\n\r\n\tasync add(object: Object3D, position?: CesiumWGS84): Promise<ObjectAPI> {\r\n\t\tconst id = await this.coreWrapper.add(object.toJSON());\r\n\t\tconst obj = new ObjectAPI(id);\r\n\t\tconst box = this._calcBox3(object);\r\n\t\tobject.userData.box3 = box;\r\n\t\tif (position) {\r\n\t\t\tawait obj.setPosition(position, box.y);\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tasync get(id: number) {\r\n\t\tif (await this.coreWrapper.isExist(id)) {\r\n\t\t\treturn new ObjectAPI(id);\r\n\t\t}\r\n\t}\r\n\r\n\tasync updateObject(id: number, object: Object3D): Promise<RequestResult> {\r\n\t\tthis._calcBox3(object);\r\n\t\treturn {\r\n\t\t\tobjectId: id,\r\n\t\t\tresult: await this.coreWrapper.update(id, object.toJSON()),\r\n\t\t};\r\n\t}\r\n}\r\n","import { CesiumWGS84, Utils } from '..';\r\nimport { SingletonWorkerFactory } from '../core/worker-factory';\r\n\r\nexport class ObjectAPI {\r\n\treadonly id: number;\r\n\tprivate readonly _coreThread =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tconstructor(id: number) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tgetUserData(key: string) {\r\n\t\treturn this._coreThread.getUserDataAt(this.id, key);\r\n\t}\r\n\r\n\tsetUserData(key: string, value: any) {\r\n\t\treturn this._coreThread.setUserDataAt(this.id, key, value);\r\n\t}\r\n\r\n\thide(): Promise<boolean> {\r\n\t\treturn this._coreThread.hide(this.id);\r\n\t}\r\n\r\n\tshow(): Promise<boolean> {\r\n\t\treturn this._coreThread.show(this.id);\r\n\t}\r\n\r\n\tsetPosition(position: CesiumWGS84, height: number = 0): Promise<boolean> {\r\n\t\theight += Utils.randomOffset();\r\n\t\tconst threeWGS84 = Utils.CesiumWGS84ToThreeWGS84(position);\r\n\t\treturn this._coreThread.updatePosition(this.id, {\r\n\t\t\tmatrix: Utils.localWGS84ToMattrix4(threeWGS84, height),\r\n\t\t\tposition: threeWGS84,\r\n\t\t});\r\n\t}\r\n\r\n\tasync getPosition(): Promise<CesiumWGS84> {\r\n\t\tconst position = await this._coreThread.getWGS84(this.id);\r\n\t\treturn Utils.ThreeWGS84ToCesiumWGS84(position!);\r\n\t}\r\n\r\n\tdispose(): Promise<boolean> {\r\n\t\treturn this._coreThread.delete(this.id);\r\n\t}\r\n\r\n\tisDisposed(): Promise<boolean> {\r\n\t\treturn this._coreThread.isExist(this.id);\r\n\t}\r\n}\r\n","import * as Cesium from 'cesium';\r\nimport { Utils } from '..';\r\nimport { SingletonWorkerFactory } from '../core/worker-factory';\r\n\r\nexport class ObjectUtil {\r\n\tprivate readonly coreWrapper =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tconstructor(private readonly viewer: Cesium.Viewer) {}\r\n\r\n\tasync flyTo(id: number) {\r\n\t\tlet position = await this.coreWrapper.getWGS84(id);\r\n\t\tif (position) {\r\n\t\t\tposition = Utils.ThreeWGS84ToCesiumWGS84(position);\r\n\t\t\tconst wgs84Position = Cesium.Cartesian3.fromDegrees(\r\n\t\t\t\tposition.latitude,\r\n\t\t\t\tposition.longitude,\r\n\t\t\t\t0\r\n\t\t\t);\r\n\t\t\tconst result = await this.coreWrapper.getBox3(id);\r\n\t\t\tlet radius = result ? result.z * 2 : undefined;\r\n\t\t\tthis.viewer.camera.flyToBoundingSphere(\r\n\t\t\t\tnew Cesium.BoundingSphere(wgs84Position, radius)\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n","export * from './EarthGeometry';\r\n","import { SphereGeometry } from 'three';\r\nimport { EARTH_RADIUS } from '../../constants';\r\n\r\nclass EarthGeometry extends SphereGeometry {\r\n\tconstructor(segments: number = 32) {\r\n\t\tsuper(EARTH_RADIUS, segments, segments);\r\n\t}\r\n}\r\n\r\nexport { EarthGeometry };\r\n","import * as Cesium from 'cesium';\r\nimport * as THREE from 'three';\r\nimport { Transforms } from '.';\r\nimport { Cartesian3 } from './core/math/cartesian3';\r\nimport { MathUtils } from './core/math/math.utils';\r\nimport { CesiumWGS84, ThreeWGS84 } from './interface';\r\n\r\nexport class Utils {\r\n\tstatic randomOffset() {\r\n\t\treturn Math.floor(Math.random() * 10000) * 0.000001;\r\n\t}\r\n\tstatic CesiumWGS84ToThreeWGS84(cesiumWGS84: CesiumWGS84): ThreeWGS84 {\r\n\t\treturn {\r\n\t\t\tlatitude: cesiumWGS84.longitude,\r\n\t\t\tlongitude: cesiumWGS84.latitude,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic ThreeWGS84ToCesiumWGS84(ThreeWGS84: ThreeWGS84): CesiumWGS84 {\r\n\t\treturn {\r\n\t\t\tlatitude: ThreeWGS84.longitude,\r\n\t\t\tlongitude: ThreeWGS84.latitude,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getWindowPosition(viewer: Cesium.Viewer) {\r\n\t\treturn new Cesium.Cartesian2(\r\n\t\t\tviewer.canvas.clientWidth / 2.0,\r\n\t\t\tviewer.canvas.clientHeight / 2.0\r\n\t\t);\r\n\t}\r\n\r\n\tstatic getPosition(\r\n\t\tviewer: Cesium.Viewer,\r\n\t\twindowPosition: Cesium.Cartesian2\r\n\t) {\r\n\t\tconst result = viewer.camera.pickEllipsoid(windowPosition);\r\n\t\tif (result) {\r\n\t\t\treturn viewer.scene.globe.ellipsoid.cartesianToCartographic(result);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getWGS84FromCartographic(cartographic: Cesium.Cartographic) {\r\n\t\treturn {\r\n\t\t\tlat: (cartographic.latitude * 180) / Math.PI,\r\n\t\t\tlon: (cartographic.longitude * 180) / Math.PI,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getCurrentCenterPosition(viewer: Cesium.Viewer) {\r\n\t\treturn this.getPosition(viewer, this.getWindowPosition(viewer));\r\n\t}\r\n\r\n\tstatic getCurrentCenterHeight(viewer: Cesium.Viewer) {\r\n\t\treturn this.getCurrentCenterPosition(viewer)?.height;\r\n\t}\r\n\r\n\tstatic rotationX(degrees: number) {\r\n\t\treturn new THREE.Matrix4().makeRotationX(\r\n\t\t\tCesium.Math.toRadians(degrees)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic applayRotation(object: THREE.BufferGeometry, degrees: number) {\r\n\t\tobject.applyMatrix4(this.rotationX(degrees));\r\n\t}\r\n\r\n\tstatic localWGS84ToMattrix4(\r\n\t\tposition: ThreeWGS84,\r\n\t\theight: number = 0\r\n\t): THREE.Matrix4 {\r\n\t\tconst matrix = Transforms.headingPitchRollToFixedFrame(\r\n\t\t\tCartesian3.fromDegree(position.longitude, position.latitude, height)\r\n\t\t);\r\n\r\n\t\tconst localToWgs84Mattrix = new THREE.Matrix4();\r\n\t\t// prettier-ignore\r\n\t\tlocalToWgs84Mattrix.set(\r\n\t\t\tmatrix.elements[0], matrix.elements[4], matrix.elements[8], matrix.elements[12],\r\n\t\t\tmatrix.elements[1], matrix.elements[5], matrix.elements[9], matrix.elements[13],\r\n\t\t\tmatrix.elements[2], matrix.elements[6], matrix.elements[10], matrix.elements[14],\r\n\t\t\tmatrix.elements[3], matrix.elements[7], matrix.elements[11], matrix.elements[15]\r\n\t\t);\r\n\r\n\t\treturn localToWgs84Mattrix;\r\n\t}\r\n\r\n\tstatic applyObjectWGS84Postion(\r\n\t\tgeometry: THREE.BufferGeometry,\r\n\t\tposition: CesiumWGS84 | ThreeWGS84\r\n\t) {\r\n\t\tlet pos: ThreeWGS84;\r\n\t\tif (position instanceof CesiumWGS84) {\r\n\t\t\tpos = this.CesiumWGS84ToThreeWGS84(position);\r\n\t\t} else {\r\n\t\t\tpos = position;\r\n\t\t}\r\n\t\tconst matrix = this.localWGS84ToMattrix4(pos);\r\n\t\tgeometry.applyMatrix4(matrix);\r\n\t\tgeometry.userData.wgs84 = pos;\r\n\t}\r\n}\r\n","import { Vector3 } from 'three';\r\nimport { MathUtils } from './math.utils';\r\n\r\nexport class Cartesian3 extends Vector3 {\r\n\tstatic get WGS84_RADII_SQUARED() {\r\n\t\treturn new Cartesian3(\r\n\t\t\t6378137.0 * 6378137.0,\r\n\t\t\t6378137.0 * 6378137.0,\r\n\t\t\t6356752.3142451793 * 6356752.3142451793\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get UINT_X() {\r\n\t\treturn new Cartesian3(1.0, 0.0, 0.0);\r\n\t}\r\n\r\n\tstatic get UINT_Y() {\r\n\t\treturn new Cartesian3(0.0, 1.0, 0.0);\r\n\t}\r\n\r\n\tstatic get UINT_Z() {\r\n\t\treturn new Cartesian3(0.0, 0.0, 1.0);\r\n\t}\r\n\r\n\tstatic get ZERO() {\r\n\t\treturn new Cartesian3(0, 0, 0);\r\n\t}\r\n\r\n\tnormalizeByMagnitude() {\r\n\t\treturn this.divideScalar(MathUtils.magnitude(this));\r\n\t}\r\n\r\n\tstatic fromDegree(longitude: number, latitude: number, height: number) {\r\n\t\treturn this.fromRadians(\r\n\t\t\tMathUtils.toRadians(longitude),\r\n\t\t\tMathUtils.toRadians(latitude),\r\n\t\t\theight\r\n\t\t);\r\n\t}\r\n\r\n\tstatic fromRadians(longitude: number, latitude: number, height: number) {\r\n\t\tconst cosLatitude = Math.cos(latitude);\r\n\r\n\t\tconst cartesian = new Cartesian3(\r\n\t\t\tcosLatitude * Math.cos(longitude),\r\n\t\t\tcosLatitude * Math.sin(longitude),\r\n\t\t\tMath.sin(latitude)\r\n\t\t).normalizeByMagnitude();\r\n\r\n\t\tconst WGS84_RADII_SQUARED =\r\n\t\t\tCartesian3.WGS84_RADII_SQUARED.multiply(cartesian);\r\n\r\n\t\tconst gamma = Math.sqrt(WGS84_RADII_SQUARED.dot(cartesian));\r\n\r\n\t\tWGS84_RADII_SQUARED.divideScalar(gamma);\r\n\t\tcartesian.multiplyScalar(height);\r\n\r\n\t\treturn cartesian.add(WGS84_RADII_SQUARED);\r\n\t}\r\n\r\n\tisZero() {\r\n\t\treturn Cartesian3.equalsEpsilon(this, Cartesian3.ZERO);\r\n\t}\r\n\r\n\tstatic unpack(\r\n\t\tarray: Array<number>,\r\n\t\tstartIndex: number = 0,\r\n\t\tresult: Cartesian3 = new Cartesian3()\r\n\t) {\r\n\t\tresult.x = array[startIndex++];\r\n\t\tresult.y = array[startIndex++];\r\n\t\tresult.z = array[startIndex];\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic equalsEpsilon(\r\n\t\tleft: Cartesian3,\r\n\t\tright: Cartesian3,\r\n\t\trelativeEpsilon: number = MathUtils.EPSILON_14,\r\n\t\tabsoluteEpsilon: number = MathUtils.EPSILON_14\r\n\t) {\r\n\t\treturn (\r\n\t\t\tMathUtils.equalsEpsilon(\r\n\t\t\t\tleft.x,\r\n\t\t\t\tright.x,\r\n\t\t\t\trelativeEpsilon,\r\n\t\t\t\tabsoluteEpsilon\r\n\t\t\t) &&\r\n\t\t\tMathUtils.equalsEpsilon(\r\n\t\t\t\tleft.y,\r\n\t\t\t\tright.y,\r\n\t\t\t\trelativeEpsilon,\r\n\t\t\t\tabsoluteEpsilon\r\n\t\t\t) &&\r\n\t\t\tMathUtils.equalsEpsilon(\r\n\t\t\t\tleft.z,\r\n\t\t\t\tright.z,\r\n\t\t\t\trelativeEpsilon,\r\n\t\t\t\tabsoluteEpsilon\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n}\r\n","import { Matrix4, Vector3 } from 'three';\r\nimport { Quaternion } from '../quration';\r\nimport { Cartesian3 } from './cartesian3';\r\n\r\nexport class MathUtils {\r\n\tstatic readonly RADIANS_PER_DEGREE = Math.PI / 180.0;\r\n\tstatic readonly EPSILON_01: number = 0.1;\r\n\tstatic readonly EPSILON_02: number = 0.01;\r\n\tstatic readonly EPSILON_03: number = 0.001;\r\n\tstatic readonly EPSILON_04: number = 0.0001;\r\n\tstatic readonly EPSILON_05: number = 0.00001;\r\n\tstatic readonly EPSILON_06: number = 0.000001;\r\n\tstatic readonly EPSILON_07: number = 0.0000001;\r\n\tstatic readonly EPSILON_08: number = 0.00000001;\r\n\tstatic readonly EPSILON_09: number = 0.000000001;\r\n\tstatic readonly EPSILON_10: number = 0.0000000001;\r\n\tstatic readonly EPSILON_11: number = 0.00000000001;\r\n\tstatic readonly EPSILON_12: number = 0.000000000001;\r\n\tstatic readonly EPSILON_13: number = 0.0000000000001;\r\n\tstatic readonly EPSILON_14: number = 0.00000000000001;\r\n\tstatic readonly EPSILON_15: number = 0.000000000000001;\r\n\tstatic readonly EPSILON_16: number = 0.0000000000000001;\r\n\tstatic readonly EPSILON_17: number = 0.00000000000000001;\r\n\tstatic readonly EPSILON_18: number = 0.000000000000000001;\r\n\tstatic readonly EPSILON_19: number = 0.0000000000000000001;\r\n\tstatic readonly EPSILON_20: number = 0.00000000000000000001;\r\n\tstatic readonly EPSILON_21: number = 0.000000000000000000001;\r\n\r\n\tstatic toRadians(degrees: number) {\r\n\t\treturn degrees * this.RADIANS_PER_DEGREE;\r\n\t}\r\n\r\n\tstatic magnitudeSquared(vec: Vector3) {\r\n\t\treturn vec.x * vec.x + vec.y * vec.y + vec.z * vec.z;\r\n\t}\r\n\r\n\tstatic magnitude(vec: Vector3) {\r\n\t\treturn Math.sqrt(this.magnitudeSquared(vec));\r\n\t}\r\n\r\n\t/**\r\n\t * 절대 공차 검정 또는 상대 공차 검정을 사용하여 두 값이 같은지 여부를 확인합니다.\r\n\t *\r\n\t * @example\r\n\t * MathUtils.equalsEpsilon(0.1, 0.01, MathUtils.EPSILON_01) // true\r\n\t * MathUtils.equalsEpsilon(0.1, 0.01, MathUtils.EPSILON_02) // false\r\n\t *\r\n\t * @param left - The first value to compare.\r\n\t * @param right - The other value to compare.\r\n\t * @param relativeEpsilon\r\n\t * @param absoluteEpsilon\r\n\t * @returns\r\n\t */\r\n\tstatic equalsEpsilon(\r\n\t\tleft: number,\r\n\t\tright: number,\r\n\t\trelativeEpsilon: number = MathUtils.EPSILON_14,\r\n\t\tabsoluteEpsilon: number = MathUtils.EPSILON_14\r\n\t) {\r\n\t\tconst absDiff = Math.abs(left - right);\r\n\r\n\t\treturn (\r\n\t\t\tabsDiff <= absoluteEpsilon ||\r\n\t\t\tabsDiff <=\r\n\t\t\t\trelativeEpsilon * Math.max(Math.abs(left), Math.abs(right))\r\n\t\t);\r\n\t}\r\n\r\n\tstatic Matrix4 = class {\r\n\t\tstatic fromTranslationQuaternionRotationScale(\r\n\t\t\ttranslation: Cartesian3,\r\n\t\t\trotation: Quaternion,\r\n\t\t\tscale: Cartesian3,\r\n\t\t\tresult: Matrix4 = new Matrix4()\r\n\t\t) {\r\n\t\t\tconst scaleX = scale.x;\r\n\t\t\tconst scaleY = scale.y;\r\n\t\t\tconst scaleZ = scale.z;\r\n\r\n\t\t\tconst x2 = rotation.x * rotation.x;\r\n\t\t\tconst xy = rotation.x * rotation.y;\r\n\t\t\tconst xz = rotation.x * rotation.z;\r\n\t\t\tconst xw = rotation.x * rotation.w;\r\n\t\t\tconst y2 = rotation.y * rotation.y;\r\n\t\t\tconst yz = rotation.y * rotation.z;\r\n\t\t\tconst yw = rotation.y * rotation.w;\r\n\t\t\tconst z2 = rotation.z * rotation.z;\r\n\t\t\tconst zw = rotation.z * rotation.w;\r\n\t\t\tconst w2 = rotation.w * rotation.w;\r\n\r\n\t\t\tconst m00 = x2 - y2 - z2 + w2;\r\n\t\t\tconst m01 = 2.0 * (xy - zw);\r\n\t\t\tconst m02 = 2.0 * (xz + yw);\r\n\r\n\t\t\tconst m10 = 2.0 * (xy + zw);\r\n\t\t\tconst m11 = -x2 + y2 - z2 + w2;\r\n\t\t\tconst m12 = 2.0 * (yz - xw);\r\n\r\n\t\t\tconst m20 = 2.0 * (xz - yw);\r\n\t\t\tconst m21 = 2.0 * (yz + xw);\r\n\t\t\tconst m22 = -x2 - y2 + z2 + w2;\r\n\r\n\t\t\t// prettier-ignore\r\n\t\t\tresult.set(\r\n\t\t\t\tm00 * scaleX, \tm10 * scaleX, \tm20 * scaleX, \t0.0,\r\n\t\t\t\tm01 * scaleY, \tm11 * scaleY, \tm21 * scaleY, \t0.0,\r\n\t\t\t\tm02 * scaleZ, \tm12 * scaleZ, \tm22 * scaleZ, \t0.0,\r\n\t\t\t\ttranslation.x, \ttranslation.y, \ttranslation.z,\t1.0,\r\n\t\t\t)\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\t};\r\n}\r\n","export class CesiumWGS84 {\r\n\tconstructor(public longitude: number, public latitude: number) {}\r\n}\r\n\r\nexport class ThreeWGS84 {\r\n\tconstructor(public longitude: number, public latitude: number) {}\r\n}\r\n","import { PlaneGeometry, BoxGeometry } from 'three';\r\nimport { TeapotGeometry } from 'three/examples/jsm/geometries/TeapotGeometry';\r\nimport { Utils } from './utils';\r\n\r\nexport function makeTeapotGeometry(teapotSize: number = 10) {\r\n\tconst teapotGeometry = new TeapotGeometry(teapotSize);\r\n\tUtils.applayRotation(teapotGeometry, 90);\r\n\treturn teapotGeometry;\r\n}\r\n\r\nexport function makeBoxGeometry(boxSize = 1000) {\r\n\tconst geometry = new BoxGeometry(boxSize, boxSize, boxSize);\r\n\treturn geometry;\r\n}\r\n\r\nexport function makePlaneGeometry(w: number, h: number) {\r\n\tconst geometry = new PlaneGeometry(w, h);\r\n\t// Utils.applayRotation(geometry, 90);\r\n\treturn geometry;\r\n}\r\n","import { Matrix4 } from 'three';\r\nimport { Ellipsoid } from './ellipsoid';\r\nimport { HeadingPitchRoll } from './heading-pitch-roll';\r\nimport { Cartesian3 } from './math/cartesian3';\r\nimport { MathUtils } from './math/math.utils';\r\nimport { Quaternion } from './quration';\r\n\r\nconst vectorProductLocalFrame = {\r\n\tup: {\r\n\t\tsouth: 'east',\r\n\t\tnorth: 'west',\r\n\t\twest: 'south',\r\n\t\teast: 'north',\r\n\t},\r\n\tdown: {\r\n\t\tsouth: 'west',\r\n\t\tnorth: 'east',\r\n\t\twest: 'north',\r\n\t\teast: 'south',\r\n\t},\r\n\tsouth: {\r\n\t\tup: 'west',\r\n\t\tdown: 'east',\r\n\t\twest: 'down',\r\n\t\teast: 'up',\r\n\t},\r\n\tnorth: {\r\n\t\tup: 'east',\r\n\t\tdown: 'west',\r\n\t\twest: 'up',\r\n\t\teast: 'down',\r\n\t},\r\n\twest: {\r\n\t\tup: 'north',\r\n\t\tdown: 'south',\r\n\t\tnorth: 'down',\r\n\t\tsouth: 'up',\r\n\t},\r\n\teast: {\r\n\t\tup: 'south',\r\n\t\tdown: 'north',\r\n\t\tnorth: 'up',\r\n\t\tsouth: 'down',\r\n\t},\r\n} as const;\r\n\r\ntype AxisFirst = keyof typeof vectorProductLocalFrame;\r\ntype AxisSecond<K extends AxisFirst> = keyof typeof vectorProductLocalFrame[K];\r\n\r\ntype FixedFrameTransformFunction = {\r\n\t(origin: Cartesian3): Matrix4;\r\n};\r\n\r\nconst first: AxisFirst = 'down';\r\nconst second: AxisSecond<'down'> = 'east';\r\nconst third = vectorProductLocalFrame[first][second];\r\n\r\n// prettier-ignore\r\nconst degeneratePositionLocalFrame = {\r\n\tnorth: [-1,  0,  0],\r\n\teast:  [ 0,  1,  0],\r\n\tsouth: [ 1,  0,  0],\r\n\twest:  [ 0, -1,  0],\r\n\tup:    [ 0,  0,  1],\r\n\tdown:  [ 0,  0, -1],\r\n};\r\nconst scratchCalculateCartesian = {\r\n\teast: new Cartesian3(),\r\n\tnorth: new Cartesian3(),\r\n\tup: new Cartesian3(),\r\n\twest: new Cartesian3(),\r\n\tsouth: new Cartesian3(),\r\n\tdown: new Cartesian3(),\r\n};\r\n\r\ndegeneratePositionLocalFrame[first];\r\ndegeneratePositionLocalFrame[second];\r\ndegeneratePositionLocalFrame[third];\r\n\r\nexport class Transforms {\r\n\tstatic localFrameToFixedFrameCache = new Map<\r\n\t\tstring,\r\n\t\tFixedFrameTransformFunction\r\n\t>();\r\n\r\n\tstatic localFrameToFixedFrameGenerator<K extends AxisFirst>(\r\n\t\tfirstAixs: K,\r\n\t\tsecondAxis: AxisSecond<K>\r\n\t) {\r\n\t\tconst axisHash = firstAixs + secondAxis;\r\n\t\t// if (!this.localFrameToFixedFrameCache)\r\n\t\t// \tthis.localFrameToFixedFrameCache = new Map<\r\n\t\t// \t\tstring,\r\n\t\t// \t\tFixedFrameTransformFunction\r\n\t\t// \t>();\r\n\t\tlet f = Transforms.localFrameToFixedFrameCache.get(axisHash);\r\n\r\n\t\tif (f) return f;\r\n\r\n\t\tconst thirdAxis = vectorProductLocalFrame[firstAixs][secondAxis];\r\n\r\n\t\tf = (origin: Cartesian3, result: Matrix4 = new Matrix4()) => {\r\n\t\t\tlet scratchFirstCartesian: Cartesian3;\r\n\t\t\tlet scratchSecondCartesian: Cartesian3;\r\n\t\t\tlet scratchThirdCartesian: Cartesian3;\r\n\r\n\t\t\tif (origin.isZero()) {\r\n\t\t\t\tscratchFirstCartesian = Cartesian3.unpack(\r\n\t\t\t\t\tdegeneratePositionLocalFrame[firstAixs]\r\n\t\t\t\t);\r\n\t\t\t\tscratchSecondCartesian = Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[secondAxis]\r\n\t\t\t\t);\r\n\t\t\t\tscratchThirdCartesian = Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[thirdAxis]\r\n\t\t\t\t);\r\n\t\t\t} else if (\r\n\t\t\t\tMathUtils.equalsEpsilon(origin.x, 0.0) &&\r\n\t\t\t\tMathUtils.equalsEpsilon(origin.y, 0.0)\r\n\t\t\t) {\r\n\t\t\t\tconst sign = Math.sign(origin.z);\r\n\t\t\t\tscratchFirstCartesian = Cartesian3.unpack(\r\n\t\t\t\t\tdegeneratePositionLocalFrame[firstAixs]\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (firstAixs !== 'east' && firstAixs !== 'west') {\r\n\t\t\t\t\tscratchFirstCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscratchSecondCartesian = Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[secondAxis]\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (secondAxis !== 'east' && secondAxis !== 'west') {\r\n\t\t\t\t\tscratchSecondCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\t\t\t\tscratchThirdCartesian = Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[thirdAxis]\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (thirdAxis !== 'east' && thirdAxis !== 'west') {\r\n\t\t\t\t\tscratchThirdCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tEllipsoid.WGS84.geodeticSurfaceNormal(\r\n\t\t\t\t\torigin,\r\n\t\t\t\t\tscratchCalculateCartesian.up\r\n\t\t\t\t);\r\n\r\n\t\t\t\tscratchCalculateCartesian.east.set(-origin.y, origin.x, 0.0);\r\n\t\t\t\tscratchCalculateCartesian.east.normalizeByMagnitude();\r\n\r\n\t\t\t\tscratchCalculateCartesian.north\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.up)\r\n\t\t\t\t\t.cross(scratchCalculateCartesian.east);\r\n\r\n\t\t\t\tscratchCalculateCartesian.down\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.up)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchCalculateCartesian.west\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.east)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchCalculateCartesian.south\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.north)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchFirstCartesian = scratchCalculateCartesian[firstAixs];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tscratchSecondCartesian = scratchCalculateCartesian[secondAxis];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tscratchThirdCartesian = scratchCalculateCartesian[thirdAxis];\r\n\t\t\t}\r\n\t\t\t// prettier-ignore\r\n\t\t\t// result.set(\r\n\t\t\t// \tscratchFirstCartesian.x,    scratchFirstCartesian.y,    scratchFirstCartesian.z,    0.0,\r\n\t\t\t// \tscratchSecondCartesian.x,   scratchSecondCartesian.y,   scratchSecondCartesian.z,   0.0,\r\n\t\t\t//     scratchThirdCartesian.x,    scratchThirdCartesian.y,    scratchThirdCartesian.z,    0.0,\r\n\t\t\t//     origin.x,                   origin.y,                   origin.z,                   0.0,\r\n\t\t\t// );\r\n\t\t\t// prettier-ignore\r\n\t\t\tresult.set(\r\n\t\t\t\tscratchFirstCartesian.x,    scratchSecondCartesian.x,   scratchThirdCartesian.x,    origin.x,\r\n\t\t\t\tscratchFirstCartesian.y,    scratchSecondCartesian.y,   scratchThirdCartesian.y,    origin.y,\r\n\t\t\t\tscratchFirstCartesian.z,    scratchSecondCartesian.z,   scratchThirdCartesian.z,    origin.z,\r\n\t\t\t\t0.0,                        0.0,                        0.0,                        0.0\r\n\t\t\t);\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tthis.localFrameToFixedFrameCache.set(axisHash, f);\r\n\r\n\t\treturn f;\r\n\t}\r\n\r\n\tstatic headingPitchRollToFixedFrame(\r\n\t\torigin: Cartesian3,\r\n\t\tresult: Matrix4 = new Matrix4()\r\n\t) {\r\n\t\tconst eastNorthUpToFixedFrame =\r\n\t\t\tTransforms.localFrameToFixedFrameGenerator('east', 'north');\r\n\r\n\t\tconst hprQuration = Quaternion.fromHeadingPitchRoll(\r\n\t\t\tnew HeadingPitchRoll(0, 0, 0)\r\n\t\t);\r\n\r\n\t\tconst hprMatrix =\r\n\t\t\tMathUtils.Matrix4.fromTranslationQuaternionRotationScale(\r\n\t\t\t\tCartesian3.ZERO,\r\n\t\t\t\thprQuration,\r\n\t\t\t\tnew Cartesian3(1.0, 1.0, 1.0)\r\n\t\t\t);\r\n\r\n\t\treturn result.copy(eastNorthUpToFixedFrame(origin)).multiply(hprMatrix);\r\n\t}\r\n}\r\n","import { Vector3 } from 'three';\r\nimport { Cartesian3 } from './math/cartesian3';\r\n\r\nexport class Ellipsoid extends Vector3 {\r\n\tprivate _oneOverRadiiSquared: Cartesian3;\r\n\r\n\tconstructor(x: number, y: number, z: number) {\r\n\t\tsuper(x, y, z);\r\n\t\tthis._oneOverRadiiSquared = new Cartesian3(\r\n\t\t\tthis.x == 0.0 ? 0.0 : 1.0 / (this.x * this.x),\r\n\t\t\tthis.y == 0.0 ? 0.0 : 1.0 / (this.y * this.y),\r\n\t\t\tthis.z == 0.0 ? 0.0 : 1.0 / (this.z * this.z)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get WGS84() {\r\n\t\treturn new Ellipsoid(6378137.0, 6378137.0, 6356752.3142451793);\r\n\t}\r\n\r\n\tgeodeticSurfaceNormal(\r\n\t\tcartesian: Cartesian3,\r\n\t\tresult: Cartesian3 = new Cartesian3()\r\n\t) {\r\n\t\tif (cartesian.isZero()) return;\r\n\t\tresult.copy(cartesian);\r\n\t\tresult.multiply(this._oneOverRadiiSquared);\r\n\t\treturn result.normalizeByMagnitude();\r\n\t}\r\n}\r\n","import { Vector3 } from 'three';\r\n\r\nexport class HeadingPitchRoll extends Vector3 {\r\n\tconstructor(\r\n\t\theading: number = 0.0,\r\n\t\tpitch: number = 0.0,\r\n\t\troll: number = 0.0\r\n\t) {\r\n\t\tsuper(heading, pitch, roll);\r\n\t}\r\n\r\n\tget heading() {\r\n\t\treturn this.x;\r\n\t}\r\n\r\n\tget pitch() {\r\n\t\treturn this.y;\r\n\t}\r\n\r\n\tget roll() {\r\n\t\treturn this.z;\r\n\t}\r\n}\r\n","import { Vector4 } from 'three';\r\nimport { HeadingPitchRoll } from './heading-pitch-roll';\r\nimport { Cartesian3 } from './math/cartesian3';\r\n\r\nexport class Quaternion extends Vector4 {\r\n\tprivate static _fromAxisAngleScratch = new Cartesian3();\r\n\r\n\tstatic fromAxisAngle(aixs: Cartesian3, angle: number, result?: Quaternion) {\r\n\t\tconst halfAngle = angle / 2.0;\r\n\r\n\t\tconst s = Math.sin(halfAngle);\r\n\r\n\t\tthis._fromAxisAngleScratch.copy(aixs).normalizeByMagnitude();\r\n\r\n\t\tconst x = this._fromAxisAngleScratch.x * s;\r\n\t\tconst y = this._fromAxisAngleScratch.y * s;\r\n\t\tconst z = this._fromAxisAngleScratch.z * s;\r\n\t\tconst w = Math.cos(halfAngle);\r\n\r\n\t\tif (!result) {\r\n\t\t\treturn new Quaternion(x, y, z, w);\r\n\t\t}\r\n\r\n\t\treturn result.set(x, y, z, w);\r\n\t}\r\n\r\n\tprivate static _scratchHPRQuaternion = new Quaternion();\r\n\tprivate static _scratchHeadingQuaternion = new Quaternion();\r\n\tprivate static _scratchPitchQuaternion = new Quaternion();\r\n\tprivate static _scratchRollQuaternion = new Quaternion();\r\n\tstatic fromHeadingPitchRoll(\r\n\t\theadingPitchRoll: HeadingPitchRoll,\r\n\t\tresult: Quaternion = new Quaternion()\r\n\t) {\r\n\t\tthis._scratchRollQuaternion = Quaternion.fromAxisAngle(\r\n\t\t\tCartesian3.UINT_X,\r\n\t\t\theadingPitchRoll.roll,\r\n\t\t\tthis._scratchHPRQuaternion\r\n\t\t);\r\n\t\tresult = Quaternion.fromAxisAngle(\r\n\t\t\tCartesian3.UINT_Y,\r\n\t\t\theadingPitchRoll.pitch,\r\n\t\t\tthis._scratchPitchQuaternion\r\n\t\t);\r\n\t\tthis._scratchPitchQuaternion.multiply(this._scratchRollQuaternion);\r\n\t\tthis._scratchHeadingQuaternion = Quaternion.fromAxisAngle(\r\n\t\t\tCartesian3.UINT_Z,\r\n\t\t\t-headingPitchRoll.heading,\r\n\t\t\tthis._scratchHPRQuaternion\r\n\t\t);\r\n\r\n\t\treturn result.copy(\r\n\t\t\tnew Quaternion()\r\n\t\t\t\t.copy(this._scratchHeadingQuaternion)\r\n\t\t\t\t.multiply(result)\r\n\t\t);\r\n\t}\r\n}\r\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../"}