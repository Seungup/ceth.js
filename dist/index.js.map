{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;ACAO,KAAK,CAAC,yCAAQ,GAAG,CAAM;AACvB,KAAK,CAAC,wCAAY,GAAG,OAAO;;;;;;;MKEd,wCAAe;iBAGb,CAAC;QACtB,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,wBAAiB;IAC/C,CAAC;IAED,SAAS,GAAsB,CAAC;QAC/B,MAAM,CAAC,IAAI,CAAC,iBAAiB;IAC9B,CAAC;WAEM,WAAW,GAAG,CAAC;QACrB,MAAM,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI;IAClD,CAAC;;;;MDKW,yCAAgB;gBAIlB,KAAK,GAAG,GAAG,CAAC,YAAW,IACf,eAAe,GAAG,wCAAe,CAAC,WAAW,GAC7D,CAAC;aAFO,KAAK,GAAL,KAAK;aACG,eAAe,GAAf,eAAe;QAEhC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS;IAC7C,CAAC;WAEM,WAAW,GAAG,CAAC;QACrB,MAAM,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI;IAClD,CAAC;IAED,aAAa,CAAC,KAAa,EAAW,CAAC;QACtC,GAAG,CAAC,OAAO,GAAG,KAAK;QACnB,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK;YACjC,OAAO,GAAG,IAAI;QACf,CAAC;QACD,MAAM,CAAC,OAAO;IACf,CAAC;IAGD,IAAI,CAAC,MAAyB,EAAE,CAAC;QAChC,KAAK,CAAC,MAAM,GAA4B,CAAC;YACxC,MAAM,EAAE,MAAM;YACd,eAAe,EAAE,CAAkB;YACnC,KAAK,EAAE,IAAI;YACX,SAAS,EAAE,IAAI;YACf,sBAAsB,EAAE,IAAI;YAC5B,KAAK,EAAE,KAAK;QACb,CAAC;QAED,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,CAAQ;QAC1C,EAAE,EAAE,OAAO,EACV,MAAM,CAAC,OAAO,GAAG,OAAO;QAGzB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,oBAAmB,CAAC,MAAM;QAC9C,OAAO,CAAC,GAAG,EACT,4BAA4B,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ;IAEpE,CAAC;IAED,OAAO,CAAC,KAAa,EAAE,MAAc,EAAE,CAAC;QACvC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS;QAC7C,MAAM,CAAC,MAAM,GAAG,KAAK,GAAG,MAAM;QAC9B,MAAM,CAAC,sBAAsB;QAC7B,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK;IAC5C,CAAC;IAED,EAGG,AAHH,0DAGG,AAHH,EAGG,CACH,MAAM,CAAC,KAAkB,EAAE,CAAC;QAC3B,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;YAEnB,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,KAAK;YAEpC,EAAkB,AAAlB,gBAAkB;YAClB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,CAC1B,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAC7D,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAC7D,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAC7D,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YAE9D,EAAkB,AAAlB,gBAAkB;YAClB,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,GAAG,CACjC,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GACzD,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GACzD,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GACzD,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE;YAG1D,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,MAAM;YAC/C,IAAI,CAAC,MAAM,CAAC,sBAAsB;YAElC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,KAAK;YACtD,IAAI,CAAC,QAAQ,CAAC,KAAK;YACnB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM;QAC7C,CAAC;IACF,CAAC;;;;;;;;;;;MElGW,yCAAW;IAUvB,EAEG,AAFH,yCAEG,AAFH,EAEG,CACK,yBAAyB,GAAG,CAAC;QACpC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG;QAC5B,EAAE,EAAE,IAAI,CAAC,KAAK,EACb,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK;QAE/B,IAAI,CAAC,OAAO,GAAG,qBAAqB,CACnC,IAAI,CAAC,6BAA6B;QAEnC,IAAI,CAAC,cAAc,CAAC,IAAI;IACzB,CAAC;IAED,EAGG,AAHH,qFAGG,AAHH,EAGG,CACH,wBAAwB,CAAC,KAAkB,EAAE,CAAC;QAC7C,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,EACrB,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK;aAEtB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK;QAGvB,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,yBAAyB;IAClD,CAAC;;QApCK,IAqCN,CApCiB,MAAM,GAAkB,CAAC,CAAC;QADrC,IAqCN,CAnCiB,OAAO,GAAG,0DAAgB,CAAC,WAAW;QAFjD,IAqCN,CAhCiB,6BAA6B,GAC7C,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI;QANnC,IAqCN,CA9BiB,cAAc,GAAG,GAAG,CAAC,0DAAO;QAPvC,IAqCN,CA7BS,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI;;;;;;;;;;;;;;;;;;MIXxC,yCAAU,SAAS,cAAO;eAC1B,mBAAmB,GAAG,CAAC;QAChC,MAAM,CAAC,GAAG,CAAC,yCAAU,CACnB,cAAgB,EAChB,cAAgB,EAChB,kBAAkB,AAAC,CAAuB,AAAvB,EAAuB,AAAvB,qBAAuB;;IAE9C,CAAC;eAEU,MAAM,GAAG,CAAC;QACnB,MAAM,CAAC,GAAG,CAAC,yCAAU,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG;IACrC,CAAC;eAEU,MAAM,GAAG,CAAC;QACnB,MAAM,CAAC,GAAG,CAAC,yCAAU,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG;IACrC,CAAC;eAEU,MAAM,GAAG,CAAC;QACnB,MAAM,CAAC,GAAG,CAAC,yCAAU,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG;IACrC,CAAC;eAEU,IAAI,GAAG,CAAC;QACjB,MAAM,CAAC,GAAG,CAAC,yCAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAC/B,CAAC;IAED,oBAAoB,GAAG,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,yCAAS,CAAC,SAAS,CAAC,IAAI;IACnD,CAAC;WAEM,UAAU,CAAC,SAAiB,EAAE,QAAgB,EAAE,MAAc,EAAE,CAAC;QACtE,MAAM,CAAC,IAAI,CAAC,WAAW,CACrB,yCAAS,CAAC,SAAS,CAAC,SAAS,GAC7B,yCAAS,CAAC,SAAS,CAAC,QAAQ,GAC5B,MAAM;IAEV,CAAC;WAEM,WAAW,CAAC,SAAiB,EAAE,QAAgB,EAAE,MAAc,EAAE,CAAC;QACvE,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ;QAErC,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC,yCAAU,CAC9B,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAChC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAChC,IAAI,CAAC,GAAG,CAAC,QAAQ,GACjB,oBAAoB;QAEtB,KAAK,CAAC,mBAAmB,GACvB,yCAAU,CAAC,mBAAmB,CAAC,QAAQ,CAAC,SAAS;QAEnD,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,SAAS;QAEzD,mBAAmB,CAAC,YAAY,CAAC,KAAK;QAEtC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,CAAC,mBAAmB;IACjE,CAAC;IAED,MAAM,GAAG,CAAC;QACR,MAAM,CAAC,yCAAU,CAAC,aAAa,CAAC,IAAI,EAAE,yCAAU,CAAC,IAAI;IACvD,CAAC;WAEM,MAAM,CACX,KAAoB,EACpB,UAAkB,GAAG,CAAC,EACtB,MAAkB,GAAG,GAAG,CAAC,yCAAU,IACnC,CAAC;QACD,MAAM,CAAC,MAAM,CAAC,GAAG,CACf,KAAK,CAAC,UAAU,KAChB,KAAK,CAAC,UAAU,KAChB,KAAK,CAAC,UAAU;IAEpB,CAAC;WAEM,aAAa,CAClB,IAAgB,EAChB,KAAiB,EACjB,eAAuB,GAAG,yCAAS,CAAC,UAAU,EAC9C,eAAuB,GAAG,yCAAS,CAAC,UAAU,EAC9C,CAAC;QACD,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI;QACnC,MAAM,CACJ,yCAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,eAAe,EAAE,eAAe,KACzE,yCAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,eAAe,EAAE,eAAe,KACzE,yCAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,eAAe,EAAE,eAAe;IAE7E,CAAC;;;;MDpFU,yCAAS,SAAS,cAAO;gBAGxB,CAAS,EAAE,CAAS,EAAE,CAAS,CAAE,CAAC;QAC5C,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;QACb,IAAI,CAAC,oBAAoB,GAAG,GAAG,CAAC,yCAAU,CACxC,IAAI,CAAC,CAAC,IAAI,CAAG,GAAG,CAAG,GAAG,CAAG,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAC5C,IAAI,CAAC,CAAC,IAAI,CAAG,GAAG,CAAG,GAAG,CAAG,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAC5C,IAAI,CAAC,CAAC,IAAI,CAAG,GAAG,CAAG,GAAG,CAAG,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;IAEhD,CAAC;eAEU,KAAK,GAAG,CAAC;QAClB,MAAM,CAAC,GAAG,CAAC,yCAAS,CAAC,OAAS,EAAE,OAAS,EAAE,iBAAkB;IAC/D,CAAC;WAGM,+CAA+C,CACpD,SAAqB,EACrB,MAAkB,GAAG,GAAG,CAAC,yCAAU,IACnC,CAAC;QACD,EAAE,EAAE,SAAS,CAAC,MAAM,IAAI,MAAM;QAC9B,MAAM,CAAC,MAAM,CACd,IAAI,CAAC,SAAS,EACd,QAAQ,CAAC,IAAI,CAAC,2BAA2B,EACzC,oBAAoB;IACrB,CAAC;IAED,qBAAqB,CACnB,SAAqB,EACrB,MAAkB,GAAG,GAAG,CAAC,yCAAU,IACnC,CAAC;QACD,EAAE,EAAE,SAAS,CAAC,MAAM,IAAI,MAAM;QAC9B,MAAM,CAAC,MAAM,CACV,IAAI,CAAC,SAAS,EACd,QAAQ,CAAC,IAAI,CAAC,oBAAoB,EAClC,oBAAoB;IACzB,CAAC;;AArCU,yCAAS,CAgBJ,2BAA2B,GAAG,MAAM,CAAC,MAAM,CAhBhD,yCAAS,CAgBkD,KAAK,CAAC,oBAAoB;;;;MEjBrF,yCAAgB,SAAS,cAAO;gBAE3C,OAAe,GAAG,CAAG,EACrB,KAAa,GAAG,CAAG,EACnB,IAAY,GAAG,CAAG,CACjB,CAAC;QACF,KAAK,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI;IAC3B,CAAC;QAEG,OAAO,GAAG,CAAC;QACd,MAAM,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;QAEG,KAAK,GAAG,CAAC;QACZ,MAAM,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;QAEG,IAAI,GAAG,CAAC;QACX,MAAM,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;;;;;;;;MCjBW,yCAAU,SAAS,cAAO;WAG9B,aAAa,CAClB,IAAgB,EAChB,KAAa,EACb,MAAkB,GAAG,GAAG,CAAC,yCAAU,IACnC,CAAC;QACD,KAAK,CAAC,SAAS,GAAG,KAAK,GAAG,CAAG;QAE7B,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS;QAExC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,EAAE,oBAAoB;QAE1D,MAAM,CAAC,MAAM,CAAC,GAAG,CACf,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,aAAa,EAC5C,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,aAAa,EAC5C,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,aAAa,EAC5C,IAAI,CAAC,GAAG,CAAC,SAAS;IAEtB,CAAC;WAMM,oBAAoB,CACzB,gBAAkC,EAClC,MAAkB,GAAG,GAAG,CAAC,yCAAU,IACnC,CAAC;QACD,IAAI,CAAC,sBAAsB,GAAG,yCAAU,CAAC,aAAa,CACpD,yCAAU,CAAC,MAAM,EACjB,gBAAgB,CAAC,IAAI,EACrB,IAAI,CAAC,qBAAqB;QAG5B,MAAM,GAAG,yCAAU,CAAC,aAAa,CAC/B,yCAAU,CAAC,MAAM,EACjB,gBAAgB,CAAC,KAAK,EACtB,IAAI,CAAC,uBAAuB;QAG9B,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB;QAEjE,IAAI,CAAC,yBAAyB,GAAG,yCAAU,CAAC,aAAa,CACvD,yCAAU,CAAC,MAAM,GAChB,gBAAgB,CAAC,OAAO,EACzB,IAAI,CAAC,qBAAqB;QAG5B,MAAM,CAAC,MAAM,CAAC,IAAI,CAChB,GAAG,CAAC,yCAAU,GAAG,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE,QAAQ,CAAC,MAAM;IAEzE,CAAC;;AArDU,yCAAU,CACN,qBAAqB,GAAG,GAAG,CAAC,yCAAU;AAD1C,yCAAU,CAsBN,qBAAqB,GAAG,GAAG,CAtB/B,yCAAU;AAAV,yCAAU,CAuBN,yBAAyB,GAAG,GAAG,CAvBnC,yCAAU;AAAV,yCAAU,CAwBN,uBAAuB,GAAG,GAAG,CAxBjC,yCAAU;AAAV,yCAAU,CAyBN,sBAAsB,GAAG,GAAG,CAzBhC,yCAAU;;;AJGvB,KAAK,CAAC,6CAAuB,GAAG,CAAC;IAChC,EAAE,EAAE,CAAC;QACJ,KAAK,EAAE,CAAM;QACb,KAAK,EAAE,CAAM;QACb,IAAI,EAAE,CAAO;QACb,IAAI,EAAE,CAAO;IACd,CAAC;IACD,IAAI,EAAE,CAAC;QACN,KAAK,EAAE,CAAM;QACb,KAAK,EAAE,CAAM;QACb,IAAI,EAAE,CAAO;QACb,IAAI,EAAE,CAAO;IACd,CAAC;IACD,KAAK,EAAE,CAAC;QACP,EAAE,EAAE,CAAM;QACV,IAAI,EAAE,CAAM;QACZ,IAAI,EAAE,CAAM;QACZ,IAAI,EAAE,CAAI;IACX,CAAC;IACD,KAAK,EAAE,CAAC;QACP,EAAE,EAAE,CAAM;QACV,IAAI,EAAE,CAAM;QACZ,IAAI,EAAE,CAAI;QACV,IAAI,EAAE,CAAM;IACb,CAAC;IACD,IAAI,EAAE,CAAC;QACN,EAAE,EAAE,CAAO;QACX,IAAI,EAAE,CAAO;QACb,KAAK,EAAE,CAAM;QACb,KAAK,EAAE,CAAI;IACZ,CAAC;IACD,IAAI,EAAE,CAAC;QACN,EAAE,EAAE,CAAO;QACX,IAAI,EAAE,CAAO;QACb,KAAK,EAAE,CAAI;QACX,KAAK,EAAE,CAAM;IACd,CAAC;AACF,CAAC;AASD,EAAkB,AAAlB,gBAAkB;AAClB,KAAK,CAAC,kDAA4B,GAAG,CAAC;IACrC,KAAK,EAAE,CAAC;AAAA,UAAE;AAAG,SAAC;AAAG,SAAC;IAAA,CAAC;IACnB,IAAI,EAAG,CAAC;AAAC,SAAC;AAAG,SAAC;AAAG,SAAC;IAAA,CAAC;IACnB,KAAK,EAAE,CAAC;AAAC,SAAC;AAAG,SAAC;AAAG,SAAC;IAAA,CAAC;IACnB,IAAI,EAAG,CAAC;AAAC,SAAC;AAAE,UAAE;AAAG,SAAC;IAAA,CAAC;IACnB,EAAE,EAAK,CAAC;AAAC,SAAC;AAAG,SAAC;AAAG,SAAC;IAAA,CAAC;IACnB,IAAI,EAAG,CAAC;AAAC,SAAC;AAAG,SAAC;AAAE,UAAE;IAAA,CAAC;AACpB,CAAC;AACD,KAAK,CAAC,+CAAyB,GAAG,CAAC;IAClC,IAAI,EAAE,GAAG,CAAC,yCAAU;IACpB,KAAK,EAAE,GAAG,CAAC,yCAAU;IACrB,EAAE,EAAE,GAAG,CAAC,yCAAU;IAClB,IAAI,EAAE,GAAG,CAAC,yCAAU;IACpB,KAAK,EAAE,GAAG,CAAC,yCAAU;IACrB,IAAI,EAAE,GAAG,CAAC,yCAAU;AACrB,CAAC;MAEY,yCAAU;WAMf,+BAA+B,CACrC,SAAY,EACZ,UAAyB,EACxB,CAAC;QACF,KAAK,CAAC,QAAQ,GAAG,SAAS,GAAG,UAAU;QAEvC,GAAG,CAAC,CAAC,GAAG,yCAAU,CAAC,2BAA2B,CAAC,GAAG,CAAC,QAAQ;QAE3D,EAAE,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;QAEf,KAAK,CAAC,SAAS,GAAG,6CAAuB,CAAC,SAAS,EAAE,UAAU;QAE/D,CAAC,IAAI,MAAkB,EAAE,MAAe,GAAG,GAAG,CAAC,cAAO,KAAO,CAAC;YAC7D,GAAG,CAAC,qBAAqB;YACzB,GAAG,CAAC,sBAAsB;YAC1B,GAAG,CAAC,qBAAqB;YAEzB,EAAE,EAAE,MAAM,CAAC,MAAM,IAAI,CAAC;gBACrB,qBAAqB,GAAG,yCAAU,CAAC,MAAM,CACxC,kDAA4B,CAAC,SAAS;gBAEvC,sBAAsB,GAAG,yCAAU,CAAC,MAAM,CACzC,EAAa,AAAb,WAAa;gBACb,kDAA4B,CAAC,UAAU;gBAExC,qBAAqB,GAAG,yCAAU,CAAC,MAAM,CACxC,EAAa,AAAb,WAAa;gBACb,kDAA4B,CAAC,SAAS;YAExC,CAAC,MAAM,EAAE,EACR,yCAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,EAAE,CAAG,KACrC,yCAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,EAAE,CAAG,GACpC,CAAC;gBACF,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC/B,qBAAqB,GAAG,yCAAU,CAAC,MAAM,CACxC,kDAA4B,CAAC,SAAS;gBAGvC,EAAE,EAAE,SAAS,KAAK,CAAM,SAAI,SAAS,KAAK,CAAM,OAC/C,qBAAqB,CAAC,cAAc,CAAC,IAAI;gBAG1C,sBAAsB,GAAG,yCAAU,CAAC,MAAM,CACzC,EAAa,AAAb,WAAa;gBACb,kDAA4B,CAAC,UAAU;gBAGxC,EAAE,EAAE,UAAU,KAAK,CAAM,SAAI,UAAU,KAAK,CAAM,OACjD,sBAAsB,CAAC,cAAc,CAAC,IAAI;gBAE3C,qBAAqB,GAAG,yCAAU,CAAC,MAAM,CACxC,EAAa,AAAb,WAAa;gBACb,kDAA4B,CAAC,SAAS;gBAGvC,EAAa,AAAb,WAAa;gBACb,EAAE,EAAE,SAAS,KAAK,CAAM,SAAI,SAAS,KAAK,CAAM,OAC/C,qBAAqB,CAAC,cAAc,CAAC,IAAI;YAE3C,CAAC,MAAM,CAAC;gBACP,yCAAS,CAAC,+CAA+C,CACxD,MAAM,EACN,+CAAyB,CAAC,EAAE;gBAG7B,+CAAyB,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,CAAG;gBAC3D,+CAAyB,CAAC,IAAI,CAAC,oBAAoB;gBAEnD,+CAAyB,CAAC,KAAK,CAC7B,IAAI,CAAC,+CAAyB,CAAC,EAAE,EACjC,KAAK,CAAC,+CAAyB,CAAC,IAAI;gBAEtC,+CAAyB,CAAC,IAAI,CAC5B,IAAI,CAAC,+CAAyB,CAAC,EAAE,EACjC,cAAc,CAAC,EAAE;gBAEnB,+CAAyB,CAAC,IAAI,CAC5B,IAAI,CAAC,+CAAyB,CAAC,IAAI,EACnC,cAAc,CAAC,EAAE;gBAEnB,+CAAyB,CAAC,KAAK,CAC7B,IAAI,CAAC,+CAAyB,CAAC,KAAK,EACpC,cAAc,CAAC,EAAE;gBAEnB,qBAAqB,GAAG,+CAAyB,CAAC,SAAS;gBAC3D,EAAa,AAAb,WAAa;gBACb,sBAAsB,GAAG,+CAAyB,CAAC,UAAU;gBAC7D,EAAa,AAAb,WAAa;gBACb,qBAAqB,GAAG,+CAAyB,CAAC,SAAS;YAC5D,CAAC;YAED,EAAkB,AAAlB,gBAAkB;YAClB,MAAM,CAAC,GAAG,CACT,qBAAqB,CAAC,CAAC,EAAK,sBAAsB,CAAC,CAAC,EAAI,qBAAqB,CAAC,CAAC,EAAK,MAAM,CAAC,CAAC,EAC5F,qBAAqB,CAAC,CAAC,EAAK,sBAAsB,CAAC,CAAC,EAAI,qBAAqB,CAAC,CAAC,EAAK,MAAM,CAAC,CAAC,EAC5F,qBAAqB,CAAC,CAAC,EAAK,sBAAsB,CAAC,CAAC,EAAI,qBAAqB,CAAC,CAAC,EAAK,MAAM,CAAC,CAAC,EAC5F,CAAG,EAAyB,CAAG,EAAyB,CAAG,EAAyB,CAAG;YAExF,MAAM,CAAC,MAAM;QACd,CAAC;QAED,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;QAEhD,MAAM,CAAC,CAAC;IACT,CAAC;WAEM,mBAAmB,CACzB,MAAkB,EAClB,MAAe,EACf,MAAe,GAAG,GAAG,CAAC,cAAO,IAC5B,CAAC;QACF,KAAK,CAAC,uBAAuB,GAC5B,yCAAU,CAAC,+BAA+B,CAAC,CAAM,OAAE,CAAO;QAE3D,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM;IACpE,CAAC;WAEM,4BAA4B,CAClC,MAAkB,EAClB,gBAAkC,GAAG,GAAG,CAAC,yCAAgB,IACzD,MAAe,GAAG,GAAG,CAAC,cAAO,IAC5B,CAAC;QACF,KAAK,CAAC,WAAW,GAAG,yCAAU,CAAC,oBAAoB,CAAC,gBAAgB;QAEpE,KAAK,CAAC,SAAS,GACd,yCAAS,CAAC,OAAO,CAAC,sCAAsC,CACvD,yCAAU,CAAC,IAAI,EACf,WAAW,EACX,GAAG,CAAC,yCAAU,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG;QAG9B,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM;IAC1D,CAAC;;AA1IW,yCAAU,CACf,2BAA2B,GAAG,GAAG,CAAC,GAAG;;;;MDlEhC,yCAAS;WAwBb,SAAS,CAAC,OAAe,EAAE,CAAC;QACjC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAkB;IAC1C,CAAC;WAEM,gBAAgB,CAAC,GAAY,EAAE,CAAC;QACrC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;IACtD,CAAC;WAEM,SAAS,CAAC,GAAY,EAAE,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG;IAC5C,CAAC;IAED,EAYG,AAZH,idAYG,AAZH,EAYG,QACI,aAAa,CAClB,IAAY,EACZ,KAAa,EACb,eAAuB,GAAG,yCAAS,CAAC,UAAU,EAC9C,eAAuB,GAAG,yCAAS,CAAC,UAAU,EAC9C,CAAC;QACD,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK;QACrC,EAAE,EAAE,OAAO,IAAI,eAAe,EAAE,MAAM,CAAC,IAAI;QAC3C,MAAM,CACJ,OAAO,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK;IAExE,CAAC;;AA5DU,yCAAS,CACJ,kBAAkB,GAAG,IAAI,CAAC,EAAE,GAAG,GAAK;AADzC,yCAAS,CAEJ,UAAU,GAAW,GAAG;AAF7B,yCAAS,CAGJ,UAAU,GAAW,IAAI;AAH9B,yCAAS,CAIJ,UAAU,GAAW,KAAK;AAJ/B,yCAAS,CAKJ,UAAU,GAAW,MAAM;AALhC,yCAAS,CAMJ,UAAU,GAAW,OAAO;AANjC,yCAAS,CAOJ,UAAU,GAAW,QAAQ;AAPlC,yCAAS,CAQJ,UAAU,GAAW,SAAS;AARnC,yCAAS,CASJ,UAAU,GAAW,UAAU;AATpC,yCAAS,CAUJ,UAAU,GAAW,WAAW;AAVrC,yCAAS,CAWJ,UAAU,GAAW,YAAY;AAXtC,yCAAS,CAYJ,UAAU,GAAW,aAAa;AAZvC,yCAAS,CAaJ,UAAU,GAAW,cAAc;AAbxC,yCAAS,CAcJ,UAAU,GAAW,eAAe;AAdzC,yCAAS,CAeJ,UAAU,GAAW,gBAAgB;AAf1C,yCAAS,CAgBJ,UAAU,GAAW,iBAAiB;AAhB3C,yCAAS,CAiBJ,UAAU,GAAW,kBAAkB;AAjB5C,yCAAS,CAkBJ,UAAU,GAAW,mBAAmB;AAlB7C,yCAAS,CAmBJ,UAAU,GAAW,oBAAoB;AAnB9C,yCAAS,CAoBJ,UAAU,GAAW,qBAAqB;AApB/C,yCAAS,CAqBJ,UAAU,GAAW,sBAAsB;AArBhD,yCAAS,CAsBJ,UAAU,GAAW,uBAAuB;AAtBjD,yCAAS,CA8Db,OAAO;WACL,oBAAoB,CACzB,QAAoB,EACpB,MAAc,EACd,MAAe,GAAG,GAAG,CAAC,yDAAO,IAC7B,CAAC;QACD,KAAK,CAAC,MAAM,GAAG,0DAAU,CAAC,mBAAmB,CAC3C,0DAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,QAAQ,EAAE,MAAM,GACzE,GAAG,CAAC,yDAAO,IACL,QAAQ;QAEV,EAAkB,AAAlB,gBAAkB;QAClB,MAAM,CAAC,MAAM,CAAC,GAAG,CACnB,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE;IAE7C,CAAC;WAEM,sCAAsC,CAC3C,WAAuB,EACvB,QAAoB,EACpB,KAAiB,EACjB,MAAe,GAAG,GAAG,CAAC,yDAAO,IAC7B,CAAC;QACD,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;QACtB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;QACtB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;QAEtB,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAElC,KAAK,CAAC,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;QAC7B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAC1B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAE1B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAC1B,KAAK,CAAC,GAAG,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;QAC9B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAE1B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAC1B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAC1B,KAAK,CAAC,GAAG,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;QAE9B,EAAkB,AAAlB,gBAAkB;QAClB,MAAM,CAAC,MAAM,CAAC,GAAG,CACnB,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,CAAG,EAChD,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,CAAG,EAChD,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,CAAG,EAChD,WAAW,CAAC,CAAC,EAAG,WAAW,CAAC,CAAC,EAAG,WAAW,CAAC,CAAC,EAAE,CAAG;IAElD,CAAC;;;;;;;;;;;;;;;;MJjHgB,wCAAU;iBAKhB,CAAC;QALD,IA8Jd,CA7JiB,OAAO,GAAG,GAAG,CAAC,GAAG;QADpB,IA8Jd,CA5JiB,gBAAgB,GAAG,yCAAgB,CAAC,WAAW;QAFlD,IA8Jd,CA3JiB,YAAY,GAAG,GAAG,CAAC,mBAAY;QAHlC,IA8Jd,CA1JQ,YAAY,GAAG,GAAG,CAAC,yCAAW;QAErC,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,SAAS,KAAO,CAAC;YACnD,IAAI,CAAC,WAAW,CAAC,CAAC;gBAAC,IAAI,EAAE,CAAU;YAAC,CAAC;QACtC,CAAC;QACD,IAAI,CAAC,SAAS,IAAI,CAAe,GAAK,CAAC;YACtC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI;YACtB,EAAE,EAAE,OAAO,EACV,MAAM,CAAE,OAAO,CAAC,IAAI;gBACnB,IAAI,CAAC,yCAAW,CAAC,MAAM;oBACtB,IAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC,CAAC;2BACxC,OAAO,CAAC,KAAK;oBACjB,CAAC;oBACD,KAAK;;oBAEL,KAAK;;QAGT,CAAC;IACF,CAAC;IAED,IAAI,CAAC,MAAyB,EAAE,CAAC;QAChC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM;IAClC,CAAC;IAED,aAAa,CAAC,KAAa,EAAE,CAAC;QAC7B,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,KAAK;IAC1C,CAAC;IAED,OAAO,CAAC,EAAU,EAAuB,CAAC;QACzC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACT,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI;IAE7B,CAAC;IAED,aAAa,CAAI,EAAU,EAAE,GAAW,EAAE,CAAC;QAC1C,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACT,MAAM,CAAI,MAAM,CAAC,QAAQ,CAAC,GAAG;IAE/B,CAAC;IAED,aAAa,CAAC,EAAU,EAAE,GAAW,EAAE,IAAS,EAAE,CAAC;QAClD,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACT,MAAM,CAAC,QAAQ,CAAC,GAAG,IAAI,IAAI;IAE7B,CAAC;IAEO,SAAS,CAAC,KAAa,EAAE,CAAC;QACjC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK;IACvD,CAAC;IAED,OAAO,CAAC,EAAU,EAAE,CAAC;QACpB,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;IAC3B,CAAC;IAED,cAAc,CAAC,EAAU,EAAE,CAAC;QAC3B,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM;YACT,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAW,aAAG,CAAC;gBACnC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAW;gBAC3C,MAAM,CAAC,MAAM,CAAC,MAAM;YACrB,CAAC,MAAM,CAAC;gBACP,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC,gBAAS,CAAC,MAAM;gBACnC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAW,YAAE,MAAM;gBACpC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM;YACvC,CAAC;;IAEH,CAAC;IAED,IAAI,CAAC,EAAU,EAAE,CAAC;QACjB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACT,MAAM,CAAC,OAAO,GAAG,KAAK;QAEvB,MAAM,GAAG,MAAM;IAChB,CAAC;IAED,IAAI,CAAC,EAAU,EAAE,CAAC;QACjB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACT,MAAM,CAAC,OAAO,GAAG,IAAI;QAEtB,MAAM,GAAG,MAAM;IAChB,CAAC;IAED,GAAG,CAAC,IAAS,EAAE,QAAqB,EAAE,CAAC;QACtC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI;QAE3C,EAAE,EAAC,QAAQ,EAAE,CAAC;YACb,MAAM,CAAC,QAAQ,CAAC,KAAK,GAAG,QAAQ;YAChC,MAAM,CAAC,YAAY,CAClB,yCAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,QAAQ,EAAE,GAAG,CAAC,WAAI,GAAG,aAAa,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QAEzF,CAAC;QAED,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM;QAEtC,MAAM,CAAC,MAAM,CAAC,EAAE;IACjB,CAAC;IAED,MAAM,CAAC,EAAU,EAAE,IAAS,EAAE,CAAC;QAC9B,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAC9B,EAAE,EAAE,MAAM,EAAE,CAAC;YACZ,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI;YACjD,MAAM,CAAC,IAAI,CAAC,YAAY;QACzB,CAAC;QACD,MAAM,GAAG,MAAM;IAChB,CAAC;IAED,QAAQ,CAAC,EAAU,EAAE,CAAC;QACrB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACT,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK;IAE9B,CAAC;IAED,OAAO,CAAC,KAAa,EAAE,MAAc,EAAE,CAAC;QACvC,yCAAgB,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,EAAE,MAAM;IACrD,CAAC;IAED,UAAU,CAAC,KAAsB,EAAE,CAAC;QACnC,KAAK,CAAC,MAAM,GAAG,wCAAe,CAAC,WAAW,GAAG,SAAS;QACtD,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM;QAC5B,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG;QACtB,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;QACxB,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG;QACtB,OAAO,CAAC,KAAK,CAAC,KAAK;QACnB,MAAM,CAAC,sBAAsB;IAC9B,CAAC;IAED,cAAc,CACb,EAAU,EACV,QAAoB,EACpB,MAAe,EACd,CAAC;QACF,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EAAE,CAAC;YACZ,MAAM,GAAG,MAAM,GAAG,GAAG,CAAC,WAAI,GAAG,aAAa,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC;YAC5D,MAAM,CAAC,YAAY,CAAC,yCAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,QAAQ,EAAE,MAAM;YAC3E,MAAM,CAAC,QAAQ,CAAC,KAAK,GAAG,QAAQ;QACjC,CAAC;QACD,MAAM,GAAG,MAAM;IAChB,CAAC;IAED,MAAM,CAAC,EAAU,EAAE,CAAC;QACnB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACT,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM;QAE1C,MAAM,GAAG,MAAM;IAChB,CAAC;;AAGK,KAAK,CAAC,yCAAW,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;IACzC,MAAM,EAAE,CAAC;AACV,CAAC;AAED,aAAM,CAAC,GAAG,CAAC,wCAAU;;;AD7Kd,KAAK,CAAC,yCAAS,GAAG,CAAC;IACzB,UAAU,UAAU,CAAe;AACpC,CAAC;MAIY,yCAAsB;IAElC,EAIG,AAJH,mFAIG,AAJH,EAIG,QACI,SAAS,CAA4B,eAAkB,EAAU,CAAC;QACxE,GAAG,CAAC,MAAM;QACV,KAAK,CAAC,SAAS,GAAG,yCAAS,CAAC,eAAe;QAC3C,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC;YACpC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;gBAAC,IAAI,EAAE,CAAQ;YAAC,CAAC;YACjD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM;QACrC,CAAC,MACA,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS;QAEtC,MAAM,CAAC,MAAM;IACd,CAAC;IAGD,EAIG,AAJH,+FAIG,AAJH,EAIG,QACI,UAAU,CAChB,eAAkB,EACK,CAAC;QACxB,KAAK,CAAC,MAAM,GAAG,yCAAsB,CAAC,SAAS,CAAC,eAAe;QAC/D,KAAK,CAAC,SAAS,GAAG,yCAAS,CAAC,eAAe;QAE3C,GAAG,CAAC,OAAO;QACX,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC;YACrC,OAAO,GAAG,0DAAI,CAAe,MAAM;YACnC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO;QACvC,CAAC,MACA,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS;QAGxC,MAAM,CAAC,OAAO;IACf,CAAC;;AAxCW,yCAAsB,CACV,SAAS,GAAG,GAAG,CAAC,GAAG;AAD/B,yCAAsB,CAmBV,UAAU,GAAG,GAAG,CAAC,GAAG;;;;;;;;;;;;;;;MWzBhC,yCAAc;gBAMG,MAAc,CAAE,CAAC;aAAjB,MAAc,GAAd,MAAc;QANrC,IAwCN,CAvCiB,UAAU,GAC1B,yCAAsB,CAAC,SAAS,CAAC,CAAY;QAFxC,IAwCN,CArCiB,WAAW,GAC3B,yCAAsB,CAAC,UAAU,CAAC,CAAY;QAG9C,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,MAAM,CAAC,gBAAgB;QACtD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YAC5B,GAAG,EAAE,WAAU,CAAC,SAAS,CACvB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAwB,IAAI;YAExD,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI;YACrC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG;YACnC,MAAM,EACL,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,GACjC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY;QACpC,CAAC;IACF,CAAC;IAED,OAAO,CAAC,KAAa,EAAE,MAAc,EAAE,CAAC;QACvC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM;IAC9C,CAAC;IAED,MAAM,GAAG,CAAC;QACT,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU;QAC1D,KAAK,CAAC,IAAI,GAAG,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,iBAAiB;QAClE,IAAI,CAAC,UAAU,CAAC,WAAW,CAC1B,CAAC;YACA,IAAI,EAAE,yCAAW,CAAC,MAAM;YACxB,KAAK,EAAE,CAAC;gBACP,GAAG,EAAE,GAAG;gBACR,IAAI,EAAE,IAAI;gBACV,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY;gBAC1C,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW;YACzC,CAAC;QACF,CAAC,EACD,CAAC;YAAA,GAAG,CAAC,MAAM;YAAE,IAAI,CAAC,MAAM;QAAA,CAAC;IAE3B,CAAC;;;;;;;;;;;;;;;MG7CW,yCAAW;gBACJ,SAAiB,EAAS,QAAgB,CAAE,CAAC;aAA7C,SAAiB,GAAjB,SAAiB;aAAS,QAAgB,GAAhB,QAAgB;IAAG,CAAC;;MAGrD,yCAAU;gBACH,SAAiB,EAAS,QAAgB,CAAE,CAAC;aAA7C,SAAiB,GAAjB,SAAiB;aAAS,QAAgB,GAAhB,QAAgB;IAAG,CAAC;;;;MDDrD,yCAAK;WACV,YAAY,GAAG,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,KAAK,KAAK,IAAI,QAAQ;IACpD,CAAC;WACM,uBAAuB,CAAC,WAAwB,EAAc,CAAC;QACrE,MAAM,CAAC,CAAC;YACP,QAAQ,EAAE,WAAW,CAAC,SAAS;YAC/B,SAAS,EAAE,WAAW,CAAC,QAAQ;QAChC,CAAC;IACF,CAAC;WAEM,uBAAuB,CAAC,UAAsB,EAAe,CAAC;QACpE,MAAM,CAAC,CAAC;YACP,QAAQ,EAAE,UAAU,CAAC,SAAS;YAC9B,SAAS,EAAE,UAAU,CAAC,QAAQ;QAC/B,CAAC;IACF,CAAC;WAEM,iBAAiB,CAAC,MAAqB,EAAE,CAAC;QAChD,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAC3B,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG,CAAG,EAC/B,MAAM,CAAC,MAAM,CAAC,YAAY,GAAG,CAAG;IAElC,CAAC;WAEM,WAAW,CACjB,MAAqB,EACrB,cAAiC,EAChC,CAAC;QACF,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,cAAc;QACzD,EAAE,EAAE,MAAM,EACT,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,uBAAuB,CAAC,MAAM;IAEpE,CAAC;WAEM,wBAAwB,CAAC,YAAiC,EAAE,CAAC;QACnE,MAAM,CAAC,CAAC;YACP,GAAG,EAAG,YAAY,CAAC,QAAQ,GAAG,GAAG,GAAI,IAAI,CAAC,EAAE;YAC5C,GAAG,EAAG,YAAY,CAAC,SAAS,GAAG,GAAG,GAAI,IAAI,CAAC,EAAE;QAC9C,CAAC;IACF,CAAC;WAEM,wBAAwB,CAAC,MAAqB,EAAE,CAAC;QACvD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM;IAC9D,CAAC;WAEM,sBAAsB,CAAC,MAAqB,EAAE,CAAC;QACrD,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,MAAM,GAAG,MAAM;IACrD,CAAC;WAEM,SAAS,CAAC,OAAe,EAAE,CAAC;QAClC,MAAM,CAAC,GAAG,CAAC,cAAa,GAAG,aAAa,CACvC,WAAW,CAAC,SAAS,CAAC,OAAO;IAE/B,CAAC;WAEM,cAAc,CAAC,MAA4B,EAAE,OAAe,EAAE,CAAC;QACrE,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO;IAC3C,CAAC;;;;;;ME1DW,yCAAS;gBAKT,EAAU,CAAE,CAAC;QALnB,IA4CN,CA1CiB,WAAW,GAC3B,yCAAsB,CAAC,UAAU,CAAC,CAAY;QAG9C,IAAI,CAAC,EAAE,GAAG,EAAE;IACb,CAAC;IAED,WAAW,CAAC,GAAW,EAAE,CAAC;QACzB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG;IACnD,CAAC;IAED,WAAW,CAAC,GAAW,EAAE,KAAU,EAAE,CAAC;QACrC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG,EAAE,KAAK;IAC1D,CAAC;IAED,IAAI,GAAqB,CAAC;QACzB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;IACrC,CAAC;IAED,IAAI,GAAqB,CAAC;QACzB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;IACrC,CAAC;IAED,WAAW,CAAC,QAAqB,EAAoB,CAAC;QACrD,KAAK,CAAC,UAAU,GAAG,yCAAK,CAAC,uBAAuB,CAAC,QAAQ;QACzD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,UAAU;IAC3D,CAAC;UAEK,WAAW,GAAqC,CAAC;QACtD,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;QACxD,EAAE,EAAE,QAAQ,EACX,MAAM,CAAC,yCAAK,CAAC,uBAAuB,CAAC,QAAQ;IAE/C,CAAC;IAED,OAAO,GAAqB,CAAC;QAC5B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;IACvC,CAAC;IAED,UAAU,GAAqB,CAAC;QAC/B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IACxC,CAAC;;;;MHpCW,yCAAa;IAIjB,SAAS,CAAC,MAAgB,EAAE,CAAC;QACpC,MAAM,CAAC,GAAG,CAAC,WAAI,GAAG,aAAa,CAAC,MAAM,EAAE,GAAG;IAC5C,CAAC;UAEK,GAAG,CAAC,MAAgB,EAAE,QAAsB,EAAsB,CAAC;QACxE,QAAQ,GAAG,QAAQ,GAAG,yCAAK,CAAC,uBAAuB,CAAC,QAAQ,IAAI,QAAQ;QACxE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,IAAI,QAAQ;QAC/D,MAAM,CAAC,GAAG,CAAC,yCAAS,CAAC,EAAE;IACxB,CAAC;UAEK,GAAG,CAAC,EAAU,EAAE,CAAC;QACtB,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,GACpC,MAAM,CAAC,GAAG,CAAC,yCAAS,CAAC,EAAE;IAEzB,CAAC;UAEK,YAAY,CAAC,EAAU,EAAE,MAAgB,EAA0B,CAAC;QACzE,IAAI,CAAC,SAAS,CAAC,MAAM;QACrB,MAAM,CAAC,CAAC;YACP,QAAQ,EAAE,EAAE;YACZ,MAAM,EAAE,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,MAAM;QACxD,CAAC;IACF,CAAC;;QA1BK,IA2BN,CA1BiB,WAAW,GAC3B,yCAAsB,CAAC,UAAU,CAAC,CAAY;;;;;;;;MITnC,wCAAU;gBAIO,MAAqB,CAAE,CAAC;aAAxB,MAAqB,GAArB,MAAqB;QAJ5C,IAsBN,CArBiB,WAAW,GAC3B,yCAAsB,CAAC,UAAU,CAAC,CAAY;IAEM,CAAC;UAEhD,KAAK,CAAC,EAAU,EAAE,CAAC;QACxB,GAAG,CAAC,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;QACjD,EAAE,EAAE,QAAQ,EAAE,CAAC;YACd,QAAQ,GAAG,yCAAK,CAAC,uBAAuB,CAAC,QAAQ;YACjD,KAAK,CAAC,aAAa,GAAG,iBAAiB,CAAC,WAAW,CAClD,QAAQ,CAAC,QAAQ,EACjB,QAAQ,CAAC,SAAS,EAClB,CAAC;YAEF,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE;YAChD,KAAK,CAAC,MAAM,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,SAAS;YAChD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,mBAAmB,CACrC,GAAG,CAAC,qBAAqB,CAAC,aAAa,EAAE,MAAM;QAEjD,CAAC;IACF,CAAC;;;;MjBlBW,yCAAgB;gBAMC,MAAqB,CAAE,CAAC;aAAxB,MAAqB,GAArB,MAAqB;QAN5C,IAyEN,CAxEiB,WAAW,GAC3B,yCAAsB,CAAC,UAAU,CAAC,CAAY;QAK9C,KAAK,CAAC,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,aAAa;QAE3C,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAK;QAC7C,IAAI,CAAC,SAAS,CAAC,EAAE,GAAG,CAAgB;QACpC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAU;QAC1C,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,GAAG,CAAG;QAC9B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,GAAG,CAAG;QAC/B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,CAAM;QACpC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,CAAM;QACnC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,CAAG;QACjC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAQ;QACxC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,CAAG;QAClC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,aAAa,GAAG,CAAM;QAE3C,KAAK,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAQ;QAC9C,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM;QAE5B,EAAE,GAAG,IAAI,EACR,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAA4B;aAE5C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS;QAG3B,EAAE,EAAE,MAAM,CAAC,oBAAoB,EAC9B,OAAO,CAAC,IAAI,CACX,CAAsG;QAIxG,EAAa,AAAb,WAAa;QACb,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC,0BAA0B;QACnD,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC,WAAW;QACpC,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,YAAY;QAEtC,EAAa,AAAb,WAAa;QACb,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAQ,CAAC,SAAS,EAAE,CAAC;YAAA,SAAS;QAAA,CAAC,GAAG,IAAI,KAAO,CAAC;YACnE,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,MAAM,CAAC,gBAAgB;QACvD,CAAC;QAED,IAAI,CAAC,cAAc;QACnB,MAAM,CAAC,gBAAgB,CAAC,CAAQ,SAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI;IAChE,CAAC;IAEO,cAAc,GAAG,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,OAAO,CACpB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,EACjC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY;IAEpC,CAAC;QAGG,OAAO,GAAG,CAAC;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,yCAAa;IAC3D,CAAC;QAGG,IAAI,GAAG,CAAC;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,wCAAU,CAAC,IAAI,CAAC,MAAM;IAC9D,CAAC;QAGG,QAAQ,GAAG,CAAC;QACf,MAAM,CACL,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,yCAAc,CAAC,IAAI,CAAC,MAAM;IAEpE,CAAC;;;;;;;;;;MmB5EI,yCAAa,SAAS,qBAAc;gBAC7B,QAAgB,GAAG,EAAE,CAAE,CAAC;QACnC,KAAK,CAAC,wCAAY,EAAE,QAAQ,EAAE,QAAQ;IACvC,CAAC;;;;;;;;;;;;;;;;;SCFc,yCAAkB,CAAC,UAAkB,GAAG,EAAE,EAAE,CAAC;IAC5D,KAAK,CAAC,cAAc,GAAG,GAAG,CAAC,qBAAc,CAAC,UAAU;IACpD,yCAAK,CAAC,cAAc,CAAC,cAAc,EAAE,EAAE;IACvC,MAAM,CAAC,cAAc;AACtB,CAAC;SAEe,yCAAe,CAAC,OAAO,GAAG,IAAI,EAAE,CAAC;IAChD,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC,kBAAW,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO;IAC1D,MAAM,CAAC,QAAQ;AAChB,CAAC;SAEe,yCAAiB,CAAC,CAAS,EAAE,CAAS,EAAE,CAAC;IACxD,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC,oBAAa,CAAC,CAAC,EAAE,CAAC;IACvC,EAAsC,AAAtC,oCAAsC;IACtC,MAAM,CAAC,QAAQ;AAChB,CAAC;;","sources":["src/index.ts","src/constants.ts","src/app/factory.ts","src/core/worker-factory.ts","src/core/core-thread.ts","src/core/graphic/graphic.component.ts","src/core/camera/camera.component.ts","src/core/render.queue.ts","src/core/math/math.utils.ts","src/core/transforms.ts","src/core/ellipsoid.ts","src/core/math/cartesian3.ts","src/core/heading-pitch-roll.ts","src/core/quration.ts","src/app/object.renderer.ts","src/app/object.manager.ts","src/utils.ts","src/interface.ts","src/app/object.api.ts","src/app/object.util.ts","src/core/geometries/Geometries.ts","src/core/geometries/EarthGeometry.ts","src/test.ts"],"sourcesContent":["export { REVISION } from './constants';\r\nexport { InterfcaeFactory } from './app/factory';\r\nexport * from './core/geometries/Geometries';\r\nexport * from './utils';\r\nexport * from './interface';\r\nexport * from './test';\r\nexport * from './core/transforms';\r\n","export const REVISION = '0dev';\r\nexport const EARTH_RADIUS = 6378137;\r\n","import { SingletonWorkerFactory } from '../core/worker-factory';\r\nimport * as Cesium from 'cesium';\r\nimport { transfer } from 'comlink';\r\nimport { ObjectRenderer } from './object.renderer';\r\nimport { ObjectManager } from './object.manager';\r\nimport { ObjectUtil } from './object.util';\r\n\r\nexport class InterfcaeFactory {\r\n\tprivate readonly coreWrapper =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tprivate readonly container: HTMLDivElement;\r\n\r\n\tconstructor(private readonly viewer: Cesium.Viewer) {\r\n\t\tconst root = viewer.container.parentElement;\r\n\r\n\t\tthis.container = document.createElement('div');\r\n\t\tthis.container.id = 'ThreeContainer';\r\n\t\tthis.container.style.position = 'absolute';\r\n\t\tthis.container.style.top = '0';\r\n\t\tthis.container.style.left = '0';\r\n\t\tthis.container.style.height = '100%';\r\n\t\tthis.container.style.width = '100%';\r\n\t\tthis.container.style.margin = '0';\r\n\t\tthis.container.style.overflow = 'hidden';\r\n\t\tthis.container.style.padding = '0';\r\n\t\tthis.container.style.pointerEvents = 'none';\r\n\r\n\t\tconst canvas = document.createElement('canvas');\r\n\t\tthis.container.append(canvas);\r\n\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error('cannot fond parent element');\r\n\t\t} else {\r\n\t\t\troot.append(this.container);\r\n\t\t}\r\n\r\n\t\tif (viewer.useDefaultRenderLoop) {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t'Please set Cesium viewer.useDefaultRenderLoop = false for syncronize animation frame to this plug-in'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// @ts-ignore\r\n\t\tconst offscreen = canvas.transferControlToOffscreen();\r\n\t\toffscreen.width = canvas.clientWidth;\r\n\t\toffscreen.height = canvas.clientHeight;\r\n\r\n\t\t// @ts-ignore\r\n\t\tthis.coreWrapper.init(transfer(offscreen, [offscreen])).then(() => {\r\n\t\t\tthis.coreWrapper.setPixelRatio(window.devicePixelRatio);\r\n\t\t});\r\n\t\r\n\t\tthis.onWindowResize();\r\n\t\twindow.addEventListener('resize', this.onWindowResize.bind(this));\r\n\t}\r\n\r\n\tprivate onWindowResize() {\r\n\t\tthis.renderer.setSize(\r\n\t\t\tthis.viewer.container.clientWidth,\r\n\t\t\tthis.viewer.container.clientHeight\r\n\t\t);\r\n\t}\r\n\r\n\tprivate _manager: ObjectManager | undefined;\r\n\tget manager() {\r\n\t\treturn this._manager || (this._manager = new ObjectManager());\r\n\t}\r\n\r\n\tprivate _util: ObjectUtil | undefined;\r\n\tget util() {\r\n\t\treturn this._util || (this._util = new ObjectUtil(this.viewer));\r\n\t}\r\n\r\n\tprivate _renderer: ObjectRenderer | undefined;\r\n\tget renderer() {\r\n\t\treturn (\r\n\t\t\tthis._renderer || (this._renderer = new ObjectRenderer(this.viewer))\r\n\t\t);\r\n\t}\r\n}\r\n","import { wrap, Remote } from 'comlink';\r\nimport CoreThread from './core-thread';\r\n\r\ninterface WorkerMap {\r\n\tCoreThread: CoreThread;\r\n}\r\nexport const WorkerURL = {\r\n\tCoreThread: new URL('./core-thread', import.meta.url),\r\n} as const;\r\n\r\nexport type WorkerURL = typeof WorkerURL[keyof typeof WorkerURL];\r\n\r\nexport class SingletonWorkerFactory {\r\n\tprivate static readonly workerMap = new Map<URL, Worker>();\r\n\t/**\r\n\t * 웹 워커를 가져옵니다.\r\n\t * @param workerClassName\r\n\t * @returns\r\n\t */\r\n\tstatic getWorker<T extends keyof WorkerMap>(workerClassName: T): Worker {\r\n\t\tlet worker: Worker;\r\n\t\tconst workerURL = WorkerURL[workerClassName];\r\n\t\tif (!this.workerMap.has(workerURL)) {\r\n\t\t\tworker = new Worker(workerURL, { type: 'module' });\r\n\t\t\tthis.workerMap.set(workerURL, worker);\r\n\t\t} else {\r\n\t\t\tworker = this.workerMap.get(workerURL)!;\r\n\t\t}\r\n\t\treturn worker;\r\n\t}\r\n\r\n\tprivate static readonly wrapperMap = new Map<URL, Remote<any>>();\r\n\t/**\r\n\t * 웹 워커의 Warpper 를 가져옵니다.\r\n\t * @param workerClassName\r\n\t * @returns\r\n\t */\r\n\tstatic getWrapper<T extends keyof WorkerMap>(\r\n\t\tworkerClassName: T\r\n\t): Remote<WorkerMap[T]> {\r\n\t\tconst worker = SingletonWorkerFactory.getWorker(workerClassName);\r\n\t\tconst workerURL = WorkerURL[workerClassName];\r\n\r\n\t\tlet wrapper: Remote<WorkerMap[T]>;\r\n\t\tif (!this.wrapperMap.has(workerURL)) {\r\n\t\t\twrapper = wrap<WorkerMap[T]>(worker);\r\n\t\t\tthis.wrapperMap.set(workerURL, wrapper);\r\n\t\t} else {\r\n\t\t\twrapper = this.wrapperMap.get(workerURL)! as Remote<WorkerMap[T]>;\r\n\t\t}\r\n\r\n\t\treturn wrapper;\r\n\t}\r\n}\r\n","import { expose } from 'comlink';\r\nimport { GraphicComponent } from './graphic/graphic.component';\r\nimport { Box3, BoxHelper, Matrix4, Object3D, ObjectLoader, Vector3 } from 'three';\r\nimport { ThreeWGS84 } from '..';\r\nimport CameraComponent from './camera/camera.component';\r\nimport { RenderQueue } from './render.queue';\r\nimport { MathUtils } from './math/math.utils';\r\n\r\nexport interface CameraInitParam {\r\n\taspect: number;\r\n\tfar: number;\r\n\tnear: number;\r\n\tfov: number;\r\n}\r\n\r\nexport default class CoreThread {\r\n\tprivate readonly helpers = new Map<string, Object3D>();\r\n\tprivate readonly graphicComponent = GraphicComponent.getInstance();\r\n\tprivate readonly objectLoader = new ObjectLoader();\r\n\tprivate _renderQueue = new RenderQueue();\r\n\tconstructor() {\r\n\t\tthis._renderQueue.renderNextFrame$.subscribe(() => {\r\n\t\t\tself.postMessage({ type: 'onRender' });\r\n\t\t});\r\n\t\tself.onmessage = (e: MessageEvent) => {\r\n\t\t\tconst message = e.data;\r\n\t\t\tif (message) {\r\n\t\t\t\tswitch (message.type) {\r\n\t\t\t\t\tcase RequestType.RENDER:\r\n\t\t\t\t\t\tthis._renderQueue.updateNextAnimationFrame({\r\n\t\t\t\t\t\t\t...message.param,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tinit(canvas: HTMLCanvasElement) {\r\n\t\tthis.graphicComponent.init(canvas);\r\n\t}\r\n\r\n\tsetPixelRatio(value: number) {\r\n\t\tthis.graphicComponent.setPixelRatio(value);\r\n\t}\r\n\r\n\tgetBox3(id: number): Vector3 | undefined {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\treturn object.userData.box3;\r\n\t\t}\r\n\t}\r\n\r\n\tgetUserDataAt<T>(id: number, key: string) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\treturn <T>object.userData[key];\r\n\t\t}\r\n\t}\r\n\r\n\tsetUserDataAt(id: number, key: string, data: any) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tobject.userData[key] = data;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getObject(value: number) {\r\n\t\treturn this.graphicComponent.scene.getObjectById(value);\r\n\t}\r\n\r\n\tisExist(id: number) {\r\n\t\treturn !!this.getObject(id);\r\n\t}\r\n\r\n\tsetBoxHelperTo(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tif (this.helpers.has('BoxHelper')) {\r\n\t\t\t\tconst helper = this.helpers.get('BoxHelper')! as BoxHelper;\r\n\t\t\t\thelper.update(object);\r\n\t\t\t} else {\r\n\t\t\t\tconst helper = new BoxHelper(object);\r\n\t\t\t\tthis.helpers.set('BoxHelper', helper);\r\n\t\t\t\tthis.graphicComponent.scene.add(helper);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thide(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tobject.visible = false;\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n\r\n\tshow(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tobject.visible = true;\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n\r\n\tadd(json: any, position?: ThreeWGS84) {\r\n\t\tconst object = this.objectLoader.parse(json);\r\n\t\t\r\n\t\tif(position) {\r\n\t\t\tobject.userData.wgs84 = position;\r\n\t\t\tobject.applyMatrix4(\r\n\t\t\t\tMathUtils.Matrix4.localWGS84ToMattrix4(position, new Box3().setFromObject(object).max.y)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis.graphicComponent.scene.add(object);\r\n\t\t\r\n\t\treturn object.id;\r\n\t}\r\n\r\n\tupdate(id: number, json: any) {\r\n\t\tlet object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tconst updateObject = this.objectLoader.parse(json);\r\n\t\t\tobject.copy(updateObject);\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n\r\n\tgetWGS84(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\treturn object.userData.wgs84 as ThreeWGS84;\r\n\t\t}\r\n\t}\r\n\r\n\tsetSize(width: number, height: number) {\r\n\t\tGraphicComponent.getInstance().setSize(width, height);\r\n\t}\r\n\r\n\tinitCamera(param: CameraInitParam) {\r\n\t\tconst camera = CameraComponent.getInstance().getCamera();\r\n\t\tcamera.aspect = param.aspect;\r\n\t\tcamera.far = param.far;\r\n\t\tcamera.near = param.near;\r\n\t\tcamera.fov = param.fov;\r\n\t\tconsole.table(param);\r\n\t\tcamera.updateProjectionMatrix();\r\n\t}\r\n\r\n\tupdatePosition(\r\n\t\tid: number,\r\n\t\tposition: ThreeWGS84,\r\n\t\theight?: number\r\n\t) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\theight = height ? new Box3().setFromObject(object).max.y : 0;\r\n\t\t\tobject.applyMatrix4(MathUtils.Matrix4.localWGS84ToMattrix4(position, height));\r\n\t\t\tobject.userData.wgs84 = position;\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n\r\n\tdelete(id: number) {\r\n\t\tconst object = this.getObject(id);\r\n\t\tif (object) {\r\n\t\t\tthis.graphicComponent.scene.remove(object);\r\n\t\t}\r\n\t\treturn !!object;\r\n\t}\r\n}\r\n\r\nexport const RequestType = Object.freeze({\r\n\tRENDER: 0,\r\n});\r\n\r\nexpose(new CoreThread());\r\n","import * as THREE from 'three';\r\nimport CameraComponent from '../camera/camera.component';\r\nimport { Box3, WebGLRendererParameters } from 'three';\r\nimport { ThreeWGS84 } from '../../interface';\r\nimport { MathUtils } from '../math/math.utils';\r\n\r\nexport interface CurrentExtent {\r\n\txmin: number;\r\n\tymin: number;\r\n\txmax: number;\r\n\tymax: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface RenderParam {\r\n\tcvm: Float32Array;\r\n\tcivm: Float32Array;\r\n\twidth: number,\r\n\theight: number,\r\n}\r\n\r\nexport class GraphicComponent {\r\n\tprivate static instance: GraphicComponent;\r\n\tprivate readonly camera: THREE.PerspectiveCamera;\r\n\tprivate constructor(\r\n\t\treadonly scene = new THREE.Scene(),\r\n\t\tprivate readonly cameraComponent = CameraComponent.getInstance()\r\n\t) {\r\n\t\tthis.camera = this.cameraComponent.getCamera();\r\n\t}\r\n\r\n\tstatic getInstance() {\r\n\t\treturn this.instance || (this.instance = new this());\r\n\t}\r\n\r\n\tsetPixelRatio(value: number): boolean {\r\n\t\tlet success = false;\r\n\t\tif (this.renderer) {\r\n\t\t\tthis.renderer.setPixelRatio(value);\r\n\t\t\tsuccess = true;\r\n\t\t}\r\n\t\treturn success;\r\n\t}\r\n\r\n\trenderer?: THREE.WebGLRenderer;\r\n\tinit(canvas: HTMLCanvasElement) {\r\n\t\tconst params: WebGLRendererParameters = {\r\n\t\t\tcanvas: canvas,\r\n\t\t\tpowerPreference: 'high-performance',\r\n\t\t\talpha: true,\r\n\t\t\tantialias: true,\r\n\t\t\tlogarithmicDepthBuffer: true,\r\n\t\t\tdepth: false,\r\n\t\t};\r\n\r\n\t\tconst context = canvas.getContext('webgl2');\r\n\t\tif (context) {\r\n\t\t\tparams.context = context;\r\n\t\t}\r\n\r\n\t\tthis.renderer = new THREE.WebGLRenderer(params);\r\n\t\tconsole.log(\r\n\t\t\t`[Graphic] isWebGL2Enabled : ${this.renderer.capabilities.isWebGL2}`\r\n\t\t);\r\n\t}\r\n\r\n\tsetSize(width: number, height: number) {\r\n\t\tconst camera = this.cameraComponent.getCamera();\r\n\t\tcamera.aspect = width / height;\r\n\t\tcamera.updateProjectionMatrix();\r\n\t\tthis.renderer?.setSize(width, height, false);\r\n\t}\r\n\r\n\t/**\r\n\t * 장면을 렌더링합니다.\r\n\t * @param param\r\n\t */\r\n\trender(param: RenderParam) {\r\n\t\tif (this.renderer) {\r\n\r\n\t\t\tthis.camera.matrixAutoUpdate = false;\r\n\r\n\t\t\t// prettier-ignore\r\n\t\t\tthis.camera.matrixWorld.set(\r\n\t\t\t\tparam.civm[ 0], param.civm[ 4], param.civm[ 8], param.civm[12],\r\n\t\t\t\tparam.civm[ 1], param.civm[ 5], param.civm[ 9], param.civm[13],\r\n\t\t\t\tparam.civm[ 2], param.civm[ 6], param.civm[10], param.civm[14],\r\n\t\t\t\tparam.civm[ 3], param.civm[ 7], param.civm[11], param.civm[15]\r\n\t\t\t);\r\n\t\t\t// prettier-ignore\r\n\t\t\tthis.camera.matrixWorldInverse.set(\r\n\t\t\t\tparam.cvm[ 0], param.cvm[ 4], param.cvm[ 8], param.cvm[12],\r\n\t\t\t\tparam.cvm[ 1], param.cvm[ 5], param.cvm[ 9], param.cvm[13],\r\n\t\t\t\tparam.cvm[ 2], param.cvm[ 6], param.cvm[10], param.cvm[14],\r\n\t\t\t\tparam.cvm[ 3], param.cvm[ 7], param.cvm[11], param.cvm[15]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tthis.camera.aspect = param.width / param.height\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t\tthis.renderer.setSize(param.width, param.height, false);\r\n\t\t\tthis.renderer.clear();\r\n\t\t\tthis.renderer.render(this.scene, this.camera);\r\n\t\t}\r\n\t}\r\n}\r\n","import { PerspectiveCamera } from 'three';\r\nimport { Matrix4 } from 'cesium';\r\n\r\nexport default class CameraComponent {\r\n\tprivate static instance: CameraComponent;\r\n\tprivate readonly perspectiveCamera: PerspectiveCamera;\r\n\tprivate constructor() {\r\n\t\tthis.perspectiveCamera = new PerspectiveCamera();\r\n\t}\r\n\r\n\tgetCamera(): PerspectiveCamera {\r\n\t\treturn this.perspectiveCamera;\r\n\t}\r\n\r\n\tstatic getInstance() {\r\n\t\treturn this.instance || (this.instance = new this());\r\n\t}\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { GraphicComponent, RenderParam } from './graphic/graphic.component';\r\n\r\n/**\r\n * Cesium 과 three.js 의 스레드 간 렌더 비동기 이슈를 해결합니다.\r\n */\r\nexport class RenderQueue {\r\n\tprivate readonly _queue: RenderParam[] = [];\r\n\tprivate readonly graphic = GraphicComponent.getInstance();\r\n\tprivate param: RenderParam | undefined;\r\n\tprivate _handle: number | undefined;\r\n\tprivate readonly _bindRenderNextAnimationFrame =\r\n\t\tthis._renderNextAnimationFrame.bind(this);\r\n\tprivate readonly _renderSubject = new Subject<void>();\r\n\treadonly renderNextFrame$ = this._renderSubject.pipe();\r\n\r\n\t/**\r\n\t * 다음 장면을 그립니다.\r\n\t */\r\n\tprivate _renderNextAnimationFrame() {\r\n\t\tthis.param = this._queue.pop();\r\n\t\tif (this.param) {\r\n\t\t\tthis.graphic.render(this.param);\r\n\t\t}\r\n\t\tthis._handle = requestAnimationFrame(\r\n\t\t\tthis._bindRenderNextAnimationFrame\r\n\t\t);\r\n\t\tthis._renderSubject.next();\r\n\t}\r\n\r\n\t/**\r\n\t * 다음 장면을 요청합니다.\r\n\t * @param param 렌더링 파라미터\r\n\t */\r\n\tupdateNextAnimationFrame(param: RenderParam) {\r\n\t\tif (this._queue.length) {\r\n\t\t\tthis._queue[0] = param;\r\n\t\t} else {\r\n\t\t\tthis._queue.push(param);\r\n\t\t}\r\n\r\n\t\tif (!this._handle) this._renderNextAnimationFrame();\r\n\t}\r\n}\r\n","import { Matrix4, Vector3 } from \"three\";\r\nimport { ThreeWGS84 } from \"../../interface\";\r\nimport { Quaternion } from \"../quration\";\r\nimport { Transforms } from \"../transforms\";\r\nimport { Cartesian3 } from \"./cartesian3\";\r\n\r\nexport class MathUtils {\r\n  static readonly RADIANS_PER_DEGREE = Math.PI / 180.0;\r\n  static readonly EPSILON_01: number = 0.1;\r\n  static readonly EPSILON_02: number = 0.01;\r\n  static readonly EPSILON_03: number = 0.001;\r\n  static readonly EPSILON_04: number = 0.0001;\r\n  static readonly EPSILON_05: number = 0.00001;\r\n  static readonly EPSILON_06: number = 0.000001;\r\n  static readonly EPSILON_07: number = 0.0000001;\r\n  static readonly EPSILON_08: number = 0.00000001;\r\n  static readonly EPSILON_09: number = 0.000000001;\r\n  static readonly EPSILON_10: number = 0.0000000001;\r\n  static readonly EPSILON_11: number = 0.00000000001;\r\n  static readonly EPSILON_12: number = 0.000000000001;\r\n  static readonly EPSILON_13: number = 0.0000000000001;\r\n  static readonly EPSILON_14: number = 0.00000000000001;\r\n  static readonly EPSILON_15: number = 0.000000000000001;\r\n  static readonly EPSILON_16: number = 0.0000000000000001;\r\n  static readonly EPSILON_17: number = 0.00000000000000001;\r\n  static readonly EPSILON_18: number = 0.000000000000000001;\r\n  static readonly EPSILON_19: number = 0.0000000000000000001;\r\n  static readonly EPSILON_20: number = 0.00000000000000000001;\r\n  static readonly EPSILON_21: number = 0.000000000000000000001;\r\n\r\n  static toRadians(degrees: number) {\r\n    return degrees * this.RADIANS_PER_DEGREE;\r\n  }\r\n\r\n  static magnitudeSquared(vec: Vector3) {\r\n    return vec.x * vec.x + vec.y * vec.y + vec.z * vec.z;\r\n  }\r\n\r\n  static magnitude(vec: Vector3) {\r\n    return Math.sqrt(this.magnitudeSquared(vec));\r\n  }\r\n\r\n  /**\r\n   * 절대 공차 검정 또는 상대 공차 검정을 사용하여 두 값이 같은지 여부를 확인합니다.\r\n   *\r\n   * @example\r\n   * MathUtils.equalsEpsilon(0.1, 0.01, MathUtils.EPSILON_01) // true\r\n   * MathUtils.equalsEpsilon(0.1, 0.01, MathUtils.EPSILON_02) // false\r\n   *\r\n   * @param left - The first value to compare.\r\n   * @param right - The other value to compare.\r\n   * @param relativeEpsilon\r\n   * @param absoluteEpsilon\r\n   * @returns\r\n   */\r\n  static equalsEpsilon(\r\n    left: number,\r\n    right: number,\r\n    relativeEpsilon: number = MathUtils.EPSILON_14,\r\n    absoluteEpsilon: number = MathUtils.EPSILON_14\r\n  ) {\r\n    const absDiff = Math.abs(left - right);\r\n    if (absDiff <= absoluteEpsilon) return true;\r\n    return (\r\n      absDiff <= relativeEpsilon * Math.max(Math.abs(left), Math.abs(right))\r\n    );\r\n  }\r\n\r\n  static Matrix4 = class {\r\n    static localWGS84ToMattrix4(\r\n      position: ThreeWGS84,\r\n      height: number,\r\n      result: Matrix4 = new Matrix4()\r\n    ) {\r\n      const matrix = Transforms.matrix4ToFixedFrame(\r\n        Cartesian3.fromDegree(position.longitude, position.latitude, height),\r\n\t\tnew Matrix4()\r\n      ).elements;\r\n\r\n      // prettier-ignore\r\n      return result.set(\r\n\t\t\t\tmatrix[ 0], matrix[ 4], matrix[ 8], matrix[12],\r\n\t\t\t\tmatrix[ 1], matrix[ 5], matrix[ 9], matrix[13],\r\n\t\t\t\tmatrix[ 2], matrix[ 6], matrix[10], matrix[14],\r\n\t\t\t\tmatrix[ 3], matrix[ 7], matrix[11], matrix[15]\r\n\t\t\t);\r\n    }\r\n\r\n    static fromTranslationQuaternionRotationScale(\r\n      translation: Cartesian3,\r\n      rotation: Quaternion,\r\n      scale: Cartesian3,\r\n      result: Matrix4 = new Matrix4()\r\n    ) {\r\n      const scaleX = scale.x;\r\n      const scaleY = scale.y;\r\n      const scaleZ = scale.z;\r\n\r\n      const x2 = rotation.x * rotation.x;\r\n      const xy = rotation.x * rotation.y;\r\n      const xz = rotation.x * rotation.z;\r\n      const xw = rotation.x * rotation.w;\r\n      const y2 = rotation.y * rotation.y;\r\n      const yz = rotation.y * rotation.z;\r\n      const yw = rotation.y * rotation.w;\r\n      const z2 = rotation.z * rotation.z;\r\n      const zw = rotation.z * rotation.w;\r\n      const w2 = rotation.w * rotation.w;\r\n\r\n      const m00 = x2 - y2 - z2 + w2;\r\n      const m01 = 2.0 * (xy - zw);\r\n      const m02 = 2.0 * (xz + yw);\r\n\r\n      const m10 = 2.0 * (xy + zw);\r\n      const m11 = -x2 + y2 - z2 + w2;\r\n      const m12 = 2.0 * (yz - xw);\r\n\r\n      const m20 = 2.0 * (xz - yw);\r\n      const m21 = 2.0 * (yz + xw);\r\n      const m22 = -x2 - y2 + z2 + w2;\r\n\r\n      // prettier-ignore\r\n      return result.set(\r\n\t\t\t\tm00 * scaleX, \tm10 * scaleX, \tm20 * scaleX, \t0.0,\r\n\t\t\t\tm01 * scaleY, \tm11 * scaleY, \tm21 * scaleY, \t0.0,\r\n\t\t\t\tm02 * scaleZ, \tm12 * scaleZ, \tm22 * scaleZ, \t0.0,\r\n\t\t\t\ttranslation.x, \ttranslation.y, \ttranslation.z,\t1.0,\r\n\t\t\t);\r\n    }\r\n  };\r\n}\r\n","import { Matrix4 } from 'three';\r\nimport { Ellipsoid } from './ellipsoid';\r\nimport { HeadingPitchRoll } from './heading-pitch-roll';\r\nimport { Cartesian3 } from './math/cartesian3';\r\nimport { MathUtils } from './math/math.utils';\r\nimport { Quaternion } from './quration';\r\n\r\nconst vectorProductLocalFrame = {\r\n\tup: {\r\n\t\tsouth: 'east',\r\n\t\tnorth: 'west',\r\n\t\twest: 'south',\r\n\t\teast: 'north',\r\n\t},\r\n\tdown: {\r\n\t\tsouth: 'west',\r\n\t\tnorth: 'east',\r\n\t\twest: 'north',\r\n\t\teast: 'south',\r\n\t},\r\n\tsouth: {\r\n\t\tup: 'west',\r\n\t\tdown: 'east',\r\n\t\twest: 'down',\r\n\t\teast: 'up',\r\n\t},\r\n\tnorth: {\r\n\t\tup: 'east',\r\n\t\tdown: 'west',\r\n\t\twest: 'up',\r\n\t\teast: 'down',\r\n\t},\r\n\twest: {\r\n\t\tup: 'north',\r\n\t\tdown: 'south',\r\n\t\tnorth: 'down',\r\n\t\tsouth: 'up',\r\n\t},\r\n\teast: {\r\n\t\tup: 'south',\r\n\t\tdown: 'north',\r\n\t\tnorth: 'up',\r\n\t\tsouth: 'down',\r\n\t},\r\n} as const;\r\n\r\ntype AxisFirst = keyof typeof vectorProductLocalFrame;\r\ntype AxisSecond<K extends AxisFirst> = keyof typeof vectorProductLocalFrame[K];\r\n\r\ntype FixedFrameTransformFunction = {\r\n\t(origin: Cartesian3): Matrix4;\r\n};\r\n\r\n// prettier-ignore\r\nconst degeneratePositionLocalFrame = {\r\n\tnorth: [-1,  0,  0],\r\n\teast:  [ 0,  1,  0],\r\n\tsouth: [ 1,  0,  0],\r\n\twest:  [ 0, -1,  0],\r\n\tup:    [ 0,  0,  1],\r\n\tdown:  [ 0,  0, -1],\r\n};\r\nconst scratchCalculateCartesian = {\r\n\teast: new Cartesian3(),\r\n\tnorth: new Cartesian3(),\r\n\tup: new Cartesian3(),\r\n\twest: new Cartesian3(),\r\n\tsouth: new Cartesian3(),\r\n\tdown: new Cartesian3(),\r\n};\r\n\r\nexport class Transforms {\r\n\tstatic localFrameToFixedFrameCache = new Map<\r\n\t\tstring,\r\n\t\tFixedFrameTransformFunction\r\n\t>();\r\n\r\n\tstatic localFrameToFixedFrameGenerator<K extends AxisFirst>(\r\n\t\tfirstAixs: K,\r\n\t\tsecondAxis: AxisSecond<K>\r\n\t) {\r\n\t\tconst axisHash = firstAixs + secondAxis;\r\n\r\n\t\tlet f = Transforms.localFrameToFixedFrameCache.get(axisHash);\r\n\r\n\t\tif (f) return f;\r\n\r\n\t\tconst thirdAxis = vectorProductLocalFrame[firstAixs][secondAxis];\r\n\r\n\t\tf = (origin: Cartesian3, result: Matrix4 = new Matrix4()) => {\r\n\t\t\tlet scratchFirstCartesian: Cartesian3;\r\n\t\t\tlet scratchSecondCartesian: Cartesian3;\r\n\t\t\tlet scratchThirdCartesian: Cartesian3;\r\n\r\n\t\t\tif (origin.isZero()) {\r\n\t\t\t\tscratchFirstCartesian = Cartesian3.unpack(\r\n\t\t\t\t\tdegeneratePositionLocalFrame[firstAixs]\r\n\t\t\t\t);\r\n\t\t\t\tscratchSecondCartesian = Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[secondAxis]\r\n\t\t\t\t);\r\n\t\t\t\tscratchThirdCartesian = Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[thirdAxis]\r\n\t\t\t\t);\r\n\t\t\t} else if (\r\n\t\t\t\tMathUtils.equalsEpsilon(origin.x, 0.0) &&\r\n\t\t\t\tMathUtils.equalsEpsilon(origin.y, 0.0)\r\n\t\t\t) {\r\n\t\t\t\tconst sign = Math.sign(origin.z);\r\n\t\t\t\tscratchFirstCartesian = Cartesian3.unpack(\r\n\t\t\t\t\tdegeneratePositionLocalFrame[firstAixs]\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (firstAixs !== 'east' && firstAixs !== 'west') {\r\n\t\t\t\t\tscratchFirstCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscratchSecondCartesian = Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[secondAxis]\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (secondAxis !== 'east' && secondAxis !== 'west') {\r\n\t\t\t\t\tscratchSecondCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\t\t\t\tscratchThirdCartesian = Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[thirdAxis]\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (thirdAxis !== 'east' && thirdAxis !== 'west') {\r\n\t\t\t\t\tscratchThirdCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tEllipsoid.getDefaultWGS84RadiiSquaredGeodticSurfaceNormal(\r\n\t\t\t\t\torigin,\r\n\t\t\t\t\tscratchCalculateCartesian.up\r\n\t\t\t\t)\r\n\r\n\t\t\t\tscratchCalculateCartesian.east.set(-origin.y, origin.x, 0.0);\r\n\t\t\t\tscratchCalculateCartesian.east.normalizeByMagnitude();\r\n\r\n\t\t\t\tscratchCalculateCartesian.north\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.up)\r\n\t\t\t\t\t.cross(scratchCalculateCartesian.east);\r\n\r\n\t\t\t\tscratchCalculateCartesian.down\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.up)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchCalculateCartesian.west\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.east)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchCalculateCartesian.south\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.north)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchFirstCartesian = scratchCalculateCartesian[firstAixs];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tscratchSecondCartesian = scratchCalculateCartesian[secondAxis];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tscratchThirdCartesian = scratchCalculateCartesian[thirdAxis];\r\n\t\t\t}\r\n\r\n\t\t\t// prettier-ignore\r\n\t\t\tresult.set(\r\n\t\t\t\tscratchFirstCartesian.x,    scratchSecondCartesian.x,   scratchThirdCartesian.x,    origin.x,\r\n\t\t\t\tscratchFirstCartesian.y,    scratchSecondCartesian.y,   scratchThirdCartesian.y,    origin.y,\r\n\t\t\t\tscratchFirstCartesian.z,    scratchSecondCartesian.z,   scratchThirdCartesian.z,    origin.z,\r\n\t\t\t\t0.0,                        0.0,                        0.0,                        0.0\r\n\t\t\t);\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tthis.localFrameToFixedFrameCache.set(axisHash, f);\r\n\r\n\t\treturn f;\r\n\t}\r\n\r\n\tstatic matrix4ToFixedFrame(\r\n\t\torigin: Cartesian3, \r\n\t\tmatrix: Matrix4, \r\n\t\tresult: Matrix4 = new Matrix4()\r\n\t) {\r\n\t\tconst eastNorthUpToFixedFrame =\r\n\t\t\tTransforms.localFrameToFixedFrameGenerator('east', 'north');\r\n\r\n\t\treturn result.copy(eastNorthUpToFixedFrame(origin)).multiply(matrix);\r\n\t}\r\n\r\n\tstatic headingPitchRollToFixedFrame(\r\n\t\torigin: Cartesian3,\r\n\t\theadingPitchRoll: HeadingPitchRoll = new HeadingPitchRoll(),\r\n\t\tresult: Matrix4 = new Matrix4()\r\n\t) {\r\n\t\tconst hprQuration = Quaternion.fromHeadingPitchRoll(headingPitchRoll);\r\n\t\t\r\n\t\tconst hprMatrix =\r\n\t\t\tMathUtils.Matrix4.fromTranslationQuaternionRotationScale(\r\n\t\t\t\tCartesian3.ZERO,\r\n\t\t\t\thprQuration,\r\n\t\t\t\tnew Cartesian3(1.0, 1.0, 1.0)\r\n\t\t\t);\r\n\t\t\r\n\t\treturn this.matrix4ToFixedFrame(origin, hprMatrix, result);\r\n\t}\r\n}\r\n","import { Vector3 } from 'three';\r\nimport { Cartesian3 } from './math/cartesian3';\r\n\r\nexport class Ellipsoid extends Vector3 {\r\n  private _oneOverRadiiSquared: Cartesian3;\r\n\r\n  constructor(x: number, y: number, z: number) {\r\n    super(x, y, z);\r\n    this._oneOverRadiiSquared = new Cartesian3(\r\n      this.x == 0.0 ? 0.0 : 1.0 / (this.x * this.x),\r\n      this.y == 0.0 ? 0.0 : 1.0 / (this.y * this.y),\r\n      this.z == 0.0 ? 0.0 : 1.0 / (this.z * this.z)\r\n    );\r\n  }\r\n\r\n  static get WGS84() {\r\n    return new Ellipsoid(6378137.0, 6378137.0, 6356752.3142451793);\r\n  }\r\n\r\n  static readonly DEFAULT_WGS84_RADII_SQUARED = Object.freeze(Ellipsoid.WGS84._oneOverRadiiSquared);\r\n  static getDefaultWGS84RadiiSquaredGeodticSurfaceNormal(\r\n    cartesian: Cartesian3,\r\n    result: Cartesian3 = new Cartesian3()\r\n  ) {\r\n    if (cartesian.isZero()) return;\r\n    return result\r\n\t\t.copy(cartesian)\r\n\t\t.multiply(this.DEFAULT_WGS84_RADII_SQUARED)\r\n\t\t.normalizeByMagnitude();\r\n  }\r\n\r\n  geodeticSurfaceNormal(\r\n    cartesian: Cartesian3,\r\n    result: Cartesian3 = new Cartesian3()\r\n  ) {\r\n    if (cartesian.isZero()) return;\r\n    return result\r\n      .copy(cartesian)\r\n      .multiply(this._oneOverRadiiSquared)\r\n      .normalizeByMagnitude();\r\n  }\r\n}\r\n","import { Vector3 } from 'three';\r\nimport { MathUtils } from './math.utils';\r\n\r\nexport class Cartesian3 extends Vector3 {\r\n  static get WGS84_RADII_SQUARED() {\r\n    return new Cartesian3(\r\n      40680631590769.0, // 6378137^2\r\n      40680631590769.0, // 6378137^2\r\n      40408299984661.445 // 6356752.3142451793^2\r\n    );\r\n  }\r\n\r\n  static get UINT_X() {\r\n    return new Cartesian3(1.0, 0.0, 0.0);\r\n  }\r\n\r\n  static get UINT_Y() {\r\n    return new Cartesian3(0.0, 1.0, 0.0);\r\n  }\r\n\r\n  static get UINT_Z() {\r\n    return new Cartesian3(0.0, 0.0, 1.0);\r\n  }\r\n\r\n  static get ZERO() {\r\n    return new Cartesian3(0, 0, 0);\r\n  }\r\n\r\n  normalizeByMagnitude() {\r\n    return this.divideScalar(MathUtils.magnitude(this));\r\n  }\r\n\r\n  static fromDegree(longitude: number, latitude: number, height: number) {\r\n    return this.fromRadians(\r\n      MathUtils.toRadians(longitude),\r\n      MathUtils.toRadians(latitude),\r\n      height\r\n    );\r\n  }\r\n\r\n  static fromRadians(longitude: number, latitude: number, height: number) {\r\n    const cosLatitude = Math.cos(latitude);\r\n\r\n    const cartesian = new Cartesian3(\r\n      cosLatitude * Math.cos(longitude),\r\n      cosLatitude * Math.sin(longitude),\r\n      Math.sin(latitude)\r\n    ).normalizeByMagnitude();\r\n\r\n    const WGS84_RADII_SQUARED =\r\n      Cartesian3.WGS84_RADII_SQUARED.multiply(cartesian);\r\n\r\n    const gamma = Math.sqrt(WGS84_RADII_SQUARED.dot(cartesian));\r\n\r\n    WGS84_RADII_SQUARED.divideScalar(gamma);\r\n\r\n    return cartesian.multiplyScalar(height).add(WGS84_RADII_SQUARED);\r\n  }\r\n\r\n  isZero() {\r\n    return Cartesian3.equalsEpsilon(this, Cartesian3.ZERO);\r\n  }\r\n\r\n  static unpack(\r\n    array: Array<number>,\r\n    startIndex: number = 0,\r\n    result: Cartesian3 = new Cartesian3()\r\n  ) {\r\n    return result.set(\r\n      array[startIndex++],\r\n      array[startIndex++],\r\n      array[startIndex]\r\n    );\r\n  }\r\n\r\n  static equalsEpsilon(\r\n    left: Cartesian3,\r\n    right: Cartesian3,\r\n    relativeEpsilon: number = MathUtils.EPSILON_14,\r\n    absoluteEpsilon: number = MathUtils.EPSILON_14\r\n  ) {\r\n    if (left.equals(right)) return true;\r\n    return (\r\n      MathUtils.equalsEpsilon(left.x, right.x, relativeEpsilon, absoluteEpsilon) &&\r\n      MathUtils.equalsEpsilon(left.y, right.y, relativeEpsilon, absoluteEpsilon) &&\r\n      MathUtils.equalsEpsilon(left.z, right.z, relativeEpsilon, absoluteEpsilon)\r\n    );\r\n  }\r\n}\r\n","import { Vector3 } from 'three';\r\n\r\nexport class HeadingPitchRoll extends Vector3 {\r\n\tconstructor(\r\n\t\theading: number = 0.0,\r\n\t\tpitch: number = 0.0,\r\n\t\troll: number = 0.0\r\n\t) {\r\n\t\tsuper(heading, pitch, roll);\r\n\t}\r\n\r\n\tget heading() {\r\n\t\treturn this.x;\r\n\t}\r\n\r\n\tget pitch() {\r\n\t\treturn this.y;\r\n\t}\r\n\r\n\tget roll() {\r\n\t\treturn this.z;\r\n\t}\r\n}\r\n","import { Vector4 } from 'three';\r\nimport { HeadingPitchRoll } from './heading-pitch-roll';\r\nimport { Cartesian3 } from './math/cartesian3';\r\n\r\nexport class Quaternion extends Vector4 {\r\n  private static _fromAxisAngleScratch = new Cartesian3();\r\n\r\n  static fromAxisAngle(\r\n    aixs: Cartesian3,\r\n    angle: number,\r\n    result: Quaternion = new Quaternion()\r\n  ) {\r\n    const halfAngle = angle / 2.0;\r\n\r\n    const halfAnlgOfSin = Math.sin(halfAngle);\r\n\r\n    this._fromAxisAngleScratch.copy(aixs).normalizeByMagnitude();\r\n\r\n    return result.set(\r\n      this._fromAxisAngleScratch.x * halfAnlgOfSin,\r\n      this._fromAxisAngleScratch.y * halfAnlgOfSin,\r\n      this._fromAxisAngleScratch.z * halfAnlgOfSin,\r\n      Math.cos(halfAngle)\r\n    );\r\n  }\r\n\r\n  private static _scratchHPRQuaternion = new Quaternion();\r\n  private static _scratchHeadingQuaternion = new Quaternion();\r\n  private static _scratchPitchQuaternion = new Quaternion();\r\n  private static _scratchRollQuaternion = new Quaternion();\r\n  static fromHeadingPitchRoll(\r\n    headingPitchRoll: HeadingPitchRoll,\r\n    result: Quaternion = new Quaternion()\r\n  ) {\r\n    this._scratchRollQuaternion = Quaternion.fromAxisAngle(\r\n      Cartesian3.UINT_X,\r\n      headingPitchRoll.roll,\r\n      this._scratchHPRQuaternion\r\n    );\r\n\r\n    result = Quaternion.fromAxisAngle(\r\n      Cartesian3.UINT_Y,\r\n      headingPitchRoll.pitch,\r\n      this._scratchPitchQuaternion\r\n    );\r\n\r\n    this._scratchPitchQuaternion.multiply(this._scratchRollQuaternion);\r\n\r\n    this._scratchHeadingQuaternion = Quaternion.fromAxisAngle(\r\n      Cartesian3.UINT_Z,\r\n      -headingPitchRoll.heading,\r\n      this._scratchHPRQuaternion\r\n    );\r\n\r\n    return result.copy(\r\n      new Quaternion().copy(this._scratchHeadingQuaternion).multiply(result)\r\n    );\r\n  }\r\n}\r\n","import { Viewer } from 'cesium';\r\nimport { RenderParam } from '../core/graphic/graphic.component';\r\nimport { SingletonWorkerFactory } from '../core/worker-factory';\r\nimport { Math as CesiumMath, PerspectiveFrustum } from 'cesium';\r\nimport { RequestType } from '../core/core-thread';\r\n\r\nexport class ObjectRenderer {\r\n\tprivate readonly coreWorker =\r\n\t\tSingletonWorkerFactory.getWorker('CoreThread');\r\n\tprivate readonly coreWrapper =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tconstructor(private readonly viewer: Viewer) {\r\n\t\tthis.coreWrapper.setPixelRatio(window.devicePixelRatio);\r\n\t\tthis.coreWrapper.initCamera({\r\n\t\t\tfov: CesiumMath.toDegrees(\r\n\t\t\t\t(this.viewer.camera.frustum as PerspectiveFrustum).fovy\r\n\t\t\t),\r\n\t\t\tnear: this.viewer.camera.frustum.near,\r\n\t\t\tfar: this.viewer.camera.frustum.far,\r\n\t\t\taspect:\r\n\t\t\t\tthis.viewer.container.clientWidth /\r\n\t\t\t\tthis.viewer.container.clientHeight,\r\n\t\t});\r\n\t}\r\n\r\n\tsetSize(width: number, height: number) {\r\n\t\treturn this.coreWrapper.setSize(width, height);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst cvm = new Float32Array(this.viewer.camera.viewMatrix);\r\n\t\tconst civm = new Float32Array(this.viewer.camera.inverseViewMatrix);\r\n\t\tthis.coreWorker.postMessage(\r\n\t\t\t{\r\n\t\t\t\ttype: RequestType.RENDER,\r\n\t\t\t\tparam: {\r\n\t\t\t\t\tcvm: cvm,\r\n\t\t\t\t\tcivm: civm,\r\n\t\t\t\t\theight: this.viewer.container.clientHeight,\r\n\t\t\t\t\twidth: this.viewer.container.clientWidth\r\n\t\t\t\t} as RenderParam,\r\n\t\t\t},\r\n\t\t\t[cvm.buffer, civm.buffer]\r\n\t\t);\r\n\t}\r\n}\r\n","import { Box3, Object3D } from 'three';\r\nimport { CesiumWGS84 } from '..';\r\nimport { SingletonWorkerFactory } from '../core/worker-factory';\r\nimport { Utils } from '../utils';\r\nimport { ObjectAPI } from './object.api';\r\n\r\nexport interface RequestResult {\r\n\tobjectId: number;\r\n\tresult: boolean;\r\n}\r\n\r\nexport class ObjectManager {\r\n\tprivate readonly coreWrapper =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tprivate _calcBox3(object: Object3D) {\r\n\t\treturn new Box3().setFromObject(object).max;\r\n\t}\r\n\r\n\tasync add(object: Object3D, position?: CesiumWGS84): Promise<ObjectAPI> {\r\n\t\tposition = position ? Utils.CesiumWGS84ToThreeWGS84(position) : position\r\n\t\tconst id = await this.coreWrapper.add(object.toJSON(), position);\r\n\t\treturn new ObjectAPI(id);\r\n\t}\r\n\r\n\tasync get(id: number) {\r\n\t\tif (await this.coreWrapper.isExist(id)) {\r\n\t\t\treturn new ObjectAPI(id);\r\n\t\t}\r\n\t}\r\n\r\n\tasync updateObject(id: number, object: Object3D): Promise<RequestResult> {\r\n\t\tthis._calcBox3(object);\r\n\t\treturn {\r\n\t\t\tobjectId: id,\r\n\t\t\tresult: await this.coreWrapper.update(id, object.toJSON()),\r\n\t\t};\r\n\t}\r\n}\r\n","import * as Cesium from 'cesium';\r\nimport * as THREE from 'three';\r\nimport { CesiumWGS84, ThreeWGS84 } from './interface';\r\n\r\nexport class Utils {\r\n\tstatic randomOffset() {\r\n\t\treturn Math.floor(Math.random() * 10000) * 0.000001;\r\n\t}\r\n\tstatic CesiumWGS84ToThreeWGS84(cesiumWGS84: CesiumWGS84): ThreeWGS84 {\r\n\t\treturn {\r\n\t\t\tlatitude: cesiumWGS84.longitude,\r\n\t\t\tlongitude: cesiumWGS84.latitude,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic ThreeWGS84ToCesiumWGS84(ThreeWGS84: ThreeWGS84): CesiumWGS84 {\r\n\t\treturn {\r\n\t\t\tlatitude: ThreeWGS84.longitude,\r\n\t\t\tlongitude: ThreeWGS84.latitude,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getWindowPosition(viewer: Cesium.Viewer) {\r\n\t\treturn new Cesium.Cartesian2(\r\n\t\t\tviewer.canvas.clientWidth / 2.0,\r\n\t\t\tviewer.canvas.clientHeight / 2.0\r\n\t\t);\r\n\t}\r\n\r\n\tstatic getPosition(\r\n\t\tviewer: Cesium.Viewer,\r\n\t\twindowPosition: Cesium.Cartesian2\r\n\t) {\r\n\t\tconst result = viewer.camera.pickEllipsoid(windowPosition);\r\n\t\tif (result) {\r\n\t\t\treturn viewer.scene.globe.ellipsoid.cartesianToCartographic(result);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getWGS84FromCartographic(cartographic: Cesium.Cartographic) {\r\n\t\treturn {\r\n\t\t\tlat: (cartographic.latitude * 180) / Math.PI,\r\n\t\t\tlon: (cartographic.longitude * 180) / Math.PI,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getCurrentCenterPosition(viewer: Cesium.Viewer) {\r\n\t\treturn this.getPosition(viewer, this.getWindowPosition(viewer));\r\n\t}\r\n\r\n\tstatic getCurrentCenterHeight(viewer: Cesium.Viewer) {\r\n\t\treturn this.getCurrentCenterPosition(viewer)?.height;\r\n\t}\r\n\r\n\tstatic rotationX(degrees: number) {\r\n\t\treturn new THREE.Matrix4().makeRotationX(\r\n\t\t\tCesium.Math.toRadians(degrees)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic applayRotation(object: THREE.BufferGeometry, degrees: number) {\r\n\t\tobject.applyMatrix4(this.rotationX(degrees));\r\n\t}\r\n}\r\n","export class CesiumWGS84 {\r\n\tconstructor(public longitude: number, public latitude: number) {}\r\n}\r\n\r\nexport class ThreeWGS84 {\r\n\tconstructor(public longitude: number, public latitude: number) {}\r\n}\r\n","import { CesiumWGS84, Utils } from '..';\r\nimport { Cartesian3 } from '../core/math/cartesian3';\r\nimport { SingletonWorkerFactory } from '../core/worker-factory';\r\n\r\nexport class ObjectAPI {\r\n\treadonly id: number;\r\n\tprivate readonly _coreThread =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tconstructor(id: number) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tgetUserData(key: string) {\r\n\t\treturn this._coreThread.getUserDataAt(this.id, key);\r\n\t}\r\n\r\n\tsetUserData(key: string, value: any) {\r\n\t\treturn this._coreThread.setUserDataAt(this.id, key, value);\r\n\t}\r\n\r\n\thide(): Promise<boolean> {\r\n\t\treturn this._coreThread.hide(this.id);\r\n\t}\r\n\r\n\tshow(): Promise<boolean> {\r\n\t\treturn this._coreThread.show(this.id);\r\n\t}\r\n\r\n\tsetPosition(position: CesiumWGS84): Promise<boolean> {\r\n\t\tconst threeWGS84 = Utils.CesiumWGS84ToThreeWGS84(position);\r\n\t\treturn this._coreThread.updatePosition(this.id, threeWGS84);\r\n\t}\r\n\r\n\tasync getPosition(): Promise<CesiumWGS84 | undefined> {\r\n\t\tconst position = await this._coreThread.getWGS84(this.id);\r\n\t\tif (position) {\r\n\t\t\treturn Utils.ThreeWGS84ToCesiumWGS84(position!);\r\n\t\t}\r\n\t}\r\n\r\n\tdispose(): Promise<boolean> {\r\n\t\treturn this._coreThread.delete(this.id);\r\n\t}\r\n\r\n\tisDisposed(): Promise<boolean> {\r\n\t\treturn this._coreThread.isExist(this.id);\r\n\t}\r\n}\r\n","import * as Cesium from 'cesium';\r\nimport { Utils } from '..';\r\nimport { SingletonWorkerFactory } from '../core/worker-factory';\r\n\r\nexport class ObjectUtil {\r\n\tprivate readonly coreWrapper =\r\n\t\tSingletonWorkerFactory.getWrapper('CoreThread');\r\n\r\n\tconstructor(private readonly viewer: Cesium.Viewer) {}\r\n\r\n\tasync flyTo(id: number) {\r\n\t\tlet position = await this.coreWrapper.getWGS84(id);\r\n\t\tif (position) {\r\n\t\t\tposition = Utils.ThreeWGS84ToCesiumWGS84(position);\r\n\t\t\tconst wgs84Position = Cesium.Cartesian3.fromDegrees(\r\n\t\t\t\tposition.latitude,\r\n\t\t\t\tposition.longitude,\r\n\t\t\t\t0\r\n\t\t\t);\r\n\t\t\tconst result = await this.coreWrapper.getBox3(id);\r\n\t\t\tconst radius = result ? result.z * 2 : undefined;\r\n\t\t\tthis.viewer.camera.flyToBoundingSphere(\r\n\t\t\t\tnew Cesium.BoundingSphere(wgs84Position, radius)\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n","export * from './EarthGeometry';\r\n","import { SphereGeometry } from 'three';\r\nimport { EARTH_RADIUS } from '../../constants';\r\n\r\nclass EarthGeometry extends SphereGeometry {\r\n\tconstructor(segments: number = 32) {\r\n\t\tsuper(EARTH_RADIUS, segments, segments);\r\n\t}\r\n}\r\n\r\nexport { EarthGeometry };\r\n","import { PlaneGeometry, BoxGeometry } from 'three';\r\nimport { TeapotGeometry } from 'three/examples/jsm/geometries/TeapotGeometry';\r\nimport { Utils } from './utils';\r\n\r\nexport function makeTeapotGeometry(teapotSize: number = 10) {\r\n\tconst teapotGeometry = new TeapotGeometry(teapotSize);\r\n\tUtils.applayRotation(teapotGeometry, 90);\r\n\treturn teapotGeometry;\r\n}\r\n\r\nexport function makeBoxGeometry(boxSize = 1000) {\r\n\tconst geometry = new BoxGeometry(boxSize, boxSize, boxSize);\r\n\treturn geometry;\r\n}\r\n\r\nexport function makePlaneGeometry(w: number, h: number) {\r\n\tconst geometry = new PlaneGeometry(w, h);\r\n\t// Utils.applayRotation(geometry, 90);\r\n\treturn geometry;\r\n}\r\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../"}