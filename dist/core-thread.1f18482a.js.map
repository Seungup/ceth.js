{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;MCgBa,yCAAO;gBAIT,KAAK,GAAG,GAAG,CAAC,YAAW,GAC/B,CAAC;aADO,KAAK,GAAL,KAAK;QAEd,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,wBAAiB;IACpC,CAAC;WAEM,WAAW,GAAG,CAAC;QACrB,MAAM,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI;IAClD,CAAC;IAED,aAAa,CAAC,KAAa,EAAW,CAAC;QACtC,GAAG,CAAC,OAAO,GAAG,KAAK;QACnB,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK;YACjC,OAAO,GAAG,IAAI;QACf,CAAC;QACD,MAAM,CAAC,OAAO;IACf,CAAC;IAGD,IAAI,CAAC,MAAyB,EAAE,CAAC;QAChC,KAAK,CAAC,MAAM,GAA4B,CAAC;YACxC,MAAM,EAAE,MAAM;YACd,eAAe,EAAE,CAAkB;YACnC,KAAK,EAAE,IAAI;YACX,SAAS,EAAE,IAAI;YACf,sBAAsB,EAAE,IAAI;YAC5B,KAAK,EAAE,KAAK;QACb,CAAC;QAED,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,CAAQ;QAC1C,EAAE,EAAE,OAAO,EACV,MAAM,CAAC,OAAO,GAAG,OAAO;QAGzB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,oBAAmB,CAAC,MAAM;QAC9C,OAAO,CAAC,GAAG,EACT,4BAA4B,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ;IAEpE,CAAC;IAED,OAAO,CAAC,KAAa,EAAE,MAAc,EAAE,CAAC;QACvC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,GAAG,MAAM;QACnC,IAAI,CAAC,MAAM,CAAC,sBAAsB;QAClC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK;IAC5C,CAAC;IAED,EAGG,AAHH,0DAGG,AAHH,EAGG,CACH,MAAM,CAAC,KAAkB,EAAE,CAAC;QAC3B,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;YAEnB,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,KAAK;YAEpC,EAAkB,AAAlB,gBAAkB;YAClB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,CAC1B,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAC7D,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAC7D,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAC7D,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YAE9D,EAAkB,AAAlB,gBAAkB;YAClB,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,GAAG,CACjC,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GACzD,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GACzD,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GACzD,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE;YAE1D,IAAI,CAAC,MAAM,CAAC,sBAAsB;YAClC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM;QAC7C,CAAC;IACF,CAAC;;;;;;;;;;MCtFW,yCAAW;IAUvB,EAEG,AAFH,yCAEG,AAFH,EAEG,CACK,yBAAyB,GAAG,CAAC;QACpC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG;QAC5B,EAAE,EAAE,IAAI,CAAC,KAAK,EACb,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK;QAE/B,IAAI,CAAC,OAAO,GAAG,qBAAqB,CACnC,IAAI,CAAC,6BAA6B;QAEnC,IAAI,CAAC,cAAc,CAAC,IAAI;IACzB,CAAC;IAED,EAGG,AAHH,qFAGG,AAHH,EAGG,CACH,wBAAwB,CAAC,KAAkB,EAAE,CAAC;QAC7C,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,EACrB,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK;aAEtB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK;QAGvB,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,yBAAyB;IAClD,CAAC;;QApCK,IAqCN,CApCiB,MAAM,GAAkB,CAAC,CAAC;QADrC,IAqCN,CAnCiB,OAAO,GAAG,0DAAO,CAAC,WAAW;QAFxC,IAqCN,CAhCiB,6BAA6B,GAC7C,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI;QANnC,IAqCN,CA9BiB,cAAc,GAAG,GAAG,CAAC,0DAAO;QAPvC,IAqCN,CA7BS,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI;;;;;;;;;;;;;;;AGd9C,KAAK,CAAC,yCAAQ,GAAG,CAAM;AACvB,KAAK,CAAC,yCAAc,GAAG,OAAS;AAChC,KAAK,CAAC,yCAAc,GAAG,OAAS;AAChC,KAAK,CAAC,yCAAc,GAAG,iBAAkB;AACzC,KAAK,CAAC,yCAAqB,GAAG,cAAgB;AAC9C,KAAK,CAAC,yCAAqB,GAAG,cAAgB;AAC9C,KAAK,CAAC,yCAAqB,GAAG,kBAAkB;;;;;;MEN1C,yCAAS;WAuBb,SAAS,CAAC,OAAe,EAAE,CAAC;QACjC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAkB;IAC1C,CAAC;WAEM,YAAY,GAAG,CAAC;QACvB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,KAAK,KAAK,IAAI,QAAQ;IACpD,CAAC;IAGA,EAYG,AAZH,idAYG,AAZH,EAYG,QACI,aAAa,CAClB,IAAY,EACZ,KAAa,EACb,eAAuB,GAAG,IAAI,CAAC,UAAU,EACzC,eAAuB,GAAG,IAAI,CAAC,UAAU,EACzC,CAAC;QACD,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK;QACrC,EAAE,EAAE,OAAO,IAAI,eAAe,EAAE,MAAM,CAAC,IAAI;QAC3C,MAAM,CACJ,OAAO,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK;IAExE,CAAC;WAEM,SAAS,CAAC,GAAwC,EAAE,CAAC;QAC1D,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;IAChE,CAAC;;AA5DU,yCAAS,CACJ,kBAAkB,GAAG,IAAI,CAAC,EAAE,GAAG,GAAK;AADzC,yCAAS,CAEJ,UAAU,GAAW,GAAG;AAF7B,yCAAS,CAGJ,UAAU,GAAW,IAAI;AAH9B,yCAAS,CAIJ,UAAU,GAAW,KAAK;AAJ/B,yCAAS,CAKJ,UAAU,GAAW,MAAM;AALhC,yCAAS,CAMJ,UAAU,GAAW,OAAO;AANjC,yCAAS,CAOJ,UAAU,GAAW,QAAQ;AAPlC,yCAAS,CAQJ,UAAU,GAAW,SAAS;AARnC,yCAAS,CASJ,UAAU,GAAW,UAAU;AATpC,yCAAS,CAUJ,UAAU,GAAW,WAAW;AAVrC,yCAAS,CAWJ,UAAU,GAAW,YAAY;AAXtC,yCAAS,CAYJ,UAAU,GAAW,aAAa;AAZvC,yCAAS,CAaJ,UAAU,GAAW,cAAc;AAbxC,yCAAS,CAcJ,UAAU,GAAW,eAAe;AAdzC,yCAAS,CAeJ,UAAU,GAAW,gBAAgB;AAf1C,yCAAS,CAgBJ,UAAU,GAAW,iBAAiB;AAhB3C,yCAAS,CAiBJ,UAAU,GAAW,kBAAkB;AAjB5C,yCAAS,CAkBJ,UAAU,GAAW,mBAAmB;AAlB7C,yCAAS,CAmBJ,UAAU,GAAW,oBAAoB;AAnB9C,yCAAS,CAoBJ,UAAU,GAAW,qBAAqB;AApB/C,yCAAS,CAqBJ,UAAU,GAAW,sBAAsB;AArBhD,yCAAS,CAsBJ,UAAU,GAAW,uBAAuB;;;;;;;;;;;;;;;;;MHnBjD,yCAAa,SAAS,cAAO;eAC7B,mBAAmB,GAAG,CAAC;QAChC,MAAM,CAAC,GAAG,CAAC,yCAAa,CACtB,yCAAqB,EACrB,yCAAqB,EACrB,yCAAqB;IAEzB,CAAC;eAEU,MAAM,GAAG,CAAC;QACnB,MAAM,CAAC,GAAG,CAAC,yCAAa,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG;IACxC,CAAC;eAEU,MAAM,GAAG,CAAC;QACnB,MAAM,CAAC,GAAG,CAAC,yCAAa,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG;IACxC,CAAC;eAEU,MAAM,GAAG,CAAC;QACnB,MAAM,CAAC,GAAG,CAAC,yCAAa,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG;IACxC,CAAC;eAEU,IAAI,GAAG,CAAC;QACjB,MAAM,CAAC,GAAG,CAAC,yCAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAClC,CAAC;WAEM,WAAW,CAAC,SAAiB,EAAE,QAAgB,EAAE,MAAc,EAAE,CAAC;QACvE,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ;QAErC,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC,yCAAa,CACjC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAChC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAChC,IAAI,CAAC,GAAG,CAAC,QAAQ,GACjB,oBAAoB;QAEtB,KAAK,CAAC,mBAAmB,GAAG,yCAAa,CAAC,mBAAmB,CAAC,QAAQ,CAAC,SAAS;QAEhF,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,SAAS;QAEzD,mBAAmB,CAAC,YAAY,CAAC,KAAK;QAEtC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,CAAC,mBAAmB;IACjE,CAAC;WAEM,UAAU,CAAC,SAAiB,EAAE,QAAgB,EAAE,MAAc,EAAE,CAAC;QACtE,MAAM,CAAC,IAAI,CAAC,WAAW,CACrB,yCAAS,CAAC,SAAS,CAAC,SAAS,GAC7B,yCAAS,CAAC,SAAS,CAAC,QAAQ,GAC5B,MAAM;IAEV,CAAC;WAEM,aAAa,CAClB,IAAmB,EACnB,KAAoB,EACpB,eAAuB,GAAG,yCAAS,CAAC,UAAU,EAC9C,eAAuB,GAAG,yCAAS,CAAC,UAAU,EAC9C,CAAC;QACD,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI;QACnC,MAAM,CACJ,yCAAS,CAAC,aAAa,CACrB,IAAI,CAAC,CAAC,EACN,KAAK,CAAC,CAAC,EACP,eAAe,EACf,eAAe,KAEjB,yCAAS,CAAC,aAAa,CACrB,IAAI,CAAC,CAAC,EACN,KAAK,CAAC,CAAC,EACP,eAAe,EACf,eAAe,KAEjB,yCAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,eAAe,EAAE,eAAe;IAE7E,CAAC;IAED,oBAAoB,GAAG,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,yCAAS,CAAC,SAAS,CAAC,IAAI;IACnD,CAAC;IAED,MAAM,GAAG,CAAC;QACR,MAAM,CAAC,yCAAa,CAAC,aAAa,CAAC,IAAI,EAAE,yCAAa,CAAC,IAAI;IAC7D,CAAC;WAEM,MAAM,CACX,KAAoB,EACpB,UAAkB,GAAG,CAAC,EACtB,MAAqB,GAAG,GAAG,CAAC,yCAAa,IACzC,CAAC;QACD,MAAM,CAAC,MAAM,CAAC,GAAG,CACf,KAAK,CAAC,UAAU,KAChB,KAAK,CAAC,UAAU,KAChB,KAAK,CAAC,UAAU;IAEpB,CAAC;;;;;;;;;;MI5FU,yCAAY,SAAS,cAAO;gBAG3B,CAAS,EAAE,CAAS,EAAE,CAAS,CAAE,CAAC;QAC5C,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;QACb,IAAI,CAAC,oBAAoB,GAAG,GAAG,CAAC,yCAAa,CAC3C,IAAI,CAAC,CAAC,IAAI,CAAG,GAAG,CAAG,GAAG,CAAG,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAC5C,IAAI,CAAC,CAAC,IAAI,CAAG,GAAG,CAAG,GAAG,CAAG,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAC5C,IAAI,CAAC,CAAC,IAAI,CAAG,GAAG,CAAG,GAAG,CAAG,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;IAEhD,CAAC;eAEU,KAAK,GAAG,CAAC;QAClB,MAAM,CAAC,GAAG,CAAC,yCAAY,CAAC,yCAAc,EAAE,yCAAc,EAAE,yCAAc;IACxE,CAAC;WAGM,+CAA+C,CACpD,SAAwB,EACxB,MAAqB,GAAG,GAAG,CAAC,yCAAa,IACzC,CAAC;QACD,EAAE,EAAE,SAAS,CAAC,MAAM,IAAI,MAAM;QAC9B,MAAM,CAAC,MAAM,CACd,IAAI,CAAC,SAAS,EACd,QAAQ,CAAC,IAAI,CAAC,2BAA2B,EACzC,oBAAoB;IACrB,CAAC;IAED,qBAAqB,CACnB,SAAwB,EACxB,MAAqB,GAAG,GAAG,CAAC,yCAAa,IACzC,CAAC;QACD,EAAE,EAAE,SAAS,CAAC,MAAM,IAAI,MAAM;QAC9B,MAAM,CAAC,MAAM,CACV,IAAI,CAAC,SAAS,EACd,QAAQ,CAAC,IAAI,CAAC,oBAAoB,EAClC,oBAAoB;IACzB,CAAC;;AArCU,yCAAY,CAgBP,2BAA2B,GAAG,MAAM,CAAC,MAAM,CAhBhD,yCAAY,CAgBkD,KAAK,CAAC,oBAAoB;;;;;;;;;MChBxF,yCAAU,SAAS,cAAO;WAC9B,aAAa,CAAC,OAAe,EAAE,MAAe,GAAG,GAAG,CAAC,cAAO,IAAI,CAAC;QACtE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,yCAAS,CAAC,SAAS,CAAC,OAAO;IACzD,CAAC;WAEM,SAAS,CACd,SAAiB,EACjB,QAAgB,EAChB,MAAc,EACd,MAAe,GAAG,GAAG,CAAC,cAAO,IAC7B,CAAC;QACD,KAAK,CAAC,MAAM,GAAG,yCAAa,CAAC,mBAAmB,CAC9C,yCAAa,CAAC,UAAU,CAAC,SAAS,EAAE,QAAQ,EAAE,MAAM,GACpD,GAAG,CAAC,cAAO,IACX,QAAQ;QAEV,EAAkB,AAAlB,gBAAkB;QAClB,MAAM,CAAC,MAAM,CAAC,GAAG,CACb,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE;IAEnD,CAAC;WAEM,sCAAsC,CAC3C,WAA0B,EAC1B,QAAuB,EACvB,KAAoB,EACpB,MAAkB,GAAG,GAAG,CAAC,yCAAU,IACnC,CAAC;QACD,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;QACtB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;QACtB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;QAEtB,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAClC,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAElC,KAAK,CAAC,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;QAC7B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAC1B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAE1B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAC1B,KAAK,CAAC,GAAG,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;QAC9B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAE1B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAC1B,KAAK,CAAC,GAAG,GAAG,CAAG,IAAI,EAAE,GAAG,EAAE;QAC1B,KAAK,CAAC,GAAG,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;QAE9B,EAAkB,AAAlB,gBAAkB;QAClB,MAAM,CAAC,MAAM,CAAC,GAAG,CACb,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,CAAG,EAChD,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,CAAG,EAChD,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,GAAG,GAAG,MAAM,EAAG,CAAG,EAChD,WAAW,CAAC,CAAC,EAAG,WAAW,CAAC,CAAC,EAAG,WAAW,CAAC,CAAC,EAAE,CAAG;IAExD,CAAC;;;;;;;;;MClEU,yCAAa,SAAS,cAAO;WAIjC,aAAa,CAClB,IAAmB,EACnB,KAAa,EACb,MAAqB,GAAG,GAAG,CAAC,yCAAa,IACzC,CAAC;QACD,KAAK,CAAC,SAAS,GAAG,KAAK,GAAG,CAAG;QAE7B,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS;QAExC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,EAAE,oBAAoB;QAE1D,MAAM,CAAC,MAAM,CAAC,GAAG,CACf,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,aAAa,EAC5C,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,aAAa,EAC5C,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,aAAa,EAC5C,IAAI,CAAC,GAAG,CAAC,SAAS;IAEtB,CAAC;WAQM,oBAAoB,CACzB,OAAe,EACf,KAAa,EACb,IAAY,EACZ,MAAqB,GAAG,GAAG,CAAC,yCAAa,IACzC,CAAC;QACD,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,aAAa,CAC9C,yCAAa,CAAC,MAAM,EACpB,IAAI,EACJ,IAAI,CAAC,qBAAqB;QAG5B,MAAM,GAAG,IAAI,CAAC,aAAa,CACzB,yCAAa,CAAC,MAAM,EACpB,KAAK,EACL,IAAI,CAAC,uBAAuB;QAG9B,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB;QAEjE,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,aAAa,CACjD,yCAAa,CAAC,MAAM,GACnB,OAAO,EACR,IAAI,CAAC,qBAAqB;QAG5B,MAAM,CAAC,MAAM,CAAC,IAAI,CAChB,GAAG,CAAC,yCAAa,GAAG,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE,QAAQ,CAAC,MAAM;IAE5E,CAAC;;AA1DU,yCAAa,CAET,qBAAqB,GAAG,GAAG,CAAC,yCAAa;AAF7C,yCAAa,CAwBT,qBAAqB,GAAG,GAAG,CAxB/B,yCAAa;AAAb,yCAAa,CAyBT,yBAAyB,GAAG,GAAG,CAzBnC,yCAAa;AAAb,yCAAa,CA0BT,uBAAuB,GAAG,GAAG,CA1BjC,yCAAa;AAAb,yCAAa,CA2BT,sBAAsB,GAAG,GAAG,CA3BhC,yCAAa;;;;;;;;;;;;ACI1B,KAAK,CAAC,6CAAuB,GAAG,CAAC;IAChC,EAAE,EAAE,CAAC;QACJ,KAAK,EAAE,CAAM;QACb,KAAK,EAAE,CAAM;QACb,IAAI,EAAE,CAAO;QACb,IAAI,EAAE,CAAO;IACd,CAAC;IACD,IAAI,EAAE,CAAC;QACN,KAAK,EAAE,CAAM;QACb,KAAK,EAAE,CAAM;QACb,IAAI,EAAE,CAAO;QACb,IAAI,EAAE,CAAO;IACd,CAAC;IACD,KAAK,EAAE,CAAC;QACP,EAAE,EAAE,CAAM;QACV,IAAI,EAAE,CAAM;QACZ,IAAI,EAAE,CAAM;QACZ,IAAI,EAAE,CAAI;IACX,CAAC;IACD,KAAK,EAAE,CAAC;QACP,EAAE,EAAE,CAAM;QACV,IAAI,EAAE,CAAM;QACZ,IAAI,EAAE,CAAI;QACV,IAAI,EAAE,CAAM;IACb,CAAC;IACD,IAAI,EAAE,CAAC;QACN,EAAE,EAAE,CAAO;QACX,IAAI,EAAE,CAAO;QACb,KAAK,EAAE,CAAM;QACb,KAAK,EAAE,CAAI;IACZ,CAAC;IACD,IAAI,EAAE,CAAC;QACN,EAAE,EAAE,CAAO;QACX,IAAI,EAAE,CAAO;QACb,KAAK,EAAE,CAAI;QACX,KAAK,EAAE,CAAM;IACd,CAAC;AACF,CAAC;AASD,EAAkB,AAAlB,gBAAkB;AAClB,KAAK,CAAC,kDAA4B,GAAG,CAAC;IACrC,KAAK,EAAE,CAAC;AAAA,UAAE;AAAG,SAAC;AAAG,SAAC;IAAA,CAAC;IACnB,IAAI,EAAG,CAAC;AAAC,SAAC;AAAG,SAAC;AAAG,SAAC;IAAA,CAAC;IACnB,KAAK,EAAE,CAAC;AAAC,SAAC;AAAG,SAAC;AAAG,SAAC;IAAA,CAAC;IACnB,IAAI,EAAG,CAAC;AAAC,SAAC;AAAE,UAAE;AAAG,SAAC;IAAA,CAAC;IACnB,EAAE,EAAK,CAAC;AAAC,SAAC;AAAG,SAAC;AAAG,SAAC;IAAA,CAAC;IACnB,IAAI,EAAG,CAAC;AAAC,SAAC;AAAG,SAAC;AAAE,UAAE;IAAA,CAAC;AACpB,CAAC;AACD,KAAK,CAAC,+CAAyB,GAAG,CAAC;IAClC,IAAI,EAAE,GAAG,CAAC,yCAAa;IACvB,KAAK,EAAE,GAAG,CAAC,yCAAa;IACxB,EAAE,EAAE,GAAG,CAAC,yCAAa;IACrB,IAAI,EAAE,GAAG,CAAC,yCAAa;IACvB,KAAK,EAAE,GAAG,CAAC,yCAAa;IACxB,IAAI,EAAE,GAAG,CAAC,yCAAa;AACxB,CAAC;MAEY,yCAAa;WAMlB,+BAA+B,CACrC,SAAY,EACZ,UAAyB,EACxB,CAAC;QACF,KAAK,CAAC,QAAQ,GAAG,SAAS,GAAG,UAAU;QAEvC,GAAG,CAAC,CAAC,GAAG,yCAAa,CAAC,2BAA2B,CAAC,GAAG,CAAC,QAAQ;QAE9D,EAAE,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;QAEf,KAAK,CAAC,SAAS,GAAG,6CAAuB,CAAC,SAAS,EAAE,UAAU;QAE/D,CAAC,IAAI,MAAqB,EAAE,MAAe,GAAG,GAAG,CAAC,cAAO,KAAO,CAAC;YAChE,GAAG,CAAC,qBAAqB;YACzB,GAAG,CAAC,sBAAsB;YAC1B,GAAG,CAAC,qBAAqB;YAEzB,EAAE,EAAE,MAAM,CAAC,MAAM,IAAI,CAAC;gBACrB,qBAAqB,GAAG,yCAAa,CAAC,MAAM,CAC3C,kDAA4B,CAAC,SAAS;gBAEvC,sBAAsB,GAAG,yCAAa,CAAC,MAAM,CAC5C,EAAa,AAAb,WAAa;gBACb,kDAA4B,CAAC,UAAU;gBAExC,qBAAqB,GAAG,yCAAa,CAAC,MAAM,CAC3C,EAAa,AAAb,WAAa;gBACb,kDAA4B,CAAC,SAAS;YAExC,CAAC,MAAM,EAAE,EACR,yCAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,EAAE,CAAG,KACrC,yCAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,EAAE,CAAG,GACpC,CAAC;gBACF,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC/B,qBAAqB,GAAG,yCAAa,CAAC,MAAM,CAC3C,kDAA4B,CAAC,SAAS;gBAGvC,EAAE,EAAE,SAAS,KAAK,CAAM,SAAI,SAAS,KAAK,CAAM,OAC/C,qBAAqB,CAAC,cAAc,CAAC,IAAI;gBAG1C,sBAAsB,GAAG,yCAAa,CAAC,MAAM,CAC5C,EAAa,AAAb,WAAa;gBACb,kDAA4B,CAAC,UAAU;gBAGxC,EAAE,EAAE,UAAU,KAAK,CAAM,SAAI,UAAU,KAAK,CAAM,OACjD,sBAAsB,CAAC,cAAc,CAAC,IAAI;gBAE3C,qBAAqB,GAAG,yCAAa,CAAC,MAAM,CAC3C,EAAa,AAAb,WAAa;gBACb,kDAA4B,CAAC,SAAS;gBAGvC,EAAa,AAAb,WAAa;gBACb,EAAE,EAAE,SAAS,KAAK,CAAM,SAAI,SAAS,KAAK,CAAM,OAC/C,qBAAqB,CAAC,cAAc,CAAC,IAAI;YAE3C,CAAC,MAAM,CAAC;gBACP,yCAAY,CAAC,+CAA+C,CAC3D,MAAM,EACN,+CAAyB,CAAC,EAAE;gBAG7B,+CAAyB,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,CAAG,EAAE,oBAAoB;gBAEjF,+CAAyB,CAAC,KAAK,CAC7B,IAAI,CAAC,+CAAyB,CAAC,EAAE,EACjC,KAAK,CAAC,+CAAyB,CAAC,IAAI;gBAEtC,+CAAyB,CAAC,IAAI,CAC5B,IAAI,CAAC,+CAAyB,CAAC,EAAE,EACjC,cAAc,CAAC,EAAE;gBAEnB,+CAAyB,CAAC,IAAI,CAC5B,IAAI,CAAC,+CAAyB,CAAC,IAAI,EACnC,cAAc,CAAC,EAAE;gBAEnB,+CAAyB,CAAC,KAAK,CAC7B,IAAI,CAAC,+CAAyB,CAAC,KAAK,EACpC,cAAc,CAAC,EAAE;gBAEnB,qBAAqB,GAAG,+CAAyB,CAAC,SAAS;gBAC3D,EAAa,AAAb,WAAa;gBACb,sBAAsB,GAAG,+CAAyB,CAAC,UAAU;gBAC7D,EAAa,AAAb,WAAa;gBACb,qBAAqB,GAAG,+CAAyB,CAAC,SAAS;YAC5D,CAAC;YAED,EAAkB,AAAlB,gBAAkB;YAClB,MAAM,CAAC,GAAG,CACT,qBAAqB,CAAC,CAAC,EAAK,sBAAsB,CAAC,CAAC,EAAI,qBAAqB,CAAC,CAAC,EAAK,MAAM,CAAC,CAAC,EAC5F,qBAAqB,CAAC,CAAC,EAAK,sBAAsB,CAAC,CAAC,EAAI,qBAAqB,CAAC,CAAC,EAAK,MAAM,CAAC,CAAC,EAC5F,qBAAqB,CAAC,CAAC,EAAK,sBAAsB,CAAC,CAAC,EAAI,qBAAqB,CAAC,CAAC,EAAK,MAAM,CAAC,CAAC,EAC5F,CAAG,EAAyB,CAAG,EAAyB,CAAG,EAAyB,CAAG;YAExF,MAAM,CAAC,MAAM;QACd,CAAC;QAED,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;QAEhD,MAAM,CAAC,CAAC;IACT,CAAC;WAIM,mBAAmB,CACzB,MAAqB,EACrB,MAAe,EACf,MAAe,GAAG,GAAG,CAAC,cAAO,IAC5B,CAAC;QACF,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,yCAAa,CAAC,uBAAuB,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM;IAClF,CAAC;WAEM,4BAA4B,CAClC,MAAqB,EACrB,OAAe,EACf,KAAa,EACb,IAAY,EACZ,MAAe,GAAG,GAAG,CAAC,cAAO,IAC5B,CAAC;QACF,KAAK,CAAC,WAAW,GAAG,yCAAa,CAAC,oBAAoB,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI;QAE3E,KAAK,CAAC,SAAS,GACd,yCAAU,CAAC,sCAAsC,CAChD,yCAAa,CAAC,IAAI,EAClB,WAAW,EACX,GAAG,CAAC,yCAAa,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG;QAGjC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM;IAC1D,CAAC;;AA1IW,yCAAa,CAClB,2BAA2B,GAAG,GAAG,CAAC,GAAG;AADhC,yCAAa,CA+GlB,uBAAuB,GA/GlB,yCAAa,CA+GsB,+BAA+B,CAAC,CAAM,OAAE,CAAO;;;;;;;;;MChLlF,yCAAQ,SAAS,cAAO;gBAEjC,QAA4B,EAC5B,SAA6B,EAC7B,MAA0B,CAC1B,CAAC;QACD,KAAK,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM;IACnC,CAAC;QAEG,QAAQ,GAAG,CAAC;QACd,MAAM,CAAC,IAAI,CAAC,CAAC;IACf,CAAC;QAEG,QAAQ,CAAC,KAAa,EAAE,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,KAAK;IACjB,CAAC;QAEG,SAAS,GAAG,CAAC;QACf,MAAM,CAAC,IAAI,CAAC,CAAC;IACf,CAAC;QAEG,SAAS,CAAC,KAAa,EAAE,CAAC;QAC5B,IAAI,CAAC,IAAI,CAAC,KAAK;IACjB,CAAC;QAEG,MAAM,GAAG,CAAC;QACZ,MAAM,CAAC,IAAI,CAAC,CAAC;IACf,CAAC;QAEG,MAAM,CAAC,KAAa,EAAE,CAAC;QACzB,IAAI,CAAC,IAAI,CAAC,KAAK;IACjB,CAAC;IAED,UAAU,CAAC,MAAkB,GAAG,GAAG,CAAC,yCAAU,IAAI,CAAC;QACjD,KAAK,CAAC,MAAM,GAAG,yCAAa,CAAC,mBAAmB,CAC9C,yCAAa,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,GACnE,GAAG,CAAC,cAAO,IACX,QAAQ;QAEV,EAAkB,AAAlB,gBAAkB;QAClB,MAAM,CAAC,MAAM,CAAC,GAAG,CACb,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE,GAC7C,MAAM,CAAE,CAAC,GAAG,MAAM,CAAE,CAAC,GAAG,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE;IAEnD,CAAC;IAED,MAAM,GAAW,CAAC;QAChB,MAAM,CAAC,CAAC;YACN,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,MAAM,EAAE,IAAI,CAAC,MAAM;QACrB,CAAC;IACH,CAAC;WAEM,eAAe,CACpB,QAAgB,EAChB,SAAiB,EACjB,MAAc,EACd,MAAgB,GAAG,GAAG,CAAC,yCAAQ,IAC/B,CAAC;QACD,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM;IAC/C,CAAC;WAEM,cAAc,CACnB,QAAgB,EAChB,SAAiB,EACjB,MAAc,EACd,MAAgB,GAAG,GAAG,CAAC,yCAAQ,IAC/B,CAAC;QACD,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM;IAC/C,CAAC;;;;;;;;;;;;MZjEkB,wCAAU;iBAKf,CAAC;QALF,IAgLd,CA/KkB,OAAO,GAAG,GAAG,CAAC,GAAG;QADrB,IAgLd,CA9KkB,OAAO,GAAG,yCAAO,CAAC,WAAW;QAFjC,IAgLd,CA7KkB,YAAY,GAAG,GAAG,CAAC,mBAAY;QAHnC,IAgLd,CA5KS,YAAY,GAAG,GAAG,CAAC,yCAAW;QAEpC,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,SAAS,KAAO,CAAC;YAClD,IAAI,CAAC,WAAW,CAAC,CAAC;gBAAC,IAAI,EAAE,CAAU;YAAC,CAAC;QACvC,CAAC;QACD,IAAI,CAAC,SAAS,IAAI,CAAe,GAAK,CAAC;YACrC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI;YACtB,EAAE,EAAE,OAAO,EACT,MAAM,CAAE,OAAO,CAAC,IAAI;gBAClB,IAAI,CAAC,yCAAW,CAAC,MAAM;oBACrB,IAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC,CAAC;2BACvC,OAAO,CAAC,KAAK;oBAClB,CAAC;oBACD,KAAK;;oBAEL,KAAK;;QAGb,CAAC;IACH,CAAC;IAED,IAAI,CAAC,MAAyB,EAAE,CAAC;QAC/B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM;IAC1B,CAAC;IAED,aAAa,CAAC,KAAa,EAAE,CAAC;QAC5B,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK;IAClC,CAAC;IAED,OAAO,CAAC,EAAU,EAAuB,CAAC;QACxC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACR,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI;IAE/B,CAAC;IAED,aAAa,CAAI,EAAU,EAAE,GAAW,EAAE,CAAC;QACzC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACR,MAAM,CAAI,MAAM,CAAC,QAAQ,CAAC,GAAG;IAEjC,CAAC;IAED,aAAa,CAAC,EAAU,EAAE,GAAW,EAAE,IAAS,EAAE,CAAC;QACjD,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACR,MAAM,CAAC,QAAQ,CAAC,GAAG,IAAI,IAAI;IAE/B,CAAC;IAEO,SAAS,CAAC,KAAa,EAAE,CAAC;QAChC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK;IAC/C,CAAC;IAED,OAAO,CAAC,EAAU,EAAE,CAAC;QACnB,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;IAC5B,CAAC;IAED,cAAc,CAAC,EAAU,EAAE,CAAC;QAC1B,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM;YACR,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAW,aAAG,CAAC;gBAClC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAW;gBAC3C,MAAM,CAAC,MAAM,CAAC,MAAM;YACtB,CAAC,MAAM,CAAC;gBACN,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC,gBAAS,CAAC,MAAM;gBACnC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAW,YAAE,MAAM;gBACpC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM;YAC/B,CAAC;;IAEL,CAAC;IAED,IAAI,CAAC,EAAU,EAAE,CAAC;QAChB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACR,MAAM,CAAC,OAAO,GAAG,KAAK;QAExB,MAAM,GAAG,MAAM;IACjB,CAAC;IAED,IAAI,CAAC,EAAU,EAAE,CAAC;QAChB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACR,MAAM,CAAC,OAAO,GAAG,IAAI;QAEvB,MAAM,GAAG,MAAM;IACjB,CAAC;IAED,GAAG,CAAC,IAAS,EAAE,KAAyB,EAAE,CAAC;QACzC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI;QAE3C,EAAE,EAAE,KAAK,EAAE,CAAC;YACV,OAAO,CAAC,GAAG,CAAC,KAAK;YACjB,MAAM,CAAC,YAAY,CACjB,yCAAQ,CAAC,cAAc,CACrB,KAAK,CAAC,QAAQ,EACd,KAAK,CAAC,SAAS,EACf,KAAK,CAAC,MAAM,EACZ,UAAU;YAEd,MAAM,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK;QAC/B,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM;QAE7B,MAAM,CAAC,MAAM,CAAC,EAAE;IAClB,CAAC;IAED,MAAM,CAAC,EAAU,EAAE,IAAS,EAAE,CAAC;QAC7B,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAC9B,EAAE,EAAE,MAAM,EAAE,CAAC;YACX,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI;YACjD,MAAM,CAAC,IAAI,CAAC,YAAY;QAC1B,CAAC;QACD,MAAM,GAAG,MAAM;IACjB,CAAC;IAED,QAAQ,CAAC,EAAU,EAAE,CAAC;QACpB,QAAS;QACT,KAAK,CAAC,KAAK,GAAyB,IAAI,CAAC,SAAS,CAAC,EAAE,GAAG,QAAQ,CAAC,KAAK;QACtE,EAAE,EACA,KAAK,IACL,KAAK,CAAC,QAAQ,KAAK,SAAS,IAC5B,KAAK,CAAC,SAAS,KAAK,SAAS,IAC7B,KAAK,CAAC,MAAM,KAAK,SAAS,EAE1B,MAAM,CAAC,CAAC;YACN,QAAQ,EAAE,KAAK,CAAC,SAAS;YACzB,SAAS,EAAE,KAAK,CAAC,QAAQ;YACzB,MAAM,EAAE,KAAK,CAAC,MAAM;QACtB,CAAC;IAEL,CAAC;IAED,OAAO,CAAC,KAAa,EAAE,MAAc,EAAE,CAAC;QACtC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM;IACpC,CAAC;IAED,UAAU,CAAC,KAAsB,EAAE,CAAC;QAClC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM;QAClC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM;QAC5B,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG;QACtB,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;QACxB,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG;QACtB,OAAO,CAAC,KAAK,CAAC,KAAK;QACnB,MAAM,CAAC,sBAAsB;IAC/B,CAAC;IAED,cAAc,CAAC,EAAU,EAAE,QAAgB,EAAE,CAAC;QAC5C,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EAAE,CAAC;YACX,QAAQ,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,GAC7B,GAAG,CAAC,WAAI,GAAG,aAAa,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,GACtC,CAAC;YACL,KAAK,CAAC,KAAK,GAAG,yCAAQ,CAAC,eAAe,CACpC,QAAQ,CAAC,QAAQ,EACjB,QAAQ,CAAC,SAAS,EAClB,QAAQ,CAAC,MAAM;YAEjB,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU;YACpC,MAAM,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK;QAC/B,CAAC;QACD,MAAM,GAAG,MAAM;IACjB,CAAC;IAED,MAAM,CAAC,EAAU,EAAE,CAAC;QAClB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;QAChC,EAAE,EAAE,MAAM,EACR,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM;QAElC,MAAM,GAAG,MAAM;IACjB,CAAC;;AAGI,KAAK,CAAC,yCAAW,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;IACxC,MAAM,EAAE,CAAC;AACX,CAAC;AAED,aAAM,CAAC,GAAG,CAAC,wCAAU","sources":["src/core/core-thread.ts","src/core/graphic.ts","src/core/render-queue.ts","src/core/math/index.ts","src/core/math/cartesian3.ts","src/constants.ts","src/core/utils/index.ts","src/core/utils/math.ts","src/core/math/ellipsoid.ts","src/core/math/matrix4.ts","src/core/math/quration.ts","src/core/math/transforms.ts","src/core/math/wgs84.ts"],"sourcesContent":["import { expose } from \"comlink\";\r\nimport { Graphic } from \"./graphic\";\r\nimport { Box3, BoxHelper, Object3D, ObjectLoader, Vector3 } from \"three\";\r\nimport { RenderQueue } from \"./render-queue\";\r\nimport { CT_WGS84, IWGS84 } from \"./math\";\r\n\r\nexport interface CameraInitParam {\r\n  aspect: number;\r\n  far: number;\r\n  near: number;\r\n  fov: number;\r\n}\r\n\r\nexport default class CoreThread {\r\n  private readonly helpers = new Map<string, Object3D>();\r\n  private readonly graphic = Graphic.getInstance();\r\n  private readonly objectLoader = new ObjectLoader();\r\n  private _renderQueue = new RenderQueue();\r\n  constructor() {\r\n    this._renderQueue.renderNextFrame$.subscribe(() => {\r\n      self.postMessage({ type: \"onRender\" });\r\n    });\r\n    self.onmessage = (e: MessageEvent) => {\r\n      const message = e.data;\r\n      if (message) {\r\n        switch (message.type) {\r\n          case RequestType.RENDER:\r\n            this._renderQueue.updateNextAnimationFrame({\r\n              ...message.param,\r\n            });\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  init(canvas: HTMLCanvasElement) {\r\n    this.graphic.init(canvas);\r\n  }\r\n\r\n  setPixelRatio(value: number) {\r\n    this.graphic.setPixelRatio(value);\r\n  }\r\n\r\n  getBox3(id: number): Vector3 | undefined {\r\n    const object = this.getObject(id);\r\n    if (object) {\r\n      return object.userData.box3;\r\n    }\r\n  }\r\n\r\n  getUserDataAt<T>(id: number, key: string) {\r\n    const object = this.getObject(id);\r\n    if (object) {\r\n      return <T>object.userData[key];\r\n    }\r\n  }\r\n\r\n  setUserDataAt(id: number, key: string, data: any) {\r\n    const object = this.getObject(id);\r\n    if (object) {\r\n      object.userData[key] = data;\r\n    }\r\n  }\r\n\r\n  private getObject(value: number) {\r\n    return this.graphic.scene.getObjectById(value);\r\n  }\r\n\r\n  isExist(id: number) {\r\n    return !!this.getObject(id);\r\n  }\r\n\r\n  setBoxHelperTo(id: number) {\r\n    const object = this.getObject(id);\r\n    if (object) {\r\n      if (this.helpers.has(\"BoxHelper\")) {\r\n        const helper = this.helpers.get(\"BoxHelper\")! as BoxHelper;\r\n        helper.update(object);\r\n      } else {\r\n        const helper = new BoxHelper(object);\r\n        this.helpers.set(\"BoxHelper\", helper);\r\n        this.graphic.scene.add(helper);\r\n      }\r\n    }\r\n  }\r\n\r\n  hide(id: number) {\r\n    const object = this.getObject(id);\r\n    if (object) {\r\n      object.visible = false;\r\n    }\r\n    return !!object;\r\n  }\r\n\r\n  show(id: number) {\r\n    const object = this.getObject(id);\r\n    if (object) {\r\n      object.visible = true;\r\n    }\r\n    return !!object;\r\n  }\r\n\r\n  add(json: any, wgs84: IWGS84 | undefined) {\r\n    const object = this.objectLoader.parse(json);\r\n\r\n    if (wgs84) {\r\n      console.log(wgs84);\r\n      object.applyMatrix4(\r\n        CT_WGS84.fromThreeWGS84(\r\n          wgs84.latitude,\r\n          wgs84.longitude,\r\n          wgs84.height\r\n        ).getMatrix4()\r\n      );\r\n      object.userData.wgs84 = wgs84;\r\n    }\r\n\r\n    this.graphic.scene.add(object);\r\n\r\n    return object.id;\r\n  }\r\n\r\n  update(id: number, json: any) {\r\n    let object = this.getObject(id);\r\n    if (object) {\r\n      const updateObject = this.objectLoader.parse(json);\r\n      object.copy(updateObject);\r\n    }\r\n    return !!object;\r\n  }\r\n\r\n  getWGS84(id: number) {\r\n    debugger;\r\n    const wgs84: CT_WGS84 | undefined = this.getObject(id)?.userData.wgs84;\r\n    if (\r\n      wgs84 &&\r\n      wgs84.latitude !== undefined &&\r\n      wgs84.longitude !== undefined &&\r\n      wgs84.height !== undefined\r\n    ) {\r\n      return {\r\n        latitude: wgs84.longitude,\r\n        longitude: wgs84.latitude,\r\n        height: wgs84.height,\r\n      } as IWGS84;\r\n    }\r\n  }\r\n\r\n  setSize(width: number, height: number) {\r\n    this.graphic.setSize(width, height);\r\n  }\r\n\r\n  initCamera(param: CameraInitParam) {\r\n    const camera = this.graphic.camera;\r\n    camera.aspect = param.aspect;\r\n    camera.far = param.far;\r\n    camera.near = param.near;\r\n    camera.fov = param.fov;\r\n    console.table(param);\r\n    camera.updateProjectionMatrix();\r\n  }\r\n\r\n  updatePosition(id: number, position: IWGS84) {\r\n    const object = this.getObject(id);\r\n    if (object) {\r\n      position.height = position.height\r\n        ? new Box3().setFromObject(object).max.y\r\n        : 0;\r\n      const wgs84 = CT_WGS84.fromCesiumWGS84(\r\n        position.latitude,\r\n        position.longitude,\r\n        position.height\r\n      );\r\n      object.applyMatrix4(wgs84.getMatrix4());\r\n      object.userData.wgs84 = wgs84;\r\n    }\r\n    return !!object;\r\n  }\r\n\r\n  delete(id: number) {\r\n    const object = this.getObject(id);\r\n    if (object) {\r\n      this.graphic.scene.remove(object);\r\n    }\r\n    return !!object;\r\n  }\r\n}\r\n\r\nexport const RequestType = Object.freeze({\r\n  RENDER: 0,\r\n});\r\n\r\nexpose(new CoreThread());\r\n","import * as THREE from 'three';\r\nimport { PerspectiveCamera, WebGLRendererParameters } from 'three';\r\n\r\nexport interface CurrentExtent {\r\n\txmin: number;\r\n\tymin: number;\r\n\txmax: number;\r\n\tymax: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface RenderParam {\r\n\tcvm: Float32Array;\r\n\tcivm: Float32Array;\r\n}\r\n\r\nexport class Graphic {\r\n\tprivate static instance: Graphic;\r\n\treadonly camera: THREE.PerspectiveCamera;\r\n\tprivate constructor(\r\n\t\treadonly scene = new THREE.Scene(),\r\n\t) {\r\n\t\tthis.camera = new PerspectiveCamera();\r\n\t}\r\n\r\n\tstatic getInstance() {\r\n\t\treturn this.instance || (this.instance = new this());\r\n\t}\r\n\r\n\tsetPixelRatio(value: number): boolean {\r\n\t\tlet success = false;\r\n\t\tif (this.renderer) {\r\n\t\t\tthis.renderer.setPixelRatio(value);\r\n\t\t\tsuccess = true;\r\n\t\t}\r\n\t\treturn success;\r\n\t}\r\n\r\n\trenderer?: THREE.WebGLRenderer;\r\n\tinit(canvas: HTMLCanvasElement) {\r\n\t\tconst params: WebGLRendererParameters = {\r\n\t\t\tcanvas: canvas,\r\n\t\t\tpowerPreference: 'high-performance',\r\n\t\t\talpha: true,\r\n\t\t\tantialias: true,\r\n\t\t\tlogarithmicDepthBuffer: true,\r\n\t\t\tdepth: false,\r\n\t\t};\r\n\r\n\t\tconst context = canvas.getContext('webgl2');\r\n\t\tif (context) {\r\n\t\t\tparams.context = context;\r\n\t\t}\r\n\r\n\t\tthis.renderer = new THREE.WebGLRenderer(params);\r\n\t\tconsole.log(\r\n\t\t\t`[Graphic] isWebGL2Enabled : ${this.renderer.capabilities.isWebGL2}`\r\n\t\t);\r\n\t}\r\n\r\n\tsetSize(width: number, height: number) {\r\n\t\tthis.camera.aspect = width / height;\r\n\t\tthis.camera.updateProjectionMatrix();\r\n\t\tthis.renderer?.setSize(width, height, false);\r\n\t}\r\n\r\n\t/**\r\n\t * 장면을 렌더링합니다.\r\n\t * @param param\r\n\t */\r\n\trender(param: RenderParam) {\r\n\t\tif (this.renderer) {\r\n\r\n\t\t\tthis.camera.matrixAutoUpdate = false;\r\n\r\n\t\t\t// prettier-ignore\r\n\t\t\tthis.camera.matrixWorld.set(\r\n\t\t\t\tparam.civm[ 0], param.civm[ 4], param.civm[ 8], param.civm[12],\r\n\t\t\t\tparam.civm[ 1], param.civm[ 5], param.civm[ 9], param.civm[13],\r\n\t\t\t\tparam.civm[ 2], param.civm[ 6], param.civm[10], param.civm[14],\r\n\t\t\t\tparam.civm[ 3], param.civm[ 7], param.civm[11], param.civm[15]\r\n\t\t\t);\r\n\t\t\t// prettier-ignore\r\n\t\t\tthis.camera.matrixWorldInverse.set(\r\n\t\t\t\tparam.cvm[ 0], param.cvm[ 4], param.cvm[ 8], param.cvm[12],\r\n\t\t\t\tparam.cvm[ 1], param.cvm[ 5], param.cvm[ 9], param.cvm[13],\r\n\t\t\t\tparam.cvm[ 2], param.cvm[ 6], param.cvm[10], param.cvm[14],\r\n\t\t\t\tparam.cvm[ 3], param.cvm[ 7], param.cvm[11], param.cvm[15]\r\n\t\t\t);\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\t\t\tthis.renderer.render(this.scene, this.camera);\r\n\t\t}\r\n\t}\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { Graphic, RenderParam } from './graphic';\r\n\r\n/**\r\n * Cesium 과 three.js 의 스레드 간 렌더 비동기 이슈를 해결합니다.\r\n */\r\nexport class RenderQueue {\r\n\tprivate readonly _queue: RenderParam[] = [];\r\n\tprivate readonly graphic = Graphic.getInstance();\r\n\tprivate param: RenderParam | undefined;\r\n\tprivate _handle: number | undefined;\r\n\tprivate readonly _bindRenderNextAnimationFrame =\r\n\t\tthis._renderNextAnimationFrame.bind(this);\r\n\tprivate readonly _renderSubject = new Subject<void>();\r\n\treadonly renderNextFrame$ = this._renderSubject.pipe();\r\n\r\n\t/**\r\n\t * 다음 장면을 그립니다.\r\n\t */\r\n\tprivate _renderNextAnimationFrame() {\r\n\t\tthis.param = this._queue.pop();\r\n\t\tif (this.param) {\r\n\t\t\tthis.graphic.render(this.param);\r\n\t\t}\r\n\t\tthis._handle = requestAnimationFrame(\r\n\t\t\tthis._bindRenderNextAnimationFrame\r\n\t\t);\r\n\t\tthis._renderSubject.next();\r\n\t}\r\n\r\n\t/**\r\n\t * 다음 장면을 요청합니다.\r\n\t * @param param 렌더링 파라미터\r\n\t */\r\n\tupdateNextAnimationFrame(param: RenderParam) {\r\n\t\tif (this._queue.length) {\r\n\t\t\tthis._queue[0] = param;\r\n\t\t} else {\r\n\t\t\tthis._queue.push(param);\r\n\t\t}\r\n\r\n\t\tif (!this._handle) this._renderNextAnimationFrame();\r\n\t}\r\n}\r\n","export * from './cartesian3'\r\nexport * from './ellipsoid'\r\nexport * from './matrix4'\r\nexport * from './quration'\r\nexport * from './transforms'\r\nexport * from './wgs84'","import { Vector3 } from \"three\";\r\nimport { EARTH_RADIUS_X_SQURAE, EARTH_RADIUS_Y_SQURAE, EARTH_RADIUS_Z_SQURAE } from \"../../constants\";\r\nimport { MathUtils } from \"../utils\";\r\nexport class CT_Cartesian3 extends Vector3 {\r\n  static get WGS84_RADII_SQUARED() {  \r\n    return new CT_Cartesian3(\r\n      EARTH_RADIUS_X_SQURAE,\r\n      EARTH_RADIUS_Y_SQURAE,\r\n      EARTH_RADIUS_Z_SQURAE\r\n    );\r\n  }\r\n\r\n  static get UINT_X() {\r\n    return new CT_Cartesian3(1.0, 0.0, 0.0);\r\n  }\r\n\r\n  static get UINT_Y() {\r\n    return new CT_Cartesian3(0.0, 1.0, 0.0);\r\n  }\r\n\r\n  static get UINT_Z() {\r\n    return new CT_Cartesian3(0.0, 0.0, 1.0);\r\n  }\r\n\r\n  static get ZERO() {\r\n    return new CT_Cartesian3(0, 0, 0);\r\n  }\r\n\r\n  static fromRadians(longitude: number, latitude: number, height: number) {\r\n    const cosLatitude = Math.cos(latitude);\r\n\r\n    const cartesian = new CT_Cartesian3(\r\n      cosLatitude * Math.cos(longitude),\r\n      cosLatitude * Math.sin(longitude),\r\n      Math.sin(latitude)\r\n    ).normalizeByMagnitude();\r\n\r\n    const WGS84_RADII_SQUARED = CT_Cartesian3.WGS84_RADII_SQUARED.multiply(cartesian);\r\n\r\n    const gamma = Math.sqrt(WGS84_RADII_SQUARED.dot(cartesian));\r\n\r\n    WGS84_RADII_SQUARED.divideScalar(gamma);\r\n\r\n    return cartesian.multiplyScalar(height).add(WGS84_RADII_SQUARED);\r\n  }\r\n\r\n  static fromDegree(longitude: number, latitude: number, height: number) {\r\n    return this.fromRadians(\r\n      MathUtils.toRadians(longitude),\r\n      MathUtils.toRadians(latitude),\r\n      height\r\n    );\r\n  }\r\n\r\n  static equalsEpsilon(\r\n    left: CT_Cartesian3,\r\n    right: CT_Cartesian3,\r\n    relativeEpsilon: number = MathUtils.EPSILON_14,\r\n    absoluteEpsilon: number = MathUtils.EPSILON_14\r\n  ) {\r\n    if (left.equals(right)) return true;\r\n    return (\r\n      MathUtils.equalsEpsilon(\r\n        left.x,\r\n        right.x,\r\n        relativeEpsilon,\r\n        absoluteEpsilon\r\n      ) &&\r\n      MathUtils.equalsEpsilon(\r\n        left.y,\r\n        right.y,\r\n        relativeEpsilon,\r\n        absoluteEpsilon\r\n      ) &&\r\n      MathUtils.equalsEpsilon(left.z, right.z, relativeEpsilon, absoluteEpsilon)\r\n    );\r\n  }\r\n\r\n  normalizeByMagnitude() {\r\n    return this.divideScalar(MathUtils.magnitude(this));\r\n  }\r\n\r\n  isZero() {\r\n    return CT_Cartesian3.equalsEpsilon(this, CT_Cartesian3.ZERO);\r\n  }\r\n\r\n  static unpack(\r\n    array: Array<number>,\r\n    startIndex: number = 0,\r\n    result: CT_Cartesian3 = new CT_Cartesian3()\r\n  ) {\r\n    return result.set(\r\n      array[startIndex++],\r\n      array[startIndex++],\r\n      array[startIndex]\r\n    );\r\n  }\r\n}\r\n","export const REVISION = '0dev';\r\nexport const EARTH_RADIUS_X = 6378137.0;\r\nexport const EARTH_RADIUS_Y = 6378137.0;\r\nexport const EARTH_RADIUS_Z = 6356752.3142451793;\r\nexport const EARTH_RADIUS_X_SQURAE = 40680631590769.0;\r\nexport const EARTH_RADIUS_Y_SQURAE = 40680631590769.0;\r\nexport const EARTH_RADIUS_Z_SQURAE = 40408299984661.445;","export { MathUtils } from './math';\r\n","export class MathUtils {\r\n  static readonly RADIANS_PER_DEGREE = Math.PI / 180.0;\r\n  static readonly EPSILON_01: number = 0.1;\r\n  static readonly EPSILON_02: number = 0.01;\r\n  static readonly EPSILON_03: number = 0.001;\r\n  static readonly EPSILON_04: number = 0.0001;\r\n  static readonly EPSILON_05: number = 0.00001;\r\n  static readonly EPSILON_06: number = 0.000001;\r\n  static readonly EPSILON_07: number = 0.0000001;\r\n  static readonly EPSILON_08: number = 0.00000001;\r\n  static readonly EPSILON_09: number = 0.000000001;\r\n  static readonly EPSILON_10: number = 0.0000000001;\r\n  static readonly EPSILON_11: number = 0.00000000001;\r\n  static readonly EPSILON_12: number = 0.000000000001;\r\n  static readonly EPSILON_13: number = 0.0000000000001;\r\n  static readonly EPSILON_14: number = 0.00000000000001;\r\n  static readonly EPSILON_15: number = 0.000000000000001;\r\n  static readonly EPSILON_16: number = 0.0000000000000001;\r\n  static readonly EPSILON_17: number = 0.00000000000000001;\r\n  static readonly EPSILON_18: number = 0.000000000000000001;\r\n  static readonly EPSILON_19: number = 0.0000000000000000001;\r\n  static readonly EPSILON_20: number = 0.00000000000000000001;\r\n  static readonly EPSILON_21: number = 0.000000000000000000001;\r\n  static toRadians(degrees: number) {\r\n    return degrees * this.RADIANS_PER_DEGREE;\r\n  }\r\n\r\n  static randomOffset() {\r\n\t\treturn Math.floor(Math.random() * 10000) * 0.000001;\r\n\t}\r\n\r\n\r\n  /**\r\n   * 절대 공차 검정 또는 상대 공차 검정을 사용하여 두 값이 같은지 여부를 확인합니다.\r\n   *\r\n   * @example\r\n   * MathUtils.equalsEpsilon(0.1, 0.01, MathUtils.EPSILON_01) // true\r\n   * MathUtils.equalsEpsilon(0.1, 0.01, MathUtils.EPSILON_02) // false\r\n   *\r\n   * @param left - The first value to compare.\r\n   * @param right - The other value to compare.\r\n   * @param relativeEpsilon\r\n   * @param absoluteEpsilon\r\n   * @returns\r\n   */\r\n  static equalsEpsilon(\r\n    left: number,\r\n    right: number,\r\n    relativeEpsilon: number = this.EPSILON_14,\r\n    absoluteEpsilon: number = this.EPSILON_14\r\n  ) {\r\n    const absDiff = Math.abs(left - right);\r\n    if (absDiff <= absoluteEpsilon) return true;\r\n    return (\r\n      absDiff <= relativeEpsilon * Math.max(Math.abs(left), Math.abs(right))\r\n    );\r\n  }\r\n\r\n  static magnitude(vec: { x: number; y: number; z: number }) {\r\n    return Math.sqrt(vec.x * vec.x + vec.y * vec.y + vec.z * vec.z);\r\n  }\r\n}\r\n","import { Vector3 } from 'three';\r\nimport { EARTH_RADIUS_X, EARTH_RADIUS_Y, EARTH_RADIUS_Z } from '../../constants';\r\nimport { CT_Cartesian3 } from './cartesian3';\r\n\r\nexport class CT_Ellipsoid extends Vector3 {\r\n  private _oneOverRadiiSquared: CT_Cartesian3;\r\n\r\n  constructor(x: number, y: number, z: number) {\r\n    super(x, y, z);\r\n    this._oneOverRadiiSquared = new CT_Cartesian3(\r\n      this.x == 0.0 ? 0.0 : 1.0 / (this.x * this.x),\r\n      this.y == 0.0 ? 0.0 : 1.0 / (this.y * this.y),\r\n      this.z == 0.0 ? 0.0 : 1.0 / (this.z * this.z)\r\n    );\r\n  }\r\n\r\n  static get WGS84() {\r\n    return new CT_Ellipsoid(EARTH_RADIUS_X, EARTH_RADIUS_Y, EARTH_RADIUS_Z);\r\n  }\r\n\r\n  static readonly DEFAULT_WGS84_RADII_SQUARED = Object.freeze(CT_Ellipsoid.WGS84._oneOverRadiiSquared);\r\n  static getDefaultWGS84RadiiSquaredGeodticSurfaceNormal(\r\n    cartesian: CT_Cartesian3,\r\n    result: CT_Cartesian3 = new CT_Cartesian3()\r\n  ) {\r\n    if (cartesian.isZero()) return;\r\n    return result\r\n\t\t.copy(cartesian)\r\n\t\t.multiply(this.DEFAULT_WGS84_RADII_SQUARED)\r\n\t\t.normalizeByMagnitude();\r\n  }\r\n\r\n  geodeticSurfaceNormal(\r\n    cartesian: CT_Cartesian3,\r\n    result: CT_Cartesian3 = new CT_Cartesian3()\r\n  ) {\r\n    if (cartesian.isZero()) return;\r\n    return result\r\n      .copy(cartesian)\r\n      .multiply(this._oneOverRadiiSquared)\r\n      .normalizeByMagnitude();\r\n  }\r\n}\r\n","import { Matrix4 } from \"three\";\r\nimport { CT_Cartesian3, CT_Quaternion, CT_Transforms } from \".\";\r\nimport { MathUtils } from \"../utils\";\r\n\r\nexport class CT_Matrix4 extends Matrix4 {\r\n  static fromRotationX(degrees: number, result: Matrix4 = new Matrix4()) {\r\n    return result.makeRotationX(MathUtils.toRadians(degrees));\r\n  }\r\n\r\n  static fromWGS84(\r\n    longitude: number,\r\n    latitude: number,\r\n    height: number,\r\n    result: Matrix4 = new Matrix4()\r\n  ) {\r\n    const matrix = CT_Transforms.matrix4ToFixedFrame(\r\n      CT_Cartesian3.fromDegree(longitude, latitude, height),\r\n      new Matrix4()\r\n    ).elements;\r\n\r\n    // prettier-ignore\r\n    return result.set(\r\n        matrix[ 0], matrix[ 4], matrix[ 8], matrix[12],\r\n        matrix[ 1], matrix[ 5], matrix[ 9], matrix[13],\r\n        matrix[ 2], matrix[ 6], matrix[10], matrix[14],\r\n        matrix[ 3], matrix[ 7], matrix[11], matrix[15]\r\n    );\r\n  }\r\n\r\n  static fromTranslationQuaternionRotationScale(\r\n    translation: CT_Cartesian3,\r\n    rotation: CT_Quaternion,\r\n    scale: CT_Cartesian3,\r\n    result: CT_Matrix4 = new CT_Matrix4()\r\n  ) {\r\n    const scaleX = scale.x;\r\n    const scaleY = scale.y;\r\n    const scaleZ = scale.z;\r\n\r\n    const x2 = rotation.x * rotation.x;\r\n    const xy = rotation.x * rotation.y;\r\n    const xz = rotation.x * rotation.z;\r\n    const xw = rotation.x * rotation.w;\r\n    const y2 = rotation.y * rotation.y;\r\n    const yz = rotation.y * rotation.z;\r\n    const yw = rotation.y * rotation.w;\r\n    const z2 = rotation.z * rotation.z;\r\n    const zw = rotation.z * rotation.w;\r\n    const w2 = rotation.w * rotation.w;\r\n\r\n    const m00 = x2 - y2 - z2 + w2;\r\n    const m01 = 2.0 * (xy - zw);\r\n    const m02 = 2.0 * (xz + yw);\r\n\r\n    const m10 = 2.0 * (xy + zw);\r\n    const m11 = -x2 + y2 - z2 + w2;\r\n    const m12 = 2.0 * (yz - xw);\r\n\r\n    const m20 = 2.0 * (xz - yw);\r\n    const m21 = 2.0 * (yz + xw);\r\n    const m22 = -x2 - y2 + z2 + w2;\r\n\r\n    // prettier-ignore\r\n    return result.set(\r\n        m00 * scaleX, \tm10 * scaleX, \tm20 * scaleX, \t0.0,\r\n        m01 * scaleY, \tm11 * scaleY, \tm21 * scaleY, \t0.0,\r\n        m02 * scaleZ, \tm12 * scaleZ, \tm22 * scaleZ, \t0.0,\r\n        translation.x, \ttranslation.y, \ttranslation.z,\t1.0,\r\n    );\r\n  }\r\n}\r\n","import { Vector4 } from 'three';\r\nimport { CT_Cartesian3 } from '.';\r\n\r\nexport class CT_Quaternion extends Vector4 {\r\n  \r\n  private static _fromAxisAngleScratch = new CT_Cartesian3();\r\n\r\n  static fromAxisAngle(\r\n    aixs: CT_Cartesian3,\r\n    angle: number,\r\n    result: CT_Quaternion = new CT_Quaternion()\r\n  ) {\r\n    const halfAngle = angle / 2.0;\r\n\r\n    const halfAnlgOfSin = Math.sin(halfAngle);\r\n\r\n    this._fromAxisAngleScratch.copy(aixs).normalizeByMagnitude();\r\n\r\n    return result.set(\r\n      this._fromAxisAngleScratch.x * halfAnlgOfSin,\r\n      this._fromAxisAngleScratch.y * halfAnlgOfSin,\r\n      this._fromAxisAngleScratch.z * halfAnlgOfSin,\r\n      Math.cos(halfAngle)\r\n    );\r\n  }\r\n\r\n\r\n  private static _scratchHPRQuaternion = new CT_Quaternion();\r\n  private static _scratchHeadingQuaternion = new CT_Quaternion();\r\n  private static _scratchPitchQuaternion = new CT_Quaternion();\r\n  private static _scratchRollQuaternion = new CT_Quaternion();\r\n\r\n  static fromHeadingPitchRoll(\r\n    heading: number,\r\n    pitch: number,\r\n    roll: number,\r\n    result: CT_Quaternion = new CT_Quaternion()\r\n  ) {\r\n    this._scratchRollQuaternion = this.fromAxisAngle(\r\n      CT_Cartesian3.UINT_X,\r\n      roll,\r\n      this._scratchHPRQuaternion\r\n    );\r\n\r\n    result = this.fromAxisAngle(\r\n      CT_Cartesian3.UINT_Y,\r\n      pitch,\r\n      this._scratchPitchQuaternion\r\n    );\r\n\r\n    this._scratchPitchQuaternion.multiply(this._scratchRollQuaternion);\r\n\r\n    this._scratchHeadingQuaternion = this.fromAxisAngle(\r\n      CT_Cartesian3.UINT_Z,\r\n      -heading,\r\n      this._scratchHPRQuaternion\r\n    );\r\n\r\n    return result.copy(\r\n      new CT_Quaternion().copy(this._scratchHeadingQuaternion).multiply(result)\r\n    );\r\n  }\r\n}\r\n\r\n","import { Matrix4 } from 'three';\r\nimport { CT_Ellipsoid } from './ellipsoid';\r\nimport { CT_Quaternion } from './quration';\r\nimport { MathUtils } from '../utils';\r\nimport { CT_Cartesian3 } from './cartesian3';\r\nimport { CT_Matrix4 } from './matrix4';\r\n\r\nconst vectorProductLocalFrame = {\r\n\tup: {\r\n\t\tsouth: 'east',\r\n\t\tnorth: 'west',\r\n\t\twest: 'south',\r\n\t\teast: 'north',\r\n\t},\r\n\tdown: {\r\n\t\tsouth: 'west',\r\n\t\tnorth: 'east',\r\n\t\twest: 'north',\r\n\t\teast: 'south',\r\n\t},\r\n\tsouth: {\r\n\t\tup: 'west',\r\n\t\tdown: 'east',\r\n\t\twest: 'down',\r\n\t\teast: 'up',\r\n\t},\r\n\tnorth: {\r\n\t\tup: 'east',\r\n\t\tdown: 'west',\r\n\t\twest: 'up',\r\n\t\teast: 'down',\r\n\t},\r\n\twest: {\r\n\t\tup: 'north',\r\n\t\tdown: 'south',\r\n\t\tnorth: 'down',\r\n\t\tsouth: 'up',\r\n\t},\r\n\teast: {\r\n\t\tup: 'south',\r\n\t\tdown: 'north',\r\n\t\tnorth: 'up',\r\n\t\tsouth: 'down',\r\n\t},\r\n} as const;\r\n\r\ntype AxisFirst = keyof typeof vectorProductLocalFrame;\r\ntype AxisSecond<K extends AxisFirst> = keyof typeof vectorProductLocalFrame[K];\r\n\r\ntype FixedFrameTransformFunction = {\r\n\t(origin: CT_Cartesian3): Matrix4;\r\n};\r\n\r\n// prettier-ignore\r\nconst degeneratePositionLocalFrame = {\r\n\tnorth: [-1,  0,  0],\r\n\teast:  [ 0,  1,  0],\r\n\tsouth: [ 1,  0,  0],\r\n\twest:  [ 0, -1,  0],\r\n\tup:    [ 0,  0,  1],\r\n\tdown:  [ 0,  0, -1],\r\n};\r\nconst scratchCalculateCartesian = {\r\n\teast: new CT_Cartesian3(),\r\n\tnorth: new CT_Cartesian3(),\r\n\tup: new CT_Cartesian3(),\r\n\twest: new CT_Cartesian3(),\r\n\tsouth: new CT_Cartesian3(),\r\n\tdown: new CT_Cartesian3(),\r\n};\r\n\r\nexport class CT_Transforms {\r\n\tstatic localFrameToFixedFrameCache = new Map<\r\n\t\tstring,\r\n\t\tFixedFrameTransformFunction\r\n\t>();\r\n\r\n\tstatic localFrameToFixedFrameGenerator<K extends AxisFirst>(\r\n\t\tfirstAixs: K,\r\n\t\tsecondAxis: AxisSecond<K>\r\n\t) {\r\n\t\tconst axisHash = firstAixs + secondAxis;\r\n\r\n\t\tlet f = CT_Transforms.localFrameToFixedFrameCache.get(axisHash);\r\n\r\n\t\tif (f) return f;\r\n\r\n\t\tconst thirdAxis = vectorProductLocalFrame[firstAixs][secondAxis];\r\n\r\n\t\tf = (origin: CT_Cartesian3, result: Matrix4 = new Matrix4()) => {\r\n\t\t\tlet scratchFirstCartesian: CT_Cartesian3;\r\n\t\t\tlet scratchSecondCartesian: CT_Cartesian3;\r\n\t\t\tlet scratchThirdCartesian: CT_Cartesian3;\r\n\r\n\t\t\tif (origin.isZero()) {\r\n\t\t\t\tscratchFirstCartesian = CT_Cartesian3.unpack(\r\n\t\t\t\t\tdegeneratePositionLocalFrame[firstAixs]\r\n\t\t\t\t);\r\n\t\t\t\tscratchSecondCartesian = CT_Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[secondAxis]\r\n\t\t\t\t);\r\n\t\t\t\tscratchThirdCartesian = CT_Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[thirdAxis]\r\n\t\t\t\t);\r\n\t\t\t} else if (\r\n\t\t\t\tMathUtils.equalsEpsilon(origin.x, 0.0) &&\r\n\t\t\t\tMathUtils.equalsEpsilon(origin.y, 0.0)\r\n\t\t\t) {\r\n\t\t\t\tconst sign = Math.sign(origin.z);\r\n\t\t\t\tscratchFirstCartesian = CT_Cartesian3.unpack(\r\n\t\t\t\t\tdegeneratePositionLocalFrame[firstAixs]\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (firstAixs !== 'east' && firstAixs !== 'west') {\r\n\t\t\t\t\tscratchFirstCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscratchSecondCartesian = CT_Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[secondAxis]\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (secondAxis !== 'east' && secondAxis !== 'west') {\r\n\t\t\t\t\tscratchSecondCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\t\t\t\tscratchThirdCartesian = CT_Cartesian3.unpack(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdegeneratePositionLocalFrame[thirdAxis]\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (thirdAxis !== 'east' && thirdAxis !== 'west') {\r\n\t\t\t\t\tscratchThirdCartesian.multiplyScalar(sign);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tCT_Ellipsoid.getDefaultWGS84RadiiSquaredGeodticSurfaceNormal(\r\n\t\t\t\t\torigin,\r\n\t\t\t\t\tscratchCalculateCartesian.up\r\n\t\t\t\t)\r\n\r\n\t\t\t\tscratchCalculateCartesian.east.set(-origin.y, origin.x, 0.0).normalizeByMagnitude();\r\n\r\n\t\t\t\tscratchCalculateCartesian.north\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.up)\r\n\t\t\t\t\t.cross(scratchCalculateCartesian.east);\r\n\r\n\t\t\t\tscratchCalculateCartesian.down\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.up)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchCalculateCartesian.west\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.east)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchCalculateCartesian.south\r\n\t\t\t\t\t.copy(scratchCalculateCartesian.north)\r\n\t\t\t\t\t.multiplyScalar(-1);\r\n\r\n\t\t\t\tscratchFirstCartesian = scratchCalculateCartesian[firstAixs];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tscratchSecondCartesian = scratchCalculateCartesian[secondAxis];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tscratchThirdCartesian = scratchCalculateCartesian[thirdAxis];\r\n\t\t\t}\r\n\r\n\t\t\t// prettier-ignore\r\n\t\t\tresult.set(\r\n\t\t\t\tscratchFirstCartesian.x,    scratchSecondCartesian.x,   scratchThirdCartesian.x,    origin.x,\r\n\t\t\t\tscratchFirstCartesian.y,    scratchSecondCartesian.y,   scratchThirdCartesian.y,    origin.y,\r\n\t\t\t\tscratchFirstCartesian.z,    scratchSecondCartesian.z,   scratchThirdCartesian.z,    origin.z,\r\n\t\t\t\t0.0,                        0.0,                        0.0,                        0.0\r\n\t\t\t);\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tthis.localFrameToFixedFrameCache.set(axisHash, f);\r\n\r\n\t\treturn f;\r\n\t}\r\n\r\n\tstatic eastNorthUpToFixedFrame = CT_Transforms.localFrameToFixedFrameGenerator('east', 'north');\r\n\r\n\tstatic matrix4ToFixedFrame(\r\n\t\torigin: CT_Cartesian3, \r\n\t\tmatrix: Matrix4, \r\n\t\tresult: Matrix4 = new Matrix4()\r\n\t) {\r\n\t\treturn result.copy(CT_Transforms.eastNorthUpToFixedFrame(origin)).multiply(matrix);\r\n\t}\r\n\r\n\tstatic headingPitchRollToFixedFrame(\r\n\t\torigin: CT_Cartesian3,\r\n\t\theading: number,\r\n\t\tpitch: number,\r\n\t\troll: number,\r\n\t\tresult: Matrix4 = new Matrix4()\r\n\t) {\r\n\t\tconst hprQuration = CT_Quaternion.fromHeadingPitchRoll(heading, pitch, roll);\r\n\t\t\r\n\t\tconst hprMatrix =\r\n\t\t\tCT_Matrix4.fromTranslationQuaternionRotationScale(\r\n\t\t\t\tCT_Cartesian3.ZERO,\r\n\t\t\t\thprQuration,\r\n\t\t\t\tnew CT_Cartesian3(1.0, 1.0, 1.0)\r\n\t\t\t);\r\n\t\t\r\n\t\treturn this.matrix4ToFixedFrame(origin, hprMatrix, result);\r\n\t}\r\n}\r\n","import { Matrix4, Vector3 } from \"three\";\r\nimport { CT_Cartesian3, CT_Transforms } from \".\";\r\nimport { CT_Matrix4 } from \"./matrix4\";\r\n\r\nexport interface IWGS84 { latitude: number, longitude: number, height: number }\r\n\r\nexport class CT_WGS84 extends Vector3 {\r\n  constructor(\r\n    latitude: number | undefined = undefined,\r\n    longitude: number | undefined = undefined,\r\n    height: number | undefined = undefined\r\n  ) {\r\n    super(latitude, longitude, height);\r\n  }\r\n\r\n  get latitude() {\r\n    return this.x;\r\n  }\r\n\r\n  set latitude(value: number) {\r\n    this.setX(value);\r\n  }\r\n\r\n  get longitude() {\r\n    return this.y;\r\n  }\r\n\r\n  set longitude(value: number) {\r\n    this.setY(value);\r\n  }\r\n\r\n  get height() {\r\n    return this.z;\r\n  }\r\n\r\n  set height(value: number) {\r\n    this.setZ(value);\r\n  }\r\n\r\n  getMatrix4(result: CT_Matrix4 = new CT_Matrix4()) {\r\n    const matrix = CT_Transforms.matrix4ToFixedFrame(\r\n      CT_Cartesian3.fromDegree(this.longitude, this.latitude, this.height),\r\n      new Matrix4()\r\n    ).elements;\r\n\r\n    // prettier-ignore\r\n    return result.set(\r\n        matrix[ 0], matrix[ 4], matrix[ 8], matrix[12],\r\n        matrix[ 1], matrix[ 5], matrix[ 9], matrix[13],\r\n        matrix[ 2], matrix[ 6], matrix[10], matrix[14],\r\n        matrix[ 3], matrix[ 7], matrix[11], matrix[15]\r\n    );\r\n  }\r\n\r\n  toJSON(): IWGS84 {\r\n    return {\r\n      latitude: this.latitude,\r\n      longitude: this.longitude,\r\n      height: this.height,\r\n    };\r\n  }\r\n\r\n  static fromCesiumWGS84(\r\n    latitude: number,\r\n    longitude: number,\r\n    height: number,\r\n    result: CT_WGS84 = new CT_WGS84()\r\n  ) {\r\n    return result.set(latitude, longitude, height);\r\n  }\r\n\r\n  static fromThreeWGS84(\r\n    latitude: number,\r\n    longitude: number,\r\n    height: number,\r\n    result: CT_WGS84 = new CT_WGS84()\r\n  ) {\r\n    return result.set(latitude, longitude, height);\r\n  }\r\n}\r\n"],"names":[],"version":3,"file":"core-thread.1f18482a.js.map","sourceRoot":"../"}